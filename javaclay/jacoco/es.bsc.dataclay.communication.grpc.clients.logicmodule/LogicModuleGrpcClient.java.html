<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LogicModuleGrpcClient.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">dataclay</a> &gt; <a href="index.source.html" class="el_package">es.bsc.dataclay.communication.grpc.clients.logicmodule</a> &gt; <span class="el_source">LogicModuleGrpcClient.java</span></div><h1>LogicModuleGrpcClient.java</h1><pre class="source lang-java linenums">
/**
 * 
 */
package es.bsc.dataclay.communication.grpc.clients.logicmodule;

import java.io.File;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.function.BiConsumer;
import java.util.function.Function;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

import com.google.protobuf.ByteString;

import es.bsc.dataclay.commonruntime.DataServiceRuntime;
import es.bsc.dataclay.communication.grpc.Utils;
import es.bsc.dataclay.communication.grpc.clients.CommonGrpcClient;
import es.bsc.dataclay.communication.grpc.generated.logicmodule.LogicModuleGrpc;
import es.bsc.dataclay.communication.grpc.generated.logicmodule.LogicModuleGrpc.LogicModuleBlockingStub;
import es.bsc.dataclay.communication.grpc.generated.logicmodule.LogicModuleGrpc.LogicModuleStub;
import es.bsc.dataclay.communication.grpc.messages.common.CommonMessages;
import es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.EmptyMessage;
import es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.ExceptionInfo;
import es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.GetTracesResponse;
import es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.Langs;
import es.bsc.dataclay.communication.grpc.messages.logicmodule.LogicmoduleMessages.*;
import es.bsc.dataclay.logic.api.LogicModuleAPI;
import es.bsc.dataclay.serialization.lib.SerializedParametersOrReturn;
import es.bsc.dataclay.util.Configuration;
import es.bsc.dataclay.util.events.listeners.ECA;
import es.bsc.dataclay.util.events.message.EventMessage;
import es.bsc.dataclay.util.ids.AccountID;
import es.bsc.dataclay.util.ids.ContractID;
import es.bsc.dataclay.util.ids.DataClayInstanceID;
import es.bsc.dataclay.util.ids.DataContractID;
import es.bsc.dataclay.util.ids.DataSetID;
import es.bsc.dataclay.util.ids.ExecutionEnvironmentID;
import es.bsc.dataclay.util.ids.ImplementationID;
import es.bsc.dataclay.util.ids.InterfaceID;
import es.bsc.dataclay.util.ids.MetaClassID;
import es.bsc.dataclay.util.ids.NamespaceID;
import es.bsc.dataclay.util.ids.ObjectID;
import es.bsc.dataclay.util.ids.OperationID;
import es.bsc.dataclay.util.ids.PropertyID;
import es.bsc.dataclay.util.ids.SessionID;
import es.bsc.dataclay.util.ids.StorageLocationID;
import es.bsc.dataclay.util.info.VersionInfo;
import es.bsc.dataclay.util.management.accountmgr.Account;
import es.bsc.dataclay.util.management.accountmgr.PasswordCredential;
import es.bsc.dataclay.util.management.classmgr.MetaClass;
import es.bsc.dataclay.util.management.contractmgr.Contract;
import es.bsc.dataclay.util.management.datacontractmgr.DataContract;
import es.bsc.dataclay.util.management.datasetmgr.DataSet;
import es.bsc.dataclay.util.management.interfacemgr.Interface;
import es.bsc.dataclay.util.management.metadataservice.DataClayInstance;
import es.bsc.dataclay.util.management.metadataservice.ExecutionEnvironment;
import es.bsc.dataclay.util.management.metadataservice.MetaDataInfo;
import es.bsc.dataclay.util.management.metadataservice.RegistrationInfo;
import es.bsc.dataclay.util.management.metadataservice.StorageLocation;
import es.bsc.dataclay.util.management.namespacemgr.Namespace;
import es.bsc.dataclay.util.management.sessionmgr.SessionInfo;
import es.bsc.dataclay.util.structs.Triple;
import es.bsc.dataclay.util.structs.Tuple;
import es.bsc.dataclay.util.yaml.CommonYAML;
import io.grpc.ManagedChannel;
import io.grpc.Metadata;
import io.grpc.StatusRuntimeException;
import io.grpc.netty.shaded.io.grpc.netty.GrpcSslContexts;
import io.grpc.netty.shaded.io.grpc.netty.NettyChannelBuilder;
import io.grpc.netty.shaded.io.netty.handler.ssl.SslContext;
import io.grpc.netty.shaded.io.netty.handler.ssl.SslContextBuilder;
import io.grpc.stub.MetadataUtils;
import io.grpc.stub.StreamObserver;

/**
 * Client code that makes gRPC calls to the server.
 */
public final class LogicModuleGrpcClient implements LogicModuleAPI {

	/** Logger. */
	private final Logger logger;

	/** Indicates if debug is enabled. */
<span class="nc" id="L95">	protected static final boolean DEBUG_ENABLED = Configuration.isDebugEnabled();</span>

	/** Number of max seconds to shutdown. */
	private static final int SECONDS_SHUTDOWN = 60;

	/** Sleeping time while there is asynchronous request to wait for. */
	private static final int ASYNC_WAIT_MILLIS = 1000;

	/** Channel. */
	private ManagedChannel channel;

	/** Logic Module blocking stub. */
	private LogicModuleBlockingStub blockingStub;

	/** Logic Module stub. */
	private LogicModuleStub asyncStub;

	/** Number of asynchronous requests send. */
<span class="nc" id="L113">	private final AtomicInteger asyncReqSend = new AtomicInteger(0);</span>

	/** Number of asynchronous requests received. */
<span class="nc" id="L116">	private final AtomicInteger asyncReqReceived = new AtomicInteger(0);</span>

	/**
	 * Construct client for accessing LogicModule server at {@code host:port}.
	 * 
	 * @param host
	 *            Host
	 * @param port
	 *            Port
	 */
<span class="nc" id="L126">	public LogicModuleGrpcClient(final String host, final int port) {</span>
		// Logger.getLogger(&quot;io.grpc&quot;).setLevel(Level.OFF);
<span class="nc" id="L128">		logger = LogManager.getLogger(&quot;grpc.client.logicmodule&quot;);</span>
<span class="nc" id="L129">		createStubs(host, port);</span>
<span class="nc" id="L130">	}</span>

	/**
	 * Create stubs to specified host and port. This function is also used in case
	 * we replace the connection.
	 * 
	 * @param host
	 *            Host name
	 * @param port
	 *            Port
	 */
	private void createStubs(final String host, final int port) {

		/*
		 * Tuple&lt;String, Integer&gt; actualAddress = translateDockerAddressIfNeeded(host,
		 * port); String actualHost = actualAddress.getFirst(); int actualPort =
		 * actualAddress.getSecond();
		 */
<span class="nc" id="L148">		final NettyChannelBuilder chBuilder = NettyChannelBuilder.forAddress(host, port)</span>
<span class="nc" id="L149">				.maxInboundMessageSize(Integer.MAX_VALUE).maxInboundMetadataSize(Integer.MAX_VALUE);</span>
		
		// Check if paths to certificates are defined 
<span class="nc bnc" id="L152" title="All 2 branches missed.">		if (Configuration.Flags.SSL_CLIENT_TRUSTED_CERTIFICATES.getStringValue() != null</span>
<span class="nc bnc" id="L153" title="All 2 branches missed.">				|| Configuration.Flags.SSL_CLIENT_CERTIFICATE.getStringValue() != null</span>
<span class="nc bnc" id="L154" title="All 2 branches missed.">				|| Configuration.Flags.SSL_CLIENT_KEY.getStringValue() != null) {</span>
			try {
<span class="nc" id="L156">				chBuilder.useTransportSecurity();</span>
<span class="nc" id="L157">				final SslContextBuilder sslContextBuilder = GrpcSslContexts.forClient(); </span>
<span class="nc bnc" id="L158" title="All 2 branches missed.">				if (Configuration.Flags.SSL_CLIENT_TRUSTED_CERTIFICATES.getStringValue() != null) { </span>
<span class="nc" id="L159">					sslContextBuilder.trustManager(new File(Configuration.Flags.SSL_CLIENT_TRUSTED_CERTIFICATES.getStringValue()));</span>
				} 
<span class="nc bnc" id="L161" title="All 2 branches missed.">				if (Configuration.Flags.SSL_CLIENT_CERTIFICATE.getStringValue() != null </span>
<span class="nc bnc" id="L162" title="All 2 branches missed.">						&amp;&amp; Configuration.Flags.SSL_CLIENT_KEY.getStringValue() != null) { </span>
<span class="nc" id="L163">					sslContextBuilder.keyManager(new File(Configuration.Flags.SSL_CLIENT_CERTIFICATE.getStringValue()),</span>
<span class="nc" id="L164">			            		new File(Configuration.Flags.SSL_CLIENT_KEY.getStringValue()));</span>
				}
<span class="nc" id="L166">				final SslContext sslContext = sslContextBuilder.build();</span>
<span class="nc" id="L167">				chBuilder.overrideAuthority(Configuration.Flags.SSL_TARGET_AUTHORITY.getStringValue());</span>
<span class="nc" id="L168">				chBuilder.sslContext(sslContext);</span>
<span class="nc" id="L169">			} catch (final Exception e) {</span>
<span class="nc" id="L170">				e.printStackTrace();</span>
<span class="nc" id="L171">			}</span>
<span class="nc" id="L172">			logger.info(&quot;SSL configured: using SSL_CLIENT_TRUSTED_CERTIFICATES located at &quot; + Configuration.Flags.SSL_CLIENT_TRUSTED_CERTIFICATES.getStringValue());</span>
<span class="nc" id="L173">			logger.info(&quot;SSL configured: using SSL_CLIENT_CERTIFICATE located at &quot; + Configuration.Flags.SSL_CLIENT_CERTIFICATE.getStringValue());</span>
<span class="nc" id="L174">			logger.info(&quot;SSL configured: using SSL_CLIENT_KEY located at &quot; + Configuration.Flags.SSL_CLIENT_KEY.getStringValue());</span>

		} else { 
<span class="nc" id="L177">			chBuilder.usePlaintext();</span>
			//chBuilder.negotiationType(NegotiationType.PLAINTEXT); 
<span class="nc" id="L179">			logger.info(&quot;Not using SSL&quot;);</span>

		}
<span class="nc" id="L182">		channel = chBuilder.build();</span>
		// Capture the metadata exchange
<span class="nc" id="L184">		final Metadata fixedHeaders = new Metadata();</span>
<span class="nc" id="L185">		fixedHeaders.put(CommonGrpcClient.SERVICE_ALIAS_HEADER_KEY, Configuration.Flags.LM_SERVICE_ALIAS_HEADERMSG.getStringValue());</span>
<span class="nc" id="L186">		blockingStub = MetadataUtils.attachHeaders(LogicModuleGrpc.newBlockingStub(channel), fixedHeaders);</span>
<span class="nc" id="L187">		asyncStub = MetadataUtils.attachHeaders(LogicModuleGrpc.newStub(channel), fixedHeaders);</span>
		
		//blockingStub.getCallOptions().withMaxOutboundMessageSize(Integer.MAX_VALUE);
		//asyncStub.getCallOptions().withMaxOutboundMessageSize(Integer.MAX_VALUE);

		
<span class="nc" id="L193">	}</span>

	/**
	 * Get blocking stub. Getter used in lambda functions to ensure it is executed
	 * and in case of replacing the stub, have control here.
	 * 
	 * @return Blocking stub.
	 */
	private LogicModuleBlockingStub getBlockingStub() {
<span class="nc" id="L202">		return blockingStub;</span>
	}

	/**
	 * Get async stub. Getter used in lambda functions to ensure it is executed and
	 * in case of replacing the stub, have control here.
	 * 
	 * @return Blocking stub.
	 */
	private LogicModuleStub getAsyncStub() {
<span class="nc" id="L212">		return asyncStub;</span>
	}

	/**
	 * Shutdown client
	 * 
	 * @throws InterruptedException
	 *             if some exception occurs
	 */
	public void shutdown() throws InterruptedException {
<span class="nc" id="L222">		channel.shutdownNow();</span>
<span class="nc bnc" id="L223" title="All 2 branches missed.">		while (!channel.awaitTermination(SECONDS_SHUTDOWN, TimeUnit.SECONDS)) { </span>
<span class="nc" id="L224">			System.out.println(&quot;[grpc] Waiting for channel to close...&quot;);</span>
		}
<span class="nc" id="L226">		channel = null;</span>
<span class="nc" id="L227">	}</span>

	/**
	 * Call logic module using lambda function provided.
	 * 
	 * @param &lt;T&gt;
	 *            Request type depending on function
	 * @param &lt;R&gt;
	 *            Response type depending on function
	 * @param request
	 *            Request to send
	 * @param fn
	 *            Function to call
	 * @return Response
	 */
	private &lt;T, R&gt; R callLogicModule(final T request, final Function&lt;T, R&gt; fn) {
<span class="nc" id="L243">		R response = null;</span>
<span class="nc" id="L244">		short retryCommunicationIteration = 0;</span>
<span class="nc bnc" id="L245" title="All 2 branches missed.">		while (retryCommunicationIteration &lt; Configuration.Flags.MAX_RETRIES_LOGICMODULE.getShortValue()) {</span>
			try {
<span class="nc" id="L247">				response = fn.apply(request);</span>
<span class="nc" id="L248">				break;</span>
<span class="nc" id="L249">			} catch (final StatusRuntimeException e) {</span>
<span class="nc" id="L250">				logger.debug(&quot;Error calling LogicModule&quot;, e);</span>
<span class="nc" id="L251">				retryCommunicationIteration++;</span>
<span class="nc bnc" id="L252" title="All 2 branches missed.">				if (retryCommunicationIteration &gt;= Configuration.Flags.MAX_RETRIES_LOGICMODULE.getShortValue()) {</span>
					// Use Backup LM
<span class="nc" id="L254">					throw new RuntimeException(e.getStatus().getDescription());</span>
					
				} else { 
					try {
<span class="nc" id="L258">						Thread.sleep(Configuration.Flags.SLEEP_RETRIES_LOGICMODULE.getShortValue());</span>
<span class="nc" id="L259">					} catch (final InterruptedException e1) {</span>
<span class="nc" id="L260">						e1.printStackTrace();</span>
<span class="nc" id="L261">					}</span>
				}
<span class="nc" id="L263">			}</span>
		}
<span class="nc" id="L265">		return response;</span>
	}

	/**
	 * Do an asynchronous call to LogicModule
	 * 
	 * @param &lt;T&gt;
	 *            Request type depending on function
	 * @param &lt;R&gt;
	 *            Response type depending on function
	 * @param request
	 *            Request to send
	 * @param fn
	 *            Function to call
	 * @param resultObserver
	 *            For asynchronous call, response observer in which response will be
	 *            added.
	 */
	private &lt;T, R&gt; void callLogicModuleAsync(final T request, final StreamObserver&lt;R&gt; resultObserver,
			final BiConsumer&lt;T, StreamObserver&lt;R&gt;&gt; fn) {
<span class="nc" id="L285">		short retryCommunicationIteration = 0;</span>
<span class="nc" id="L286">		asyncReqSend.incrementAndGet();</span>
<span class="nc bnc" id="L287" title="All 2 branches missed.">		while (retryCommunicationIteration &lt; Configuration.Flags.MAX_RETRIES_LOGICMODULE.getShortValue()) {</span>
			try {
<span class="nc" id="L289">				fn.accept(request, resultObserver);</span>
<span class="nc" id="L290">				break;</span>
<span class="nc" id="L291">			} catch (final StatusRuntimeException e) {</span>
<span class="nc" id="L292">				retryCommunicationIteration++;</span>
<span class="nc bnc" id="L293" title="All 2 branches missed.">				if (retryCommunicationIteration &gt;= Configuration.Flags.MAX_RETRIES_LOGICMODULE.getShortValue()) {</span>
					
<span class="nc" id="L295">					throw new RuntimeException(e.getStatus().getDescription());</span>
					
				}
<span class="nc" id="L298">			}</span>
		}
<span class="nc" id="L300">	}</span>

	@Override
	public void checkAlive() {
<span class="nc" id="L304">		final EmptyMessage request = EmptyMessage.getDefaultInstance();</span>
		final ExceptionInfo response;
<span class="nc" id="L306">		final Function&lt;EmptyMessage, ExceptionInfo&gt; f = req -&gt; getBlockingStub().checkAlive(req);</span>
<span class="nc" id="L307">		response = this.&lt;EmptyMessage, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L308">		Utils.checkIsExc(response);</span>
<span class="nc" id="L309">	}</span>

	@Override
	public void autoregisterSL(final StorageLocationID id, final String dsName,
			final String dsHostname, final Integer dsTCPPort) {

<span class="nc" id="L315">		final AutoRegisterSLRequest request = AutoRegisterSLRequest.newBuilder()</span>
<span class="nc" id="L316">				.setDsName(dsName).setStorageLocationID(Utils.getMsgID(id))</span>
<span class="nc" id="L317">				.setDsHostname(dsHostname).setDsPort(dsTCPPort).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L319">		final Function&lt;AutoRegisterSLRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L320">				.autoregisterSL(req);</span>
<span class="nc" id="L321">		response = this.&lt;AutoRegisterSLRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L322">		Utils.checkIsExc(response);</span>
<span class="nc" id="L323">	}</span>
	
	@Override
	public StorageLocationID autoregisterEE(final ExecutionEnvironmentID id, final String eeName,
			final String eeHostname, final Integer eePort, final Langs language) {

<span class="nc" id="L329">		final AutoRegisterEERequest request = AutoRegisterEERequest.newBuilder()</span>
<span class="nc" id="L330">				.setEeName(eeName).setEeHostname(eeHostname).setEePort(eePort)</span>
<span class="nc" id="L331">				.setLang(language).setExecutionEnvironmentID(Utils.getMsgID(id)).build();</span>
		final AutoRegisterEEResponse response;
<span class="nc" id="L333">		final Function&lt;AutoRegisterEERequest, AutoRegisterEEResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L334">				.autoregisterEE(req);</span>
<span class="nc" id="L335">		response = this.&lt;AutoRegisterEERequest, AutoRegisterEEResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L336">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L337">		return Utils.getID(response.getStorageLocationID());</span>
	}

	@Override
	public void unregisterStorageLocation(final StorageLocationID stLocID) {
<span class="nc" id="L342">		final UnregisterStorageLocationRequest request = UnregisterStorageLocationRequest.newBuilder()</span>
<span class="nc" id="L343">				.setStorageLocationID(Utils.getMsgID(stLocID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L345">		final Function&lt;UnregisterStorageLocationRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L346">				.unregisterStorageLocation(req);</span>
<span class="nc" id="L347">		response = this.&lt;UnregisterStorageLocationRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L348">		Utils.checkIsExc(response);</span>
<span class="nc" id="L349">	}</span>

	@Override
	public void unregisterExecutionEnvironment(final ExecutionEnvironmentID execEnvID) {
<span class="nc" id="L353">		final UnregisterExecutionEnvironmentRequest request = UnregisterExecutionEnvironmentRequest.newBuilder()</span>
<span class="nc" id="L354">				.setExecutionEnvironmentID(Utils.getMsgID(execEnvID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L356">		final Function&lt;UnregisterExecutionEnvironmentRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L357">				.unregisterExecutionEnvironment(req);</span>
<span class="nc" id="L358">		response = this.&lt;UnregisterExecutionEnvironmentRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L359">		Utils.checkIsExc(response);</span>
<span class="nc" id="L360">	}</span>

	@Override
	public byte[] performSetOfNewAccounts(final AccountID adminID, final PasswordCredential adminCredential,
			final byte[] yamlFile) {
<span class="nc" id="L365">		final PerformSetAccountsRequest request = PerformSetAccountsRequest.newBuilder()</span>
<span class="nc" id="L366">				.setAccountID(Utils.getMsgID(adminID)).setCredential(Utils.getCredential(adminCredential))</span>
<span class="nc" id="L367">				.setYamlBytes(ByteString.copyFrom(yamlFile)).build();</span>
		final PerformSetAccountsResponse response;
<span class="nc" id="L369">		final Function&lt;PerformSetAccountsRequest, PerformSetAccountsResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L370">				.performSetOfNewAccounts(req);</span>
<span class="nc" id="L371">		response = this.&lt;PerformSetAccountsRequest, PerformSetAccountsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L372">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L373">		final byte[] result = response.getResultYamlBytes().toByteArray();</span>
<span class="nc" id="L374">		return result;</span>
	}

	@Override
	public byte[] performSetOfOperations(final AccountID performerID, final PasswordCredential performerCredential,
			final byte[] yamlFile) {
<span class="nc" id="L380">		final PerformSetOperationsRequest request = PerformSetOperationsRequest.newBuilder()</span>
<span class="nc" id="L381">				.setAccountID(Utils.getMsgID(performerID)).setCredential(Utils.getCredential(performerCredential))</span>
<span class="nc" id="L382">				.setYamlBytes(ByteString.copyFrom(yamlFile)).build();</span>

		final PerformSetOperationsResponse response;
<span class="nc" id="L385">		final Function&lt;PerformSetOperationsRequest, PerformSetOperationsResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L386">				.performSetOfOperations(req);</span>
<span class="nc" id="L387">		response = this.&lt;PerformSetOperationsRequest, PerformSetOperationsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L388">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L389">		final byte[] result = response.getResultYamlBytes().toByteArray();</span>
<span class="nc" id="L390">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newAccount(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.accountmgr.Account)
	 */
	@Override
	public AccountID newAccountNoAdmin(final Account newAccount) {
<span class="nc" id="L402">		final String accYaml = CommonYAML.getYamlObject().dump(newAccount);</span>
<span class="nc" id="L403">		final NewAccountNoAdminRequest request = NewAccountNoAdminRequest.newBuilder().setYamlNewAccount(accYaml)</span>
<span class="nc" id="L404">				.build();</span>

		final NewAccountResponse response;
<span class="nc" id="L407">		final Function&lt;NewAccountNoAdminRequest, NewAccountResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L408">				.newAccountNoAdmin(req);</span>

<span class="nc" id="L410">		response = this.&lt;NewAccountNoAdminRequest, NewAccountResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L411">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L412">		return Utils.getID(response.getNewAccountID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newAccount(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.accountmgr.Account)
	 */
	@Override
	public AccountID newAccount(final AccountID adminAccountID, final PasswordCredential adminCredential,
			final Account newAccount) {
<span class="nc" id="L425">		final String accYaml = CommonYAML.getYamlObject().dump(newAccount);</span>
<span class="nc" id="L426">		final NewAccountRequest request = NewAccountRequest.newBuilder().setAdminID(Utils.getMsgID(adminAccountID))</span>
<span class="nc" id="L427">				.setAdmincredential(Utils.getCredential(adminCredential)).setYamlNewAccount(accYaml).build();</span>

		final NewAccountResponse response;
<span class="nc" id="L430">		final Function&lt;NewAccountRequest, NewAccountResponse&gt; f = req -&gt; getBlockingStub().newAccount(req);</span>

<span class="nc" id="L432">		response = this.&lt;NewAccountRequest, NewAccountResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L433">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L434">		return Utils.getID(response.getNewAccountID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getAccountID(java.lang.String)
	 */
	@Override
	public AccountID getAccountID(final String accountName) {

<span class="nc" id="L445">		final GetAccountIDRequest request = GetAccountIDRequest.newBuilder().setAccountName(accountName).build();</span>

		final GetAccountIDResponse response;
<span class="nc" id="L448">		final Function&lt;GetAccountIDRequest, GetAccountIDResponse&gt; f = req -&gt; getBlockingStub().getAccountID(req);</span>
<span class="nc" id="L449">		response = this.&lt;GetAccountIDRequest, GetAccountIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L450">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L451">		return Utils.getID(response.getNewAccountID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getAccountList(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Set&lt;AccountID&gt; getAccountList(final AccountID adminAccountID, final PasswordCredential adminCredential) {
<span class="nc" id="L462">		final GetAccountListRequest request = GetAccountListRequest.newBuilder()</span>
<span class="nc" id="L463">				.setAdminID(Utils.getMsgID(adminAccountID)).setAdmincredential(Utils.getCredential(adminCredential))</span>
<span class="nc" id="L464">				.build();</span>

		final GetAccountListResponse response;
<span class="nc" id="L467">		final Function&lt;GetAccountListRequest, GetAccountListResponse&gt; f = req -&gt; getBlockingStub().getAccountList(req);</span>
<span class="nc" id="L468">		response = this.&lt;GetAccountListRequest, GetAccountListResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L469">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L471">		final Set&lt;AccountID&gt; result = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L472" title="All 2 branches missed.">		for (final String id : response.getAccountIDsList()) {</span>
<span class="nc" id="L473">			result.add(Utils.getAccountIDFromUUID(id));</span>
<span class="nc" id="L474">		}</span>

<span class="nc" id="L476">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newSession(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.util.Set, java.util.Set,
	 * java.lang.String, communication.grpc.messages.common.CommonMessages.Langs)
	 */
	@Override
	public SessionInfo newSession(final AccountID accountID, final PasswordCredential credential,
			final Set&lt;ContractID&gt; contracts, final Set&lt;DataSetID&gt; dataSetIDs, final DataSetID dataSetForStore,
			final Langs newsessionLang) {

<span class="nc" id="L491">		final NewSessionRequest.Builder requestBuilder = NewSessionRequest.newBuilder();</span>
<span class="nc bnc" id="L492" title="All 2 branches missed.">		for (final ContractID conID : contracts) {</span>
<span class="nc" id="L493">			requestBuilder.addContractIDs(Utils.getMsgID(conID));</span>
<span class="nc" id="L494">		}</span>
<span class="nc bnc" id="L495" title="All 2 branches missed.">		for (final DataSetID dataSetID : dataSetIDs) {</span>
<span class="nc" id="L496">			requestBuilder.addDataSetIDs(Utils.getMsgID(dataSetID));</span>
<span class="nc" id="L497">		}</span>
<span class="nc" id="L498">		final NewSessionRequest request = requestBuilder.setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L499">				.setCredential(Utils.getCredential(credential)).setStoreDataSet(Utils.getMsgID(dataSetForStore))</span>
<span class="nc" id="L500">				.setSessionLang(newsessionLang).build();</span>

		final NewSessionResponse response;
<span class="nc" id="L503">		final Function&lt;NewSessionRequest, NewSessionResponse&gt; f = req -&gt; getBlockingStub().newSession(req);</span>
<span class="nc" id="L504">		response = this.&lt;NewSessionRequest, NewSessionResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L505">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L507">		return (SessionInfo) CommonYAML.getYamlObject().load(response.getSessionInfo());</span>
	}

	@Override
	public void closeSession(final SessionID sessionID) {
<span class="nc" id="L512">		final CloseSessionRequest.Builder requestBuilder = CloseSessionRequest.newBuilder();</span>
<span class="nc" id="L513">		requestBuilder.setSessionID(Utils.getMsgID(sessionID));</span>
<span class="nc" id="L514">		final CloseSessionRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L516">		final Function&lt;CloseSessionRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().closeSession(req);</span>
<span class="nc" id="L517">		response = this.&lt;CloseSessionRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L518">		Utils.checkIsExc(response);</span>

<span class="nc" id="L520">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getInfoOfSessionForDS(dataClay.util.ids.SessionID)
	 */
	@Override
	public Tuple&lt;Tuple&lt;DataSetID, Set&lt;DataSetID&gt;&gt;, Calendar&gt; getInfoOfSessionForDS(final SessionID sessionID) {
<span class="nc" id="L530">		final GetInfoOfSessionForDSRequest request = GetInfoOfSessionForDSRequest.newBuilder()</span>
<span class="nc" id="L531">				.setSessionID(Utils.getMsgID(sessionID)).build();</span>

		final GetInfoOfSessionForDSResponse response;
<span class="nc" id="L534">		final Function&lt;GetInfoOfSessionForDSRequest, GetInfoOfSessionForDSResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L535">				.getInfoOfSessionForDS(req);</span>
<span class="nc" id="L536">		response = this.&lt;GetInfoOfSessionForDSRequest, GetInfoOfSessionForDSResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L537">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L539">		final DataSetID dsId = Utils.getID(response.getDataSetID());</span>
<span class="nc" id="L540">		final Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L541">		calendar.setTimeInMillis(response.getDate());</span>
<span class="nc" id="L542">		final Set&lt;DataSetID&gt; datasets = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L543" title="All 2 branches missed.">		for (final es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.DataSetID id : response</span>
<span class="nc" id="L544">				.getDataSetIDsList()) {</span>
<span class="nc" id="L545">			datasets.add(Utils.getID(id));</span>
<span class="nc" id="L546">		}</span>

<span class="nc" id="L548">		return new Tuple&lt;&gt;(new Tuple&lt;&gt;(dsId, datasets), calendar);</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newNamespace(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.namespacemgr.Namespace)
	 */
	@Override
	public NamespaceID newNamespace(final AccountID accountID, final PasswordCredential credential,
			final Namespace newNamespace) {
<span class="nc" id="L561">		final String yaml = CommonYAML.getYamlObject().dump(newNamespace);</span>
<span class="nc" id="L562">		final NewNamespaceRequest request = NewNamespaceRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L563">				.setCredential(Utils.getCredential(credential)).setNewNamespaceYaml(yaml).build();</span>

		final NewNamespaceResponse response;
<span class="nc" id="L566">		final Function&lt;NewNamespaceRequest, NewNamespaceResponse&gt; f = req -&gt; getBlockingStub().newNamespace(req);</span>
<span class="nc" id="L567">		response = this.&lt;NewNamespaceRequest, NewNamespaceResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L568">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L569">		return Utils.getID(response.getNamespaceID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#removeNamespace(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String)
	 */
	@Override
	public void removeNamespace(final AccountID accountID, final PasswordCredential credential,
			final String namespaceName) {
<span class="nc" id="L581">		final RemoveNamespaceRequest request = RemoveNamespaceRequest.newBuilder()</span>
<span class="nc" id="L582">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L583">				.setNamespaceName(namespaceName).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L585">		final Function&lt;RemoveNamespaceRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().removeNamespace(req);</span>
<span class="nc" id="L586">		response = this.&lt;RemoveNamespaceRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L587">		Utils.checkIsExc(response);</span>
<span class="nc" id="L588">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getNamespaces(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Set&lt;String&gt; getNamespaces(final AccountID accountID, final PasswordCredential credential) {
<span class="nc" id="L598">		final GetNamespacesRequest request = GetNamespacesRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L599">				.setCredential(Utils.getCredential(credential)).build();</span>
		final GetNamespacesResponse response;
<span class="nc" id="L601">		final Function&lt;GetNamespacesRequest, GetNamespacesResponse&gt; f = req -&gt; getBlockingStub().getNamespaces(req);</span>
<span class="nc" id="L602">		response = this.&lt;GetNamespacesRequest, GetNamespacesResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L603">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L604">		final Set&lt;String&gt; result = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L605" title="All 2 branches missed.">		for (final String namespace : response.getNamespacesList()) {</span>
<span class="nc" id="L606">			result.add(namespace);</span>
<span class="nc" id="L607">		}</span>
<span class="nc" id="L608">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getNamespaceID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String)
	 */
	@Override
	public NamespaceID getNamespaceID(final AccountID accountID, final PasswordCredential credential,
			final String namespaceName) {
<span class="nc" id="L620">		final GetNamespaceIDRequest request = GetNamespaceIDRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L621">				.setCredential(Utils.getCredential(credential)).setNamespaceName(namespaceName).build();</span>
		final GetNamespaceIDResponse response;
<span class="nc" id="L623">		final Function&lt;GetNamespaceIDRequest, GetNamespaceIDResponse&gt; f = req -&gt; getBlockingStub().getNamespaceID(req);</span>
<span class="nc" id="L624">		response = this.&lt;GetNamespaceIDRequest, GetNamespaceIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L625">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L627">		return Utils.getID(response.getNamespaceID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getNamespaceID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String)
	 */
	@Override
	public Langs getNamespaceLang(final AccountID accountID, final PasswordCredential credential,
			final String namespaceName) {
<span class="nc" id="L639">		final GetNamespaceLangRequest request = GetNamespaceLangRequest.newBuilder()</span>
<span class="nc" id="L640">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L641">				.setNamespaceName(namespaceName).build();</span>
		final GetNamespaceLangResponse response;
<span class="nc" id="L643">		final Function&lt;GetNamespaceLangRequest, GetNamespaceLangResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L644">				.getNamespaceLang(req);</span>
<span class="nc" id="L645">		response = this.&lt;GetNamespaceLangRequest, GetNamespaceLangResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L646">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L647">		return response.getLanguage();</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getObjectDataSetID(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID)
	 */
	@Override
	public DataSetID getObjectDataSetID(final SessionID sessionID, final ObjectID oid) {
<span class="nc" id="L658">		final GetObjectDataSetIDRequest request = GetObjectDataSetIDRequest.newBuilder()</span>
<span class="nc" id="L659">				.setSessionID(Utils.getMsgID(sessionID)).setObjectID(Utils.getMsgID(oid)).build();</span>
		final GetObjectDataSetIDResponse response;
<span class="nc" id="L661">		final Function&lt;GetObjectDataSetIDRequest, GetObjectDataSetIDResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L662">				.getObjectDataSetID(req);</span>
<span class="nc" id="L663">		response = this.&lt;GetObjectDataSetIDRequest, GetObjectDataSetIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L664">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L665">		return Utils.getID(response.getDataSetID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#importInterface(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * util.ids.ContractID, util.ids.InterfaceID)
	 */
	@Override
	public void importInterface(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final ContractID contractID, final InterfaceID interfaceID) {
<span class="nc" id="L678">		final ImportInterfaceRequest request = ImportInterfaceRequest.newBuilder()</span>
<span class="nc" id="L679">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L680">				.setNamespaceID(Utils.getMsgID(namespaceID)).setContractID(Utils.getMsgID(contractID))</span>
<span class="nc" id="L681">				.setInterfaceID(Utils.getMsgID(interfaceID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L683">		final Function&lt;ImportInterfaceRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().importInterface(req);</span>
<span class="nc" id="L684">		response = this.&lt;ImportInterfaceRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L685">		Utils.checkIsExc(response);</span>
<span class="nc" id="L686">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#importContract(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * util.ids.ContractID)
	 */
	@Override
	public void importContract(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final ContractID contractID) {
<span class="nc" id="L698">		final ImportContractRequest request = ImportContractRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L699">				.setCredential(Utils.getCredential(credential)).setNamespaceID(Utils.getMsgID(namespaceID))</span>
<span class="nc" id="L700">				.setContractID(Utils.getMsgID(contractID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L702">		final Function&lt;ImportContractRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().importContract(req);</span>
<span class="nc" id="L703">		response = this.&lt;ImportContractRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L704">		Utils.checkIsExc(response);</span>

<span class="nc" id="L706">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newDataSet(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.datasetmgr.DataSet)
	 */
	@Override
	public DataSetID newDataSet(final AccountID accountID, final PasswordCredential credential, final DataSet dataset) {
<span class="nc" id="L717">		final String yaml = CommonYAML.getYamlObject().dump(dataset);</span>
<span class="nc" id="L718">		final NewDataSetRequest request = NewDataSetRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L719">				.setCredential(Utils.getCredential(credential)).setDataSetYaml(yaml).build();</span>

		final NewDataSetResponse response;
<span class="nc" id="L722">		final Function&lt;NewDataSetRequest, NewDataSetResponse&gt; f = req -&gt; getBlockingStub().newDataSet(req);</span>
<span class="nc" id="L723">		response = this.&lt;NewDataSetRequest, NewDataSetResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L724">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L725">		return Utils.getID(response.getDataSetID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#removeDataSet(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String)
	 */
	@Override
	public void removeDataSet(final AccountID accountID, final PasswordCredential credential,
			final String datasetName) {
<span class="nc" id="L737">		final RemoveDataSetRequest request = RemoveDataSetRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L738">				.setCredential(Utils.getCredential(credential)).setDataSetName(datasetName).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L740">		final Function&lt;RemoveDataSetRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().removeDataSet(req);</span>
<span class="nc" id="L741">		response = this.&lt;RemoveDataSetRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L742">		Utils.checkIsExc(response);</span>

<span class="nc" id="L744">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getDataSetID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String)
	 */
	@Override
	public DataSetID getDataSetID(final AccountID accountID, final PasswordCredential credential,
			final String datasetName) {
<span class="nc" id="L755">		final GetDataSetIDRequest request = GetDataSetIDRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L756">				.setCredential(Utils.getCredential(credential)).setDataSetName(datasetName).build();</span>
		final GetDataSetIDResponse response;
<span class="nc" id="L758">		final Function&lt;GetDataSetIDRequest, GetDataSetIDResponse&gt; f = req -&gt; getBlockingStub().getDataSetID(req);</span>
<span class="nc" id="L759">		response = this.&lt;GetDataSetIDRequest, GetDataSetIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L760">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L761">		return Utils.getID(response.getDataSetID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#checkDataSetIsPublic(dataClay.util.ids.DataSetID)
	 */
	@Override
	public boolean checkDataSetIsPublic(final es.bsc.dataclay.util.ids.DataSetID dataSetID) {
<span class="nc" id="L772">		final CheckDataSetIsPublicRequest request = CheckDataSetIsPublicRequest.newBuilder()</span>
<span class="nc" id="L773">				.setDataSetID(Utils.getMsgID(dataSetID)).build();</span>
		final CheckDataSetIsPublicResponse response;
<span class="nc" id="L775">		final Function&lt;CheckDataSetIsPublicRequest, CheckDataSetIsPublicResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L776">				.checkDataSetIsPublic(req);</span>
<span class="nc" id="L777">		response = this.&lt;CheckDataSetIsPublicRequest, CheckDataSetIsPublicResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L778">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L779">		return response.getIsPublic();</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getPublicDataSets(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Set&lt;String&gt; getPublicDataSets(final AccountID accountID, final PasswordCredential credential) {
<span class="nc" id="L790">		final GetPublicDataSetsRequest request = GetPublicDataSetsRequest.newBuilder()</span>
<span class="nc" id="L791">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential)).build();</span>
		final GetPublicDataSetsResponse response;
<span class="nc" id="L793">		final Function&lt;GetPublicDataSetsRequest, GetPublicDataSetsResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L794">				.getPublicDataSets(req);</span>
<span class="nc" id="L795">		response = this.&lt;GetPublicDataSetsRequest, GetPublicDataSetsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L796">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L797">		final Set&lt;String&gt; result = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L798" title="All 2 branches missed.">		for (final String dataSetName : response.getDataSetsList()) {</span>
<span class="nc" id="L799">			result.add(dataSetName);</span>
<span class="nc" id="L800">		}</span>
<span class="nc" id="L801">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getPublicDataSets(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Set&lt;String&gt; getAccountDataSets(final AccountID accountID, final PasswordCredential credential) {
<span class="nc" id="L812">		final GetAccountDataSetsRequest request = GetAccountDataSetsRequest.newBuilder()</span>
<span class="nc" id="L813">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential)).build();</span>
		final GetAccountDataSetsResponse response;
<span class="nc" id="L815">		final Function&lt;GetAccountDataSetsRequest, GetAccountDataSetsResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L816">				.getAccountDataSets(req);</span>
<span class="nc" id="L817">		response = this.&lt;GetAccountDataSetsRequest, GetAccountDataSetsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L818">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L819">		final Set&lt;String&gt; result = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L820" title="All 2 branches missed.">		for (final String dataSetName : response.getDataSetsList()) {</span>
<span class="nc" id="L821">			result.add(dataSetName);</span>
<span class="nc" id="L822">		}</span>
<span class="nc" id="L823">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newClass(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * communication.grpc.messages.common.CommonMessages.Langs, java.util.Map)
	 */
	@Override
	public Map&lt;String, MetaClass&gt; newClass(final AccountID accountID, final PasswordCredential credential,
			final Langs language, final Map&lt;String, MetaClass&gt; newClasses) {

<span class="nc" id="L837">		final NewClassRequest.Builder builder = NewClassRequest.newBuilder();</span>
<span class="nc" id="L838">		builder.setAccountID(Utils.getMsgID(accountID));</span>
<span class="nc" id="L839">		builder.setCredential(Utils.getCredential(credential));</span>
<span class="nc" id="L840">		builder.setLanguage(language);</span>
<span class="nc bnc" id="L841" title="All 2 branches missed.">		for (final Entry&lt;String, MetaClass&gt; entry : newClasses.entrySet()) {</span>
<span class="nc" id="L842">			final String yaml = CommonYAML.getYamlObject().dump(entry.getValue());</span>
<span class="nc" id="L843">			builder.putNewClasses(entry.getKey(), yaml);</span>
<span class="nc" id="L844">		}</span>
<span class="nc" id="L845">		final NewClassRequest request = builder.build();</span>
		final NewClassResponse response;
<span class="nc" id="L847">		final Function&lt;NewClassRequest, NewClassResponse&gt; f = req -&gt; getBlockingStub().newClass(req);</span>
<span class="nc" id="L848">		response = this.&lt;NewClassRequest, NewClassResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L849">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L850">		final Map&lt;String, MetaClass&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L851" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getNewClassesMap().entrySet()) {</span>
<span class="nc" id="L852">			final MetaClass clazz = (MetaClass) CommonYAML.getYamlObject().load(entry.getValue());</span>
<span class="nc" id="L853">			result.put(entry.getKey(), clazz);</span>
<span class="nc" id="L854">		}</span>
<span class="nc" id="L855">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newClassID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String,
	 * communication.grpc.messages.common.CommonMessages.Langs, java.util.Map)
	 */
	@Override
	public MetaClassID newClassID(final AccountID accountID, final PasswordCredential credential,
			final String className, final Langs language, final Map&lt;String, MetaClass&gt; newClasses) {
<span class="nc" id="L868">		final NewClassIDRequest.Builder builder = NewClassIDRequest.newBuilder();</span>
<span class="nc" id="L869">		builder.setAccountID(Utils.getMsgID(accountID));</span>
<span class="nc" id="L870">		builder.setCredential(Utils.getCredential(credential));</span>
<span class="nc" id="L871">		builder.setClassName(className);</span>
<span class="nc" id="L872">		builder.setLanguage(language);</span>
<span class="nc bnc" id="L873" title="All 2 branches missed.">		for (final Entry&lt;String, MetaClass&gt; entry : newClasses.entrySet()) {</span>
<span class="nc" id="L874">			final String yaml = CommonYAML.getYamlObject().dump(entry.getValue());</span>
<span class="nc" id="L875">			builder.putNewClasses(entry.getKey(), yaml);</span>
<span class="nc" id="L876">		}</span>
<span class="nc" id="L877">		final NewClassIDRequest request = builder.build();</span>
		final NewClassIDResponse response;
<span class="nc" id="L879">		final Function&lt;NewClassIDRequest, NewClassIDResponse&gt; f = req -&gt; getBlockingStub().newClassID(req);</span>
<span class="nc" id="L880">		response = this.&lt;NewClassIDRequest, NewClassIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L881">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L882">		return Utils.getID(response.getClassID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#removeClass(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String)
	 */
	@Override
	public void removeClass(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className) {
<span class="nc" id="L895">		final RemoveClassRequest request = RemoveClassRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L896">				.setCredential(Utils.getCredential(credential)).setClassName(className).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L898">		final Function&lt;RemoveClassRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().removeClass(req);</span>
<span class="nc" id="L899">		response = this.&lt;RemoveClassRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L900">		Utils.checkIsExc(response);</span>

<span class="nc" id="L902">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#removeOperation(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String, java.lang.String)
	 */
	@Override
	public void removeOperation(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className, final String operationSignature) {
<span class="nc" id="L914">		final RemoveOperationRequest request = RemoveOperationRequest.newBuilder()</span>
<span class="nc" id="L915">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L916">				.setNamespaceID(Utils.getMsgID(namespaceID)).setClassName(className)</span>
<span class="nc" id="L917">				.setOperationNameAndSignature(operationSignature).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L919">		final Function&lt;RemoveOperationRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().removeOperation(req);</span>
<span class="nc" id="L920">		response = this.&lt;RemoveOperationRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L921">		Utils.checkIsExc(response);</span>
<span class="nc" id="L922">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#removeImplementation(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * util.ids.ImplementationID)
	 */
	@Override
	public void removeImplementation(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final ImplementationID implementationID) {
<span class="nc" id="L935">		final RemoveImplementationRequest request = RemoveImplementationRequest.newBuilder()</span>
<span class="nc" id="L936">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L937">				.setNamespaceID(Utils.getMsgID(namespaceID)).setImplementationID(Utils.getMsgID(implementationID))</span>
<span class="nc" id="L938">				.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L940">		final Function&lt;RemoveImplementationRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L941">				.removeImplementation(req);</span>
<span class="nc" id="L942">		response = this.&lt;RemoveImplementationRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L943">		Utils.checkIsExc(response);</span>

<span class="nc" id="L945">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getOperationID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String, java.lang.String)
	 */
	@Override
	public OperationID getOperationID(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className, final String operationSignature) {
<span class="nc" id="L957">		final GetOperationIDRequest request = GetOperationIDRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L958">				.setCredential(Utils.getCredential(credential)).setClassName(className)</span>
<span class="nc" id="L959">				.setOperationNameAndSignature(operationSignature).build();</span>
		final GetOperationIDResponse response;
<span class="nc" id="L961">		final Function&lt;GetOperationIDRequest, GetOperationIDResponse&gt; f = req -&gt; getBlockingStub().getOperationID(req);</span>
<span class="nc" id="L962">		response = this.&lt;GetOperationIDRequest, GetOperationIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L963">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L964">		return Utils.getID(response.getOperationID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getPropertyID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String, java.lang.String)
	 */
	@Override
	public PropertyID getPropertyID(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className, final String propertyName) {
<span class="nc" id="L977">		final GetPropertyIDRequest request = GetPropertyIDRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L978">				.setCredential(Utils.getCredential(credential)).setNamespaceID(Utils.getMsgID(namespaceID))</span>
<span class="nc" id="L979">				.setClassName(className).setPropertyName(propertyName).build();</span>
		final GetPropertyIDResponse response;
<span class="nc" id="L981">		final Function&lt;GetPropertyIDRequest, GetPropertyIDResponse&gt; f = req -&gt; getBlockingStub().getPropertyID(req);</span>
<span class="nc" id="L982">		response = this.&lt;GetPropertyIDRequest, GetPropertyIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L983">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L984">		return Utils.getID(response.getPropertyID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getClassID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String)
	 */
	@Override
	public MetaClassID getClassID(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className) {
<span class="nc" id="L997">		final GetClassIDRequest request = GetClassIDRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L998">				.setCredential(Utils.getCredential(credential)).setNamespaceID(Utils.getMsgID(namespaceID))</span>
<span class="nc" id="L999">				.setClassName(className).build();</span>
		final GetClassIDResponse response;
<span class="nc" id="L1001">		final Function&lt;GetClassIDRequest, GetClassIDResponse&gt; f = req -&gt; getBlockingStub().getClassID(req);</span>
<span class="nc" id="L1002">		response = this.&lt;GetClassIDRequest, GetClassIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1003">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1004">		return Utils.getID(response.getClassID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getClassInfo(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String)
	 */
	@Override
	public MetaClass getClassInfo(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className) {
<span class="nc" id="L1017">		final GetClassInfoRequest request = GetClassInfoRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L1018">				.setCredential(Utils.getCredential(credential)).setNamespaceID(Utils.getMsgID(namespaceID))</span>
<span class="nc" id="L1019">				.setClassName(className).build();</span>
		final GetClassInfoResponse response;
<span class="nc" id="L1021">		final Function&lt;GetClassInfoRequest, GetClassInfoResponse&gt; f = req -&gt; getBlockingStub().getClassInfo(req);</span>
<span class="nc" id="L1022">		response = this.&lt;GetClassInfoRequest, GetClassInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1023">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1024">		final MetaClass result = (MetaClass) CommonYAML.getYamlObject().load(response.getMetaClassYaml());</span>
<span class="nc" id="L1025">		return result;</span>

	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getInfoOfClassesInNamespace(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.NamespaceID)
	 */
	@Override
	public Map&lt;MetaClassID, MetaClass&gt; getInfoOfClassesInNamespace(final AccountID accountID,
			final PasswordCredential credential, final NamespaceID namespaceID) {
<span class="nc" id="L1039">		final GetInfoOfClassesInNamespaceRequest request = GetInfoOfClassesInNamespaceRequest.newBuilder()</span>
<span class="nc" id="L1040">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1041">				.setNamespaceID(Utils.getMsgID(namespaceID)).build();</span>
<span class="nc" id="L1042">		GetInfoOfClassesInNamespaceResponse response = null;</span>
<span class="nc" id="L1043">		final Function&lt;GetInfoOfClassesInNamespaceRequest, GetInfoOfClassesInNamespaceResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1044">				.getInfoOfClassesInNamespace(req);</span>
<span class="nc" id="L1045">		response = this</span>
<span class="nc" id="L1046">				.&lt;GetInfoOfClassesInNamespaceRequest, GetInfoOfClassesInNamespaceResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1047">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1048">		final Map&lt;MetaClassID, MetaClass&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1049" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getClassesInfoMap().entrySet()) {</span>
<span class="nc" id="L1050">			final MetaClass clazz = (MetaClass) CommonYAML.getYamlObject().load(entry.getValue());</span>
<span class="nc" id="L1051">			result.put(Utils.getMetaClassIDFromUUID(entry.getKey()), clazz);</span>
<span class="nc" id="L1052">		}</span>
<span class="nc" id="L1053">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newContract(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.contractmgr.Contract)
	 */
	@Override
	public ContractID newContract(final AccountID accountID, final PasswordCredential credential,
			final Contract newContract) {
<span class="nc" id="L1066">		final String yaml = CommonYAML.getYamlObject().dump(newContract);</span>
<span class="nc" id="L1067">		final NewContractRequest request = NewContractRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L1068">				.setCredential(Utils.getCredential(credential)).setNewContractYaml(yaml).build();</span>

		final NewContractResponse response;
<span class="nc" id="L1071">		final Function&lt;NewContractRequest, NewContractResponse&gt; f = req -&gt; getBlockingStub().newContract(req);</span>
<span class="nc" id="L1072">		response = this.&lt;NewContractRequest, NewContractResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1073">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1074">		return Utils.getID(response.getContractID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#registerToPublicContract(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.ContractID)
	 */
	@Override
	public void registerToPublicContract(final AccountID accountID, final PasswordCredential credential,
			final ContractID contractID) {
<span class="nc" id="L1087">		final RegisterToPublicContractRequest request = RegisterToPublicContractRequest.newBuilder()</span>
<span class="nc" id="L1088">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1089">				.setContractID(Utils.getMsgID(contractID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1091">		final Function&lt;RegisterToPublicContractRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1092">				.registerToPublicContract(req);</span>
<span class="nc" id="L1093">		response = this.&lt;RegisterToPublicContractRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1094">		Utils.checkIsExc(response);</span>

<span class="nc" id="L1096">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#registerToPublicContractOfNamespace(dataClay.util.
	 * ids.AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.NamespaceID)
	 */
	@Override
	public ContractID registerToPublicContractOfNamespace(final AccountID accountID,
			final PasswordCredential credential, final NamespaceID namespaceID) {
		final RegisterToPublicContractOfNamespaceResponse response;
		final RegisterToPublicContractOfNamespaceRequest request = RegisterToPublicContractOfNamespaceRequest
<span class="nc" id="L1111">				.newBuilder().setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1112">				.setNamespaceID(Utils.getMsgID(namespaceID)).build();</span>
<span class="nc" id="L1113">		final Function&lt;RegisterToPublicContractOfNamespaceRequest, RegisterToPublicContractOfNamespaceResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1114">				.registerToPublicContractOfNamespace(req);</span>
<span class="nc" id="L1115">		response = this</span>
<span class="nc" id="L1116">				.&lt;RegisterToPublicContractOfNamespaceRequest, RegisterToPublicContractOfNamespaceResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1118">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1119">		return Utils.getID(response.getContractID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getContractIDsOfApplicant(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Map&lt;ContractID, Contract&gt; getContractIDsOfApplicant(final AccountID applicantAccountID,
			final PasswordCredential credential) {
<span class="nc" id="L1131">		final GetContractIDsOfApplicantRequest request = GetContractIDsOfApplicantRequest.newBuilder()</span>
<span class="nc" id="L1132">				.setApplicantID(Utils.getMsgID(applicantAccountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1133">				.build();</span>
		final GetContractIDsOfApplicantResponse response;
<span class="nc" id="L1135">		final Function&lt;GetContractIDsOfApplicantRequest, GetContractIDsOfApplicantResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1136">				.getContractIDsOfApplicant(req);</span>
<span class="nc" id="L1137">		response = this.&lt;GetContractIDsOfApplicantRequest, GetContractIDsOfApplicantResponse&gt;callLogicModule(request,</span>
				f);
<span class="nc" id="L1139">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1141">		final Map&lt;ContractID, Contract&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1142" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getContractsMap().entrySet()) {</span>
<span class="nc" id="L1143">			result.put(Utils.getContractIDFromUUID(entry.getKey()),</span>
<span class="nc" id="L1144">					(Contract) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1145">		}</span>
<span class="nc" id="L1146">		return result;</span>

	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getContractIDsOfProvider(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.NamespaceID)
	 */
	@Override
	public Map&lt;ContractID, Contract&gt; getContractIDsOfProvider(final AccountID accountID,
			final PasswordCredential credential, final NamespaceID namespaceIDofProvider) {
<span class="nc" id="L1160">		final GetContractIDsOfProviderRequest request = GetContractIDsOfProviderRequest.newBuilder()</span>
<span class="nc" id="L1161">				.setProviderID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1162">				.setNamespaceIDOfProvider(Utils.getMsgID(namespaceIDofProvider)).build();</span>
		final GetContractIDsOfProviderResponse response;
<span class="nc" id="L1164">		final Function&lt;GetContractIDsOfProviderRequest, GetContractIDsOfProviderResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1165">				.getContractIDsOfProvider(req);</span>
<span class="nc" id="L1166">		response = this.&lt;GetContractIDsOfProviderRequest, GetContractIDsOfProviderResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1167">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1169">		final Map&lt;ContractID, Contract&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1170" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getContractsMap().entrySet()) {</span>
<span class="nc" id="L1171">			result.put(Utils.getContractIDFromUUID(entry.getKey()),</span>
<span class="nc" id="L1172">					(Contract) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1173">		}</span>
<span class="nc" id="L1174">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getContractIDsOfApplicantWithProvider(dataClay.util.
	 * ids.AccountID, util.management.accountmgr.Credential, util.ids.NamespaceID)
	 */
	@Override
	public Map&lt;ContractID, Contract&gt; getContractIDsOfApplicantWithProvider(final AccountID applicantAccountID,
			final PasswordCredential credential, final NamespaceID namespaceIDofProvider) {
<span class="nc" id="L1187">		final GetContractsOfApplicantWithProvRequest request = GetContractsOfApplicantWithProvRequest.newBuilder()</span>
<span class="nc" id="L1188">				.setApplicantID(Utils.getMsgID(applicantAccountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1189">				.setNamespaceIDOfProvider(Utils.getMsgID(namespaceIDofProvider)).build();</span>
		final GetContractsOfApplicantWithProvResponse response;
<span class="nc" id="L1191">		final Function&lt;GetContractsOfApplicantWithProvRequest, GetContractsOfApplicantWithProvResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1192">				.getContractIDsOfApplicantWithProvider(req);</span>
<span class="nc" id="L1193">		response = this</span>
<span class="nc" id="L1194">				.&lt;GetContractsOfApplicantWithProvRequest, GetContractsOfApplicantWithProvResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1196">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1198">		final Map&lt;ContractID, Contract&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1199" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getContractsMap().entrySet()) {</span>
<span class="nc" id="L1200">			result.put(Utils.getContractIDFromUUID(entry.getKey()),</span>
<span class="nc" id="L1201">					(Contract) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1202">		}</span>
<span class="nc" id="L1203">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newDataContract(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.datacontractmgr.DataContract)
	 */
	@Override
	public DataContractID newDataContract(final AccountID accountID, final PasswordCredential credential,
			final DataContract newDataContract) {
<span class="nc" id="L1216">		final String yaml = CommonYAML.getYamlObject().dump(newDataContract);</span>
<span class="nc" id="L1217">		final NewDataContractRequest request = NewDataContractRequest.newBuilder()</span>
<span class="nc" id="L1218">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1219">				.setDataContractYaml(yaml).build();</span>

		final NewDataContractResponse response;
<span class="nc" id="L1222">		final Function&lt;NewDataContractRequest, NewDataContractResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1223">				.newDataContract(req);</span>
<span class="nc" id="L1224">		response = this.&lt;NewDataContractRequest, NewDataContractResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1225">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1226">		return Utils.getID(response.getDataContractID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#registerToPublicDataContract(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.DataContractID)
	 */
	@Override
	public void registerToPublicDataContract(final AccountID accountID, final PasswordCredential credential,
			final DataContractID datacontractID) {
<span class="nc" id="L1239">		final RegisterToPublicDataContractRequest request = RegisterToPublicDataContractRequest.newBuilder()</span>
<span class="nc" id="L1240">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1241">				.setDataContractID(Utils.getMsgID(datacontractID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1243">		final Function&lt;RegisterToPublicDataContractRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1244">				.registerToPublicDataContract(req);</span>
<span class="nc" id="L1245">		response = this.&lt;RegisterToPublicDataContractRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1246">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1247">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getDataContractIDsOfProvider(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.DataSetID)
	 */
	@Override
	public Map&lt;DataContractID, DataContract&gt; getDataContractIDsOfProvider(final AccountID accountID,
			final PasswordCredential credential, final DataSetID datasetIDofProvider) {
<span class="nc" id="L1259">		final GetDataContractIDsOfProviderRequest request = GetDataContractIDsOfProviderRequest.newBuilder()</span>
<span class="nc" id="L1260">				.setProviderID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1261">				.setDataSetIDOfProvider(Utils.getMsgID(datasetIDofProvider)).build();</span>
		final GetDataContractIDsOfProviderResponse response;
<span class="nc" id="L1263">		final Function&lt;GetDataContractIDsOfProviderRequest, GetDataContractIDsOfProviderResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1264">				.getDataContractIDsOfProvider(req);</span>
<span class="nc" id="L1265">		response = this</span>
<span class="nc" id="L1266">				.&lt;GetDataContractIDsOfProviderRequest, GetDataContractIDsOfProviderResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1267">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1269">		final Map&lt;DataContractID, DataContract&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1270" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getDatacontractsMap().entrySet()) {</span>
<span class="nc" id="L1271">			result.put(Utils.getDataContractIDFromUUID(entry.getKey()),</span>
<span class="nc" id="L1272">					(DataContract) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1273">		}</span>
<span class="nc" id="L1274">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getDataContractIDsOfApplicant(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Map&lt;DataContractID, DataContract&gt; getDataContractIDsOfApplicant(final AccountID applicantAccountID,
			final PasswordCredential credential) {
<span class="nc" id="L1287">		final GetDataContractIDsOfApplicantRequest request = GetDataContractIDsOfApplicantRequest.newBuilder()</span>
<span class="nc" id="L1288">				.setApplicantID(Utils.getMsgID(applicantAccountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1289">				.build();</span>
		final GetDataContractIDsOfApplicantResponse response;
<span class="nc" id="L1291">		final Function&lt;GetDataContractIDsOfApplicantRequest, GetDataContractIDsOfApplicantResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1292">				.getDataContractIDsOfApplicant(req);</span>
<span class="nc" id="L1293">		response = this.&lt;GetDataContractIDsOfApplicantRequest, GetDataContractIDsOfApplicantResponse&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L1295">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1297">		final Map&lt;DataContractID, DataContract&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1298" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getDatacontractsMap().entrySet()) {</span>
<span class="nc" id="L1299">			result.put(Utils.getDataContractIDFromUUID(entry.getKey()),</span>
<span class="nc" id="L1300">					(DataContract) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1301">		}</span>
<span class="nc" id="L1302">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getDataContractInfoOfApplicantWithProvider(dataClay.
	 * util.ids.AccountID, util.management.accountmgr.Credential,
	 * util.ids.DataSetID)
	 */
	@Override
	public DataContract getDataContractInfoOfApplicantWithProvider(final AccountID applicantAccountID,
			final PasswordCredential credential, final DataSetID datasetIDofProvider) {
		final GetDataContractInfoOfApplicantWithProvRequest request = GetDataContractInfoOfApplicantWithProvRequest
<span class="nc" id="L1317">				.newBuilder().setApplicantID(Utils.getMsgID(applicantAccountID))</span>
<span class="nc" id="L1318">				.setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1319">				.setDataSetIDOfProvider(Utils.getMsgID(datasetIDofProvider)).build();</span>
		final GetDataContractInfoOfApplicantWithProvResponse response;
<span class="nc" id="L1321">		final Function&lt;GetDataContractInfoOfApplicantWithProvRequest, GetDataContractInfoOfApplicantWithProvResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1322">				.getDataContractInfoOfApplicantWithProvider(req);</span>
<span class="nc" id="L1323">		response = this</span>
<span class="nc" id="L1324">				.&lt;GetDataContractInfoOfApplicantWithProvRequest, GetDataContractInfoOfApplicantWithProvResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1326">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1328">		return (DataContract) CommonYAML.getYamlObject().load(response.getDataContractInfo());</span>

	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newInterface(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.interfacemgr.Interface)
	 */
	@Override
	public InterfaceID newInterface(final AccountID accountID, final PasswordCredential credential,
			final Interface newInterface) {
<span class="nc" id="L1342">		final String yaml = CommonYAML.getYamlObject().dump(newInterface);</span>
<span class="nc" id="L1343">		final NewInterfaceRequest request = NewInterfaceRequest.newBuilder().setApplicantID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L1344">				.setCredential(Utils.getCredential(credential)).setInterfaceYaml(yaml).build();</span>

		final NewInterfaceResponse response;
<span class="nc" id="L1347">		final Function&lt;NewInterfaceRequest, NewInterfaceResponse&gt; f = req -&gt; getBlockingStub().newInterface(req);</span>
<span class="nc" id="L1348">		response = this.&lt;NewInterfaceRequest, NewInterfaceResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1349">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1350">		return Utils.getID(response.getInterfaceID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getInterfaceInfo(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.InterfaceID)
	 */
	@Override
	public Interface getInterfaceInfo(final AccountID accountID, final PasswordCredential credential,
			final InterfaceID interfaceID) {
<span class="nc" id="L1362">		final GetInterfaceInfoRequest request = GetInterfaceInfoRequest.newBuilder()</span>
<span class="nc" id="L1363">				.setApplicantID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1364">				.setInterfaceID(Utils.getMsgID(interfaceID)).build();</span>

		final GetInterfaceInfoResponse response;
<span class="nc" id="L1367">		final Function&lt;GetInterfaceInfoRequest, GetInterfaceInfoResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1368">				.getInterfaceInfo(req);</span>
<span class="nc" id="L1369">		response = this.&lt;GetInterfaceInfoRequest, GetInterfaceInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1370">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1371">		return (Interface) CommonYAML.getYamlObject().load(response.getInterfaceYaml());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#removeInterface(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * util.ids.InterfaceID)
	 */
	@Override
	public void removeInterface(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final InterfaceID interfaceID) {
<span class="nc" id="L1384">		final RemoveInterfaceRequest request = RemoveInterfaceRequest.newBuilder()</span>
<span class="nc" id="L1385">				.setApplicantID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1386">				.setNamespaceID(Utils.getMsgID(namespaceID)).setInterfaceID(Utils.getMsgID(interfaceID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1388">		final Function&lt;RemoveInterfaceRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().removeInterface(req);</span>
<span class="nc" id="L1389">		response = this.&lt;RemoveInterfaceRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1390">		Utils.checkIsExc(response);</span>

<span class="nc" id="L1392">	}</span>



	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getStorageLocationForDS(dataClay.util.ids.
	 * StorageLocationID)
	 */
	@Override
	public StorageLocation getStorageLocationForDS(final StorageLocationID backendID) {
<span class="nc" id="L1404">		final GetStorageLocationForDSRequest request = GetStorageLocationForDSRequest.newBuilder()</span>
<span class="nc" id="L1405">				.setStorageLocationID(Utils.getMsgID(backendID)).build();</span>
		final GetStorageLocationForDSResponse response;
<span class="nc" id="L1407">		final Function&lt;GetStorageLocationForDSRequest, GetStorageLocationForDSResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1408">				.getStorageLocationForDS(req);</span>
<span class="nc" id="L1409">		response = this.&lt;GetStorageLocationForDSRequest, GetStorageLocationForDSResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1410">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1411">		return (StorageLocation) CommonYAML.getYamlObject().load(response.getStorageLocationYaml());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getExecutionEnvironmentForDS(dataClay.util.ids.
	 * ExecutionEnvironmentID)
	 */
	@Override
	public ExecutionEnvironment getExecutionEnvironmentForDS(final ExecutionEnvironmentID backendID) {
<span class="nc" id="L1422">		final GetExecutionEnvironmentForDSRequest request = GetExecutionEnvironmentForDSRequest.newBuilder()</span>
<span class="nc" id="L1423">				.setExecEnvID(Utils.getMsgID(backendID)).build();</span>
		final GetExecutionEnvironmentForDSResponse response;
<span class="nc" id="L1425">		final Function&lt;GetExecutionEnvironmentForDSRequest, GetExecutionEnvironmentForDSResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1426">				.getExecutionEnvironmentForDS(req);</span>
<span class="nc" id="L1427">		response = this</span>
<span class="nc" id="L1428">				.&lt;GetExecutionEnvironmentForDSRequest, GetExecutionEnvironmentForDSResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1429">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1430">		return (ExecutionEnvironment) CommonYAML.getYamlObject().load(response.getExecEnvYaml());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getDataClayID()
	 */
	@Override
	public DataClayInstanceID getDataClayID() {
		final GetDataClayIDResponse response;
<span class="nc" id="L1441">		final Function&lt;EmptyMessage, GetDataClayIDResponse&gt; f = req -&gt; getBlockingStub().getDataClayID(req);</span>
<span class="nc" id="L1442">		response = this.&lt;EmptyMessage, GetDataClayIDResponse&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L1443">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1444">		return Utils.getID(response.getDataClayID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getExternalDataClayInfo(dataClay.util.ids.
	 * DataClayInstanceID)
	 */
	@Override
	public DataClayInstance getExternalDataClayInfo(final DataClayInstanceID extDataClayID) {
<span class="nc" id="L1455">		final GetExtDataClayInfoRequest request = GetExtDataClayInfoRequest.newBuilder()</span>
<span class="nc" id="L1456">				.setExtDataClayID(Utils.getMsgID(extDataClayID)).build();</span>
		final GetExtDataClayInfoResponse response;
<span class="nc" id="L1458">		final Function&lt;GetExtDataClayInfoRequest, GetExtDataClayInfoResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1459">				.getExternalDataClayInfo(req);</span>
<span class="nc" id="L1460">		response = this.&lt;GetExtDataClayInfoRequest, GetExtDataClayInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1461">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1462">		return (DataClayInstance) CommonYAML.getYamlObject().load(response.getExtDataClayYaml());</span>
	}

	@Override
	public DataClayInstanceID getExternalDataClayID(final String dcHost, final int dcPort) {
<span class="nc" id="L1467">		final GetExternalDataclayIDRequest request = GetExternalDataclayIDRequest.newBuilder().setHost(dcHost)</span>
<span class="nc" id="L1468">				.setPort(dcPort).build();</span>
		final GetExternalDataclayIDResponse response;
<span class="nc" id="L1470">		final Function&lt;GetExternalDataclayIDRequest, GetExternalDataclayIDResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1471">				.getExternalDataclayId(req);</span>
<span class="nc" id="L1472">		response = this.&lt;GetExternalDataclayIDRequest, GetExternalDataclayIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1473">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1474">		return Utils.getID(response.getExtDataClayID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#registerExternalDataClay(dataClay.util.ids.
	 * DataClayInstanceID String, String, int)
	 */
	@Override
	public DataClayInstanceID registerExternalDataClay(final String hostname, final int port) {
<span class="nc" id="L1485">		final RegisterExternalDataClayRequest request = RegisterExternalDataClayRequest.newBuilder()</span>
<span class="nc" id="L1486">				.setHostname(hostname).setPort(port).build();</span>
		final RegisterExternalDataClayResponse response;
<span class="nc" id="L1488">		final Function&lt;RegisterExternalDataClayRequest, RegisterExternalDataClayResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1489">				.registerExternalDataClay(req);</span>
<span class="nc" id="L1490">		response = this.&lt;RegisterExternalDataClayRequest, RegisterExternalDataClayResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1491">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1492">		return Utils.getID(response.getExtDataClayID());</span>
	}

	@Override
	public DataClayInstanceID registerExternalDataClayOverrideAuthority(final AccountID adminAccountID, final PasswordCredential adminCredential,
			final String hostname, final int port, final String authority) {
<span class="nc" id="L1498">		final RegisterExternalDataClayOverrideAuthorityRequest request = RegisterExternalDataClayOverrideAuthorityRequest.newBuilder()</span>
<span class="nc" id="L1499">				.setAdminAccountID(Utils.getMsgID(adminAccountID)).setAdminCredential(Utils.getCredential(adminCredential))</span>
<span class="nc" id="L1500">				.setHostname(hostname).setPort(port).setAuthority(authority).build();</span>
		final RegisterExternalDataClayResponse response;
<span class="nc" id="L1502">		final Function&lt;RegisterExternalDataClayOverrideAuthorityRequest, RegisterExternalDataClayResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1503">				.registerExternalDataClayOverrideAuthority(req);</span>
<span class="nc" id="L1504">		response = this.&lt;RegisterExternalDataClayOverrideAuthorityRequest, RegisterExternalDataClayResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1505">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1506">		return Utils.getID(response.getExtDataClayID());</span>
	}
	
	@Override
	public DataClayInstanceID notifyRegistrationOfExternalDataClay(final DataClayInstanceID dataClayInstanceID,
			final String hostname, final int port) {
		final NotifyRegistrationOfExternalDataClayRequest request = NotifyRegistrationOfExternalDataClayRequest
<span class="nc" id="L1513">				.newBuilder().setExtDataClayID(Utils.getMsgID(dataClayInstanceID)).setHostname(hostname).setPort(port)</span>
<span class="nc" id="L1514">				.build();</span>
		final NotifyRegistrationOfExternalDataClayResponse response;
<span class="nc" id="L1516">		final Function&lt;NotifyRegistrationOfExternalDataClayRequest, NotifyRegistrationOfExternalDataClayResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1517">				.notifyRegistrationOfExternalDataClay(req);</span>
<span class="nc" id="L1518">		response = this</span>
<span class="nc" id="L1519">				.&lt;NotifyRegistrationOfExternalDataClayRequest, NotifyRegistrationOfExternalDataClayResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1521">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1522">		return Utils.getID(response.getExtDataClayID());</span>
	}

	@Override
	public void federateObject(final SessionID sessionID, final ObjectID objectID,
			final DataClayInstanceID extDataClayID, final boolean recursive) {
<span class="nc" id="L1528">		final FederateObjectRequest request = FederateObjectRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1529">				.setObjectID(Utils.getMsgID(objectID)).setExtDataClayID(Utils.getMsgID(extDataClayID))</span>
<span class="nc" id="L1530">				.setRecursive(recursive).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1532">		final Function&lt;FederateObjectRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().federateObject(req);</span>
<span class="nc" id="L1533">		response = this.&lt;FederateObjectRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1534">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1535">	}</span>

	@Override
	public void unfederateObject(final SessionID sessionID, final ObjectID objectID,
			final DataClayInstanceID extDataClayID, final boolean recursive) {
<span class="nc" id="L1540">		final UnfederateObjectRequest request = UnfederateObjectRequest.newBuilder()</span>
<span class="nc" id="L1541">				.setSessionID(Utils.getMsgID(sessionID)).setObjectID(Utils.getMsgID(objectID))</span>
<span class="nc" id="L1542">				.setExtDataClayID(Utils.getMsgID(extDataClayID)).setRecursive(recursive).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1544">		final Function&lt;UnfederateObjectRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().unfederateObject(req);</span>
<span class="nc" id="L1545">		response = this.&lt;UnfederateObjectRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1546">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1547">	}</span>
	
	@Override
	public void unfederateObjectWithAllDCs(final SessionID sessionID, final ObjectID objectID,
			final boolean recursive) {
<span class="nc" id="L1552">		final UnfederateObjectWithAllDCsRequest request = UnfederateObjectWithAllDCsRequest.newBuilder()</span>
<span class="nc" id="L1553">				.setSessionID(Utils.getMsgID(sessionID)).setObjectID(Utils.getMsgID(objectID))</span>
<span class="nc" id="L1554">				.setRecursive(recursive).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1556">		final Function&lt;UnfederateObjectWithAllDCsRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().unfederateObjectWithAllDCs(req);</span>
<span class="nc" id="L1557">		response = this.&lt;UnfederateObjectWithAllDCsRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1558">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1559">	}</span>
	
	
	@Override
	public void federateAllObjects(final SessionID sessionID,
			final DataClayInstanceID externalDestinationDataClayID) {
<span class="nc" id="L1565">		final FederateAllObjectsRequest request = FederateAllObjectsRequest.newBuilder()</span>
<span class="nc" id="L1566">				.setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1567">				.setExternalDestinationDataClayID(Utils.getMsgID(externalDestinationDataClayID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1569">		final Function&lt;FederateAllObjectsRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().federateAllObjects(req);</span>
<span class="nc" id="L1570">		response = this.&lt;FederateAllObjectsRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1571">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1572">	}</span>
	
	@Override
	public void migrateFederatedObjects(final SessionID sessionID,
			final DataClayInstanceID externalOriginDataClayID, 
			final DataClayInstanceID externalDestinationDataClayID) {
<span class="nc" id="L1578">		final MigrateFederatedObjectsRequest request = MigrateFederatedObjectsRequest.newBuilder()</span>
<span class="nc" id="L1579">				.setSessionID(Utils.getMsgID(sessionID)).setExternalOriginDataClayID(Utils.getMsgID(externalOriginDataClayID))</span>
<span class="nc" id="L1580">				.setExternalDestinationDataClayID(Utils.getMsgID(externalDestinationDataClayID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1582">		final Function&lt;MigrateFederatedObjectsRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().migrateFederatedObjects(req);</span>
<span class="nc" id="L1583">		response = this.&lt;MigrateFederatedObjectsRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1584">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1585">	}</span>
	
	
	@Override
	public void unfederateAllObjects(final SessionID sessionID, 
			final DataClayInstanceID extDataClayID) {
<span class="nc" id="L1591">		final UnfederateAllObjectsRequest request = UnfederateAllObjectsRequest.newBuilder()</span>
<span class="nc" id="L1592">				.setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1593">				.setExtDataClayID(Utils.getMsgID(extDataClayID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1595">		final Function&lt;UnfederateAllObjectsRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().unfederateAllObjects(req);</span>
<span class="nc" id="L1596">		response = this.&lt;UnfederateAllObjectsRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1597">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1598">	}</span>

	@Override
	public void unfederateAllObjectsWithAllDCs(final SessionID sessionID) {
<span class="nc" id="L1602">		final UnfederateAllObjectsWithAllDCsRequest request = UnfederateAllObjectsWithAllDCsRequest.newBuilder()</span>
<span class="nc" id="L1603">				.setSessionID(Utils.getMsgID(sessionID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1605">		final Function&lt;UnfederateAllObjectsWithAllDCsRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().unfederateAllObjectsWithAllDCs(req);</span>
<span class="nc" id="L1606">		response = this.&lt;UnfederateAllObjectsWithAllDCsRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1607">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1608">	}</span>
	
	@Override
	public void notifyFederatedObjects(final DataClayInstanceID srcDataClayID, final String srcDcHost,
			final int srcDcPort, final Map&lt;ObjectID, MetaDataInfo&gt; objectsInfo, 
			final Map&lt;Langs, SerializedParametersOrReturn&gt; federatedObjects) {
<span class="nc" id="L1614">		final NotifyFederatedObjectsRequest.Builder requestBuilder = NotifyFederatedObjectsRequest.newBuilder();</span>

<span class="nc bnc" id="L1616" title="All 2 branches missed.">		for (final Entry&lt;ObjectID, MetaDataInfo&gt; entry : objectsInfo.entrySet()) {</span>
<span class="nc" id="L1617">			final String objectInfo = CommonYAML.getYamlObject().dump(entry.getValue());</span>
<span class="nc" id="L1618">			requestBuilder.putObjectsInfo(entry.getKey().toString(), objectInfo);</span>
<span class="nc" id="L1619">		}</span>
<span class="nc bnc" id="L1620" title="All 2 branches missed.">		for (final Entry&lt;Langs, SerializedParametersOrReturn&gt; entry : federatedObjects.entrySet()) {</span>
<span class="nc" id="L1621">			final String langStr = entry.getKey().name();</span>
<span class="nc" id="L1622">			requestBuilder.putFederatedObjects(langStr, Utils.getParamsOrReturn(entry.getValue()));</span>
<span class="nc" id="L1623">		}</span>
		
<span class="nc" id="L1625">		final NotifyFederatedObjectsRequest request = requestBuilder.setSrcDcID(Utils.getMsgID(srcDataClayID))</span>
<span class="nc" id="L1626">				.setSrcDcHost(srcDcHost).setSrcDcPort(srcDcPort).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1628">		final Function&lt;NotifyFederatedObjectsRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1629">				.notifyFederatedObjects(req);</span>
<span class="nc" id="L1630">		response = this.&lt;NotifyFederatedObjectsRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1631">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1632">	}</span>

	@Override
	public void notifyUnfederatedObjects(final DataClayInstanceID srcDataClayID, final Set&lt;ObjectID&gt; objectIDs) {
<span class="nc" id="L1636">		final NotifyUnfederatedObjectsRequest.Builder requestBuilder = NotifyUnfederatedObjectsRequest.newBuilder();</span>

<span class="nc bnc" id="L1638" title="All 2 branches missed.">		for (final ObjectID oid : objectIDs) {</span>
<span class="nc" id="L1639">			requestBuilder.addObjectsIDs(Utils.getMsgID(oid));</span>
<span class="nc" id="L1640">		}</span>

<span class="nc" id="L1642">		final NotifyUnfederatedObjectsRequest request = requestBuilder.setSrcDcID(Utils.getMsgID(srcDataClayID))</span>
<span class="nc" id="L1643">				.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1645">		final Function&lt;NotifyUnfederatedObjectsRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1646">				.notifyUnfederatedObjects(req);</span>
<span class="nc" id="L1647">		response = this.&lt;NotifyUnfederatedObjectsRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1648">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1649">	}</span>


	@Override
	public boolean checkObjectIsFederatedWithDataClayInstance(final ObjectID objectID,
			final DataClayInstanceID extDataClayID) {
		final CheckObjectFederatedWithDataClayInstanceRequest request = CheckObjectFederatedWithDataClayInstanceRequest
<span class="nc" id="L1656">				.newBuilder().setObjectID(Utils.getMsgID(objectID)).setExtDataClayID(Utils.getMsgID(extDataClayID))</span>
<span class="nc" id="L1657">				.build();</span>
		final CheckObjectFederatedWithDataClayInstanceResponse response;
<span class="nc" id="L1659">		final Function&lt;CheckObjectFederatedWithDataClayInstanceRequest, CheckObjectFederatedWithDataClayInstanceResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1660">				.checkObjectIsFederatedWithDataClayInstance(req);</span>
<span class="nc" id="L1661">		response = this</span>
<span class="nc" id="L1662">				.&lt;CheckObjectFederatedWithDataClayInstanceRequest, CheckObjectFederatedWithDataClayInstanceResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1664">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1665">		return response.getIsFederated();</span>
	}
	
	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getFederationOfObject(dataClay.util.ids.ObjectID)
	 */
	@Override
	public Set&lt;DataClayInstanceID&gt; getDataClaysObjectIsFederatedWith(final ObjectID objectID) {
<span class="nc" id="L1676">		final GetDataClaysObjectIsFederatedWithRequest request = GetDataClaysObjectIsFederatedWithRequest.newBuilder()</span>
<span class="nc" id="L1677">				.setObjectID(Utils.getMsgID(objectID)).build();</span>
		final GetDataClaysObjectIsFederatedWithResponse response;
<span class="nc" id="L1679">		final Function&lt;GetDataClaysObjectIsFederatedWithRequest, GetDataClaysObjectIsFederatedWithResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1680">				.getDataClaysObjectIsFederatedWith(req);</span>
<span class="nc" id="L1681">		response = this.&lt;GetDataClaysObjectIsFederatedWithRequest, GetDataClaysObjectIsFederatedWithResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1682">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1683">		final Set&lt;DataClayInstanceID&gt; result = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L1684" title="All 2 branches missed.">		for (final  es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.DataClayInstanceID curInstanceID : response.getExtDataClayIDsList()) {</span>
<span class="nc" id="L1685">			result.add(Utils.getID(curInstanceID));</span>
<span class="nc" id="L1686">		}</span>
<span class="nc" id="L1687">		return result;</span>
	}
	
	@Override
	public DataClayInstanceID getExternalSourceDataClayOfObject(final ObjectID objectID) {
<span class="nc" id="L1692">		final GetExternalSourceDataClayOfObjectRequest request = GetExternalSourceDataClayOfObjectRequest.newBuilder()</span>
<span class="nc" id="L1693">				.setObjectID(Utils.getMsgID(objectID)).build();</span>
		final GetExternalSourceDataClayOfObjectResponse response;
<span class="nc" id="L1695">		final Function&lt;GetExternalSourceDataClayOfObjectRequest, GetExternalSourceDataClayOfObjectResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1696">				.getExternalSourceDataClayOfObject(req);</span>
<span class="nc" id="L1697">		response = this.&lt;GetExternalSourceDataClayOfObjectRequest, GetExternalSourceDataClayOfObjectResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1698">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1699">		return Utils.getID(response.getExtDataClayID());</span>
	}

	@Override
	public void registerObjectFromGC(final RegistrationInfo regInfo, final ExecutionEnvironmentID backendID,
			final DataServiceRuntime clientLib) {

<span class="nc" id="L1706">		final RegisterObjectForGCRequest.Builder builder = RegisterObjectForGCRequest.newBuilder();</span>

<span class="nc" id="L1708">		final CommonMessages.RegistrationInfo.Builder regInfoBuilder = CommonMessages.RegistrationInfo.newBuilder();</span>
<span class="nc" id="L1709">		regInfoBuilder.setObjectID(Utils.getMsgID(regInfo.getObjectID()));</span>
<span class="nc" id="L1710">		regInfoBuilder.setClassID(Utils.getMsgID(regInfo.getClassID()));</span>
<span class="nc" id="L1711">		regInfoBuilder.setSessionID(Utils.getMsgID(regInfo.getStoreSessionID()));</span>
<span class="nc" id="L1712">		regInfoBuilder.setDataSetID(Utils.getMsgID(regInfo.getDataSetID()));</span>

<span class="nc" id="L1714">		builder.setBackendID(Utils.getMsgID(backendID));</span>
<span class="nc" id="L1715">		builder.setRegInfo(regInfoBuilder.build());</span>
<span class="nc" id="L1716">		final RegisterObjectForGCRequest request = builder.build();</span>
<span class="nc" id="L1717">		final StreamObserver&lt;ExceptionInfo&gt; responseObserver = new StreamObserver&lt;ExceptionInfo&gt;() {</span>
			@Override
			public void onNext(final ExceptionInfo summary) {
				// do nothing
<span class="nc" id="L1721">			}</span>

			@Override
			public void onError(final Throwable t) {
<span class="nc" id="L1725">				logger.debug(&quot;responseObserver for registerObjectsFromDSGarbageCollector got an error&quot;, t);</span>
<span class="nc" id="L1726">			}</span>

			@Override
			public void onCompleted() {
<span class="nc bnc" id="L1730" title="All 2 branches missed.">				if (DEBUG_ENABLED) {</span>
<span class="nc" id="L1731">					logger.debug(&quot;[==Communication==] Asynchronous register object finished for object: {}&quot;,</span>
<span class="nc" id="L1732">							regInfo.getObjectID());</span>
				}
<span class="nc" id="L1734">				asyncReqReceived.incrementAndGet();</span>
<span class="nc" id="L1735">			}</span>
		};
<span class="nc bnc" id="L1737" title="All 2 branches missed.">		if (DEBUG_ENABLED) {</span>
<span class="nc" id="L1738">			logger.debug(&quot;[==Communication==] Asynchronous call to register object from Garbage Collector. &quot;</span>
<span class="nc" id="L1739">					+ &quot;Object: &quot; + regInfo.getObjectID());</span>
		}
<span class="nc" id="L1741">		final BiConsumer&lt;RegisterObjectForGCRequest, StreamObserver&lt;ExceptionInfo&gt;&gt; f = (req, obs) -&gt; getAsyncStub()</span>
<span class="nc" id="L1742">				.registerObjectFromGC(req, obs);</span>
<span class="nc" id="L1743">		this.&lt;RegisterObjectForGCRequest, ExceptionInfo&gt;callLogicModuleAsync(request, responseObserver, f);</span>
<span class="nc" id="L1744">	}</span>

	@Override
	public ObjectID registerObject(final RegistrationInfo regInfo, final ExecutionEnvironmentID backendID,
			final String alias, final Langs lang) {

<span class="nc" id="L1750">		final RegisterObjectRequest.Builder builder = RegisterObjectRequest.newBuilder();</span>

<span class="nc" id="L1752">		final CommonMessages.RegistrationInfo.Builder regInfoBuilder = CommonMessages.RegistrationInfo.newBuilder();</span>
<span class="nc" id="L1753">		regInfoBuilder.setObjectID(Utils.getMsgID(regInfo.getObjectID()));</span>
<span class="nc" id="L1754">		regInfoBuilder.setClassID(Utils.getMsgID(regInfo.getClassID()));</span>
<span class="nc" id="L1755">		regInfoBuilder.setSessionID(Utils.getMsgID(regInfo.getStoreSessionID()));</span>
<span class="nc" id="L1756">		regInfoBuilder.setDataSetID(Utils.getMsgID(regInfo.getDataSetID()));</span>
<span class="nc" id="L1757">		builder.setRegInfo(regInfoBuilder.build());</span>

<span class="nc bnc" id="L1759" title="All 2 branches missed.">		if (alias != null) {</span>
<span class="nc" id="L1760">			builder.setAlias(alias);</span>
		}

<span class="nc" id="L1763">		builder.setBackendID(Utils.getMsgID(backendID));</span>
<span class="nc" id="L1764">		builder.setLang(lang);</span>

<span class="nc" id="L1766">		final RegisterObjectRequest request = builder.build();</span>
		final RegisterObjectResponse response;
<span class="nc" id="L1768">		final Function&lt;RegisterObjectRequest, RegisterObjectResponse &gt; f = req -&gt; getBlockingStub().registerObject(req);</span>
<span class="nc" id="L1769">		response = this.&lt;RegisterObjectRequest, RegisterObjectResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1770">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1772">		return Utils.getID(response.getObjectID());</span>
	}

	@Override
	public void setDataSetIDFromGarbageCollector(final ObjectID objectID, final DataSetID dataSetID) {
<span class="nc" id="L1777">		final SetDataSetIDFromGarbageCollectorRequest request = SetDataSetIDFromGarbageCollectorRequest.newBuilder()</span>
<span class="nc" id="L1778">				.setObjectID(Utils.getMsgID(objectID)).setDatasetID(Utils.getMsgID(dataSetID)).build();</span>
<span class="nc" id="L1779">		final StreamObserver&lt;ExceptionInfo&gt; responseObserver = new StreamObserver&lt;ExceptionInfo&gt;() {</span>
			@Override
			public void onNext(final ExceptionInfo summary) {
				// do nothing
<span class="nc" id="L1783">			}</span>

			@Override
			public void onError(final Throwable t) {
<span class="nc" id="L1787">				logger.debug(&quot;responseObserver for setDataSetIDFromGarbageCollector got an error&quot;, t);</span>
<span class="nc" id="L1788">			}</span>

			@Override
			public void onCompleted() {
<span class="nc" id="L1792">				asyncReqReceived.incrementAndGet();</span>
<span class="nc" id="L1793">			}</span>
		};

<span class="nc" id="L1796">		final BiConsumer&lt;SetDataSetIDFromGarbageCollectorRequest, StreamObserver&lt;ExceptionInfo&gt;&gt; f = (req,</span>
<span class="nc" id="L1797">				obs) -&gt; getAsyncStub().setDataSetIDFromGarbageCollector(req, obs);</span>
<span class="nc" id="L1798">		this.&lt;SetDataSetIDFromGarbageCollectorRequest, ExceptionInfo&gt;callLogicModuleAsync(request, responseObserver, f);</span>
<span class="nc" id="L1799">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getExecutionEnvironmentsInfo(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Map&lt;ExecutionEnvironmentID, ExecutionEnvironment&gt; getExecutionEnvironmentsInfo(final SessionID sessionID,
			final Langs execEnvLang, final boolean fromClient) {
<span class="nc" id="L1810">		final GetExecutionEnvironmentsInfoRequest request = GetExecutionEnvironmentsInfoRequest.newBuilder()</span>
<span class="nc" id="L1811">				.setSessionID(Utils.getMsgID(sessionID)).setExecEnvLang(execEnvLang)</span>
<span class="nc" id="L1812">				.setFromClient(fromClient).build();</span>
		final GetExecutionEnvironmentsInfoResponse response;
<span class="nc" id="L1814">		final Function&lt;GetExecutionEnvironmentsInfoRequest, GetExecutionEnvironmentsInfoResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1815">				.getExecutionEnvironmentsInfo(req);</span>
<span class="nc" id="L1816">		response = this</span>
<span class="nc" id="L1817">				.&lt;GetExecutionEnvironmentsInfoRequest, GetExecutionEnvironmentsInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1818">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1820">		final Map&lt;ExecutionEnvironmentID, ExecutionEnvironment&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1821" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getExecEnvsMap().entrySet()) {</span>
<span class="nc" id="L1822">			result.put(Utils.getExecutionEnvironmentIDFromUUID(entry.getKey()),</span>
<span class="nc" id="L1823">					(ExecutionEnvironment) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1824">		}</span>
<span class="nc" id="L1825">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getExecutionEnvironmentsNames(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Set&lt;String&gt; getExecutionEnvironmentsNames(final AccountID accountID, final PasswordCredential credential,
			final Langs execEnvLang) {
<span class="nc" id="L1838">		final GetExecutionEnvironmentsNamesRequest request = GetExecutionEnvironmentsNamesRequest.newBuilder()</span>
<span class="nc" id="L1839">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1840">				.setExecEnvLang(execEnvLang).build();</span>
		final GetExecutionEnvironmentsNamesResponse response;
<span class="nc" id="L1842">		final Function&lt;GetExecutionEnvironmentsNamesRequest, GetExecutionEnvironmentsNamesResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1843">				.getExecutionEnvironmentsNames(req);</span>
<span class="nc" id="L1844">		response = this.&lt;GetExecutionEnvironmentsNamesRequest, GetExecutionEnvironmentsNamesResponse&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L1846">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1848">		final Set&lt;String&gt; result = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L1849" title="All 2 branches missed.">		for (final String id : response.getExecEnvsList()) {</span>
<span class="nc" id="L1850">			result.add(id);</span>
<span class="nc" id="L1851">		}</span>
<span class="nc" id="L1852">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getStorageLocationsPerExecutionEnvironments(dataClay
	 * .util.ids.sessionID, dataClay.util.ids.ObjectID, dataClay.util.ids.DataSetID)
	 */
	@Override
	public void setDataSetID(final SessionID sessionID, final ObjectID objectID, final DataSetID dataSetID) {
<span class="nc" id="L1864">		final SetDataSetIDRequest request = SetDataSetIDRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1865">				.setObjectID(Utils.getMsgID(objectID)).setDatasetID(Utils.getMsgID(dataSetID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1867">		final Function&lt;SetDataSetIDRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().setDataSetID(req);</span>
<span class="nc" id="L1868">		response = this.&lt;SetDataSetIDRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1869">		Utils.checkIsExc(response);</span>

<span class="nc" id="L1871">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getObjectInfo(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID)
	 */
	@Override
	public Tuple&lt;String, String&gt; getObjectInfo(final SessionID sessionID, final ObjectID objectID) {
<span class="nc" id="L1881">		final GetObjectInfoRequest request = GetObjectInfoRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1882">				.setObjectID(Utils.getMsgID(objectID)).build();</span>
		final GetObjectInfoResponse response;
<span class="nc" id="L1884">		final Function&lt;GetObjectInfoRequest, GetObjectInfoResponse&gt; f = req -&gt; getBlockingStub().getObjectInfo(req);</span>
<span class="nc" id="L1885">		response = this.&lt;GetObjectInfoRequest, GetObjectInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1886">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1887">		return new Tuple&lt;&gt;(response.getClassname(), response.getNamespace());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getObjectIDfromAlias(dataClay.util.ids.SessionID,
	 * java.lang.String)
	 */
	@Override
	public Triple&lt;ObjectID, MetaClassID, ExecutionEnvironmentID&gt; getObjectFromAlias(final SessionID sessionID,
			final String alias) {
<span class="nc" id="L1900">		final GetObjectFromAliasRequest request = GetObjectFromAliasRequest.newBuilder()</span>
<span class="nc" id="L1901">				.setSessionID(Utils.getMsgID(sessionID)).setAlias(alias).build();</span>
		final GetObjectFromAliasResponse response;
<span class="nc" id="L1903">		final Function&lt;GetObjectFromAliasRequest, GetObjectFromAliasResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1904">				.getObjectFromAlias(req);</span>
<span class="nc" id="L1905">		response = this.&lt;GetObjectFromAliasRequest, GetObjectFromAliasResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1906">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1907">		return new Triple&lt;&gt;(Utils.getID(response.getObjectID()), Utils.getID(response.getClassID()),</span>
<span class="nc" id="L1908">				Utils.getID(response.getHint()));</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#deleteAlias(dataClay.util.ids.SessionID,
	 * util.ids.MetaClassID, java.lang.String)
	 */
	@Override
	public void deleteAlias(final SessionID sessionID, final String alias) {
<span class="nc" id="L1919">		final DeleteAliasRequest request = DeleteAliasRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1920">				.setAlias(alias).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1922">		final Function&lt;DeleteAliasRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().deleteAlias(req);</span>
<span class="nc" id="L1923">		response = this.&lt;DeleteAliasRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1924">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1925">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getObjectsMetaDataInfoOfClassForNM(dataClay.util.ids
	 * .MetaClassID)
	 */
	@Override
	public HashMap&lt;ObjectID, MetaDataInfo&gt; getObjectsMetaDataInfoOfClassForNM(final MetaClassID classID) {
<span class="nc" id="L1936">		final GetObjectsMetaDataInfoOfClassForNMRequest request = GetObjectsMetaDataInfoOfClassForNMRequest.newBuilder()</span>
<span class="nc" id="L1937">				.setClassID(Utils.getMsgID(classID)).build();</span>

		final GetObjectsMetaDataInfoOfClassForNMResponse response;
<span class="nc" id="L1940">		final Function&lt;GetObjectsMetaDataInfoOfClassForNMRequest, GetObjectsMetaDataInfoOfClassForNMResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1941">				.getObjectsMetaDataInfoOfClassForNM(req);</span>
<span class="nc" id="L1942">		response = this</span>
<span class="nc" id="L1943">				.&lt;GetObjectsMetaDataInfoOfClassForNMRequest, GetObjectsMetaDataInfoOfClassForNMResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1945">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1946">		final HashMap&lt;ObjectID, MetaDataInfo&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1947" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getMdataInfoMap().entrySet()) {</span>
<span class="nc" id="L1948">			result.put(Utils.getObjectIDFromUUID(entry.getKey()),</span>
<span class="nc" id="L1949">					(MetaDataInfo) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1950">		}</span>
<span class="nc" id="L1951">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newVersion(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID, util.ids.StorageLocationID)
	 */
	@Override
	public VersionInfo newVersion(final SessionID sessionID, final ObjectID objectID,
			final ExecutionEnvironmentID optionalDestBackendID) {
<span class="nc" id="L1963">		final NewVersionRequest request = NewVersionRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1964">				.setObjectID(Utils.getMsgID(objectID)).setOptDestBackendID(Utils.getMsgID(optionalDestBackendID))</span>
<span class="nc" id="L1965">				.build();</span>
		final NewVersionResponse response;
<span class="nc" id="L1967">		final Function&lt;NewVersionRequest, NewVersionResponse&gt; f = req -&gt; getBlockingStub().newVersion(req);</span>
<span class="nc" id="L1968">		response = this.&lt;NewVersionRequest, NewVersionResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1969">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1971">		return (VersionInfo) CommonYAML.getYamlObject().load(response.getVersionInfoYaml());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#consolidateVersion(dataClay.util.ids.SessionID,
	 * util.info.VersionInfo)
	 */
	@Override
	public void consolidateVersion(final SessionID sessionID, final VersionInfo version) {
<span class="nc" id="L1982">		final ConsolidateVersionRequest request = ConsolidateVersionRequest.newBuilder()</span>
<span class="nc" id="L1983">				.setSessionID(Utils.getMsgID(sessionID)).setVersionInfoYaml(CommonYAML.getYamlObject().dump(version))</span>
<span class="nc" id="L1984">				.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1986">		final Function&lt;ConsolidateVersionRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().consolidateVersion(req);</span>
<span class="nc" id="L1987">		response = this.&lt;ConsolidateVersionRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1988">		Utils.checkIsExc(response);</span>

<span class="nc" id="L1990">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newReplica(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID, util.ids.StorageLocationID)
	 */
	@Override
	public ExecutionEnvironmentID newReplica(final SessionID sessionID, final ObjectID objectID,
			final ExecutionEnvironmentID optionalDestBackendID, final boolean recursive) {
<span class="nc" id="L2001">		final NewReplicaRequest request = NewReplicaRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L2002">				.setObjectID(Utils.getMsgID(objectID)).setDestBackendID(Utils.getMsgID(optionalDestBackendID))</span>
<span class="nc" id="L2003">				.setRecursive(recursive).build();</span>
		final NewReplicaResponse response;
<span class="nc" id="L2005">		final Function&lt;NewReplicaRequest, NewReplicaResponse&gt; f = req -&gt; getBlockingStub().newReplica(req);</span>
<span class="nc" id="L2006">		response = this.&lt;NewReplicaRequest, NewReplicaResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2007">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L2009">		return Utils.getID(response.getDestBackendID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#moveObject(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID, util.ids.StorageLocationID, util.ids.StorageLocationID,
	 * boolean)
	 */
	@Override
	public List&lt;ObjectID&gt; moveObject(final SessionID sessionID, final ObjectID objectID,
			final ExecutionEnvironmentID srcBackendID, final ExecutionEnvironmentID destBackendID,
			final boolean recursive) {
<span class="nc" id="L2023">		final MoveObjectRequest request = MoveObjectRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L2024">				.setObjectID(Utils.getMsgID(objectID)).setSrcBackendID(Utils.getMsgID(srcBackendID))</span>
<span class="nc" id="L2025">				.setDestBackendID(Utils.getMsgID(destBackendID)).setRecursive(recursive).build();</span>
<span class="nc" id="L2026">		MoveObjectResponse response = null;</span>
<span class="nc" id="L2027">		final Function&lt;MoveObjectRequest, MoveObjectResponse&gt; f = req -&gt; getBlockingStub().moveObject(req);</span>
<span class="nc" id="L2028">		response = this.&lt;MoveObjectRequest, MoveObjectResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2029">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L2031">		final List&lt;ObjectID&gt; result = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L2032" title="All 2 branches missed.">		for (final es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.ObjectID curObjID : response</span>
<span class="nc" id="L2033">				.getObjectIDsList()) {</span>
<span class="nc" id="L2034">			result.add(Utils.getID(curObjID));</span>
<span class="nc" id="L2035">		}</span>
<span class="nc" id="L2036">		return result;</span>

	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#setObjectReadOnly(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID)
	 */
	@Override
	public void setObjectReadOnly(final SessionID sessionID, final ObjectID objectID) {
<span class="nc" id="L2048">		final SetObjectReadOnlyRequest request = SetObjectReadOnlyRequest.newBuilder()</span>
<span class="nc" id="L2049">				.setSessionID(Utils.getMsgID(sessionID)).setObjectID(Utils.getMsgID(objectID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2051">		final Function&lt;SetObjectReadOnlyRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().setObjectReadOnly(req);</span>
<span class="nc" id="L2052">		response = this.&lt;SetObjectReadOnlyRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2053">		Utils.checkIsExc(response);</span>

<span class="nc" id="L2055">	}</span>

	@Override
	public boolean isPrefetchingEnabled() {
		final IsPrefetchingEnabledResponse response;
<span class="nc" id="L2060">		final Function&lt;EmptyMessage, IsPrefetchingEnabledResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2061">				.isPrefetchingEnabled(req);</span>
<span class="nc" id="L2062">		response = this.&lt;EmptyMessage, IsPrefetchingEnabledResponse&gt;callLogicModule(EmptyMessage.newBuilder().build(),</span>
				f);
<span class="nc" id="L2064">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2065">		return response.getEnabled();</span>
	}

	@Override
	public boolean objectExistsInDataClay(final ObjectID objectID) {
<span class="nc" id="L2070">		final ObjectExistsInDataClayRequest request = ObjectExistsInDataClayRequest.newBuilder()</span>
<span class="nc" id="L2071">				.setObjectID(Utils.getMsgID(objectID)).build();</span>
		final ObjectExistsInDataClayResponse response;
<span class="nc" id="L2073">		final Function&lt;ObjectExistsInDataClayRequest, ObjectExistsInDataClayResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2074">				.objectExistsInDataClay(req);</span>
<span class="nc" id="L2075">		response = this.&lt;ObjectExistsInDataClayRequest, ObjectExistsInDataClayResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2076">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2077">		return response.getExists();</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#setObjectReadWrite(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID)
	 */
	@Override
	public void setObjectReadWrite(final SessionID sessionID, final ObjectID objectID) {
<span class="nc" id="L2088">		final SetObjectReadWriteRequest request = SetObjectReadWriteRequest.newBuilder()</span>
<span class="nc" id="L2089">				.setSessionID(Utils.getMsgID(sessionID)).setObjectID(Utils.getMsgID(objectID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2091">		final Function&lt;SetObjectReadWriteRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().setObjectReadWrite(req);</span>
<span class="nc" id="L2092">		response = this.&lt;SetObjectReadWriteRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2093">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2094">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getMetadataByOID(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID)
	 */
	@Override
	public MetaDataInfo getMetadataByOID(final SessionID sessionID, final ObjectID objectID) {
<span class="nc" id="L2104">		final GetMetadataByOIDRequest request = GetMetadataByOIDRequest.newBuilder()</span>
<span class="nc" id="L2105">				.setSessionID(Utils.getMsgID(sessionID)).setObjectID(Utils.getMsgID(objectID)).build();</span>
		final GetMetadataByOIDResponse response;
<span class="nc" id="L2107">		final Function&lt;GetMetadataByOIDRequest, GetMetadataByOIDResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2108">				.getMetadataByOID(req);</span>
<span class="nc" id="L2109">		response = this.&lt;GetMetadataByOIDRequest, GetMetadataByOIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2110">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2111">		MetaDataInfo objMdata = null;</span>
<span class="nc bnc" id="L2112" title="All 2 branches missed.">		if (response.getObjMdataYaml() != null) {</span>
<span class="nc" id="L2113">			objMdata = (MetaDataInfo) CommonYAML.getYamlObject().load(response.getObjMdataYaml());</span>
		}
<span class="nc" id="L2115">		return objMdata;</span>
	}

	@Override
	public MetaDataInfo getMetadataByOIDForDS(final ObjectID objectID) {
<span class="nc" id="L2120">		final GetMetadataByOIDForDSRequest request = GetMetadataByOIDForDSRequest.newBuilder()</span>
<span class="nc" id="L2121">				.setObjectID(Utils.getMsgID(objectID)).build();</span>
		final GetMetadataByOIDForDSResponse response;
<span class="nc" id="L2123">		final Function&lt;GetMetadataByOIDForDSRequest, GetMetadataByOIDForDSResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2124">				.getMetadataByOIDForDS(req);</span>
<span class="nc" id="L2125">		response = this.&lt;GetMetadataByOIDForDSRequest, GetMetadataByOIDForDSResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2126">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L2128">		final MetaDataInfo objMdata = (MetaDataInfo) CommonYAML.getYamlObject().load(response.getObjMdataYaml());</span>
<span class="nc" id="L2129">		return objMdata;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#executeImplementation(dataClay.util.ids.SessionID,
	 * util.ids.OperationID, util.structs.Triple, util.ids.ObjectID, java.util.Map)
	 */
	@Override
	public SerializedParametersOrReturn executeImplementation(final SessionID sessionID, final OperationID operationID,
			final Triple&lt;ImplementationID, ContractID, InterfaceID&gt; remoteImplementation, final ObjectID objectID,
			final SerializedParametersOrReturn params) {
<span class="nc" id="L2143">		final ExecuteImplementationRequest.Builder builder = ExecuteImplementationRequest.newBuilder();</span>
<span class="nc" id="L2144">		builder.setSessionID(Utils.getMsgID(sessionID));</span>
<span class="nc" id="L2145">		builder.setOperationID(Utils.getMsgID(operationID));</span>
<span class="nc" id="L2146">		builder.setImplementationID(Utils.getMsgID(remoteImplementation.getFirst()));</span>
<span class="nc" id="L2147">		builder.setContractID(Utils.getMsgID(remoteImplementation.getSecond()));</span>
<span class="nc" id="L2148">		builder.setInterfaceID(Utils.getMsgID(remoteImplementation.getThird()));</span>
<span class="nc" id="L2149">		builder.setObjectID(Utils.getMsgID(objectID));</span>

<span class="nc bnc" id="L2151" title="All 2 branches missed.">		if (params != null) {</span>
<span class="nc" id="L2152">			builder.setParams(Utils.getParamsOrReturn(params));</span>
		}
<span class="nc" id="L2154">		final ExecuteImplementationRequest request = builder.build();</span>
		final ExecuteImplementationResponse response;
<span class="nc" id="L2156">		final Function&lt;ExecuteImplementationRequest, ExecuteImplementationResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2157">				.executeImplementation(req);</span>
<span class="nc" id="L2158">		response = this.&lt;ExecuteImplementationRequest, ExecuteImplementationResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2159">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc bnc" id="L2161" title="All 2 branches missed.">		if (response.hasRet()) {</span>
<span class="nc" id="L2162">			return Utils.getParamsOrReturn(response.getRet());</span>
		} else {
<span class="nc" id="L2164">			return null;</span>
		}
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#executeMethodOnTarget(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID, java.lang.String, java.util.Map,
	 * util.ids.StorageLocationID)
	 */
	@Override
	public SerializedParametersOrReturn executeMethodOnTarget(final SessionID sessionID, final ObjectID objectID,
			final String operationSignature, final SerializedParametersOrReturn params,
			final ExecutionEnvironmentID backendID) {
<span class="nc" id="L2180">		final ExecuteMethodOnTargetRequest.Builder builder = ExecuteMethodOnTargetRequest.newBuilder();</span>
<span class="nc" id="L2181">		builder.setSessionID(Utils.getMsgID(sessionID));</span>
<span class="nc" id="L2182">		builder.setOperationNameAndSignature(operationSignature);</span>
<span class="nc" id="L2183">		builder.setObjectID(Utils.getMsgID(objectID));</span>
<span class="nc" id="L2184">		builder.setTargetBackendID(Utils.getMsgID(backendID));</span>

<span class="nc bnc" id="L2186" title="All 2 branches missed.">		if (params != null) {</span>
<span class="nc" id="L2187">			builder.setParams(Utils.getParamsOrReturn(params));</span>
		}
<span class="nc" id="L2189">		final ExecuteMethodOnTargetRequest request = builder.build();</span>
		final ExecuteMethodOnTargetResponse response;
<span class="nc" id="L2191">		final Function&lt;ExecuteMethodOnTargetRequest, ExecuteMethodOnTargetResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2192">				.executeMethodOnTarget(req);</span>
<span class="nc" id="L2193">		response = this.&lt;ExecuteMethodOnTargetRequest, ExecuteMethodOnTargetResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2194">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc bnc" id="L2196" title="All 2 branches missed.">		if (response.hasRet()) {</span>
<span class="nc" id="L2197">			return Utils.getParamsOrReturn(response.getRet());</span>
		} else {
<span class="nc" id="L2199">			return null;</span>
		}
	}

	@Override
	public void synchronizeFederatedObject(final DataClayInstanceID dataClayID, final ObjectID objectID,
			final ImplementationID implID, final SerializedParametersOrReturn params, final boolean allBackends) {
<span class="nc" id="L2206">		final SynchronizeFederatedObjectRequest.Builder builder = SynchronizeFederatedObjectRequest.newBuilder();</span>
<span class="nc" id="L2207">		builder.setExtDataClayID(Utils.getMsgID(dataClayID));</span>
<span class="nc" id="L2208">		builder.setObjectID(Utils.getMsgID(objectID));</span>
<span class="nc" id="L2209">		builder.setImplementationID(Utils.getMsgID(implID));</span>
<span class="nc bnc" id="L2210" title="All 2 branches missed.">		if (params != null) {</span>
<span class="nc" id="L2211">			builder.setParams(Utils.getParamsOrReturn(params));</span>
		}
<span class="nc" id="L2213">		builder.setAllBackends(allBackends);</span>

<span class="nc" id="L2215">		final SynchronizeFederatedObjectRequest request = builder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2217">		final Function&lt;SynchronizeFederatedObjectRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2218">				.synchronizeFederatedObject(req);</span>
<span class="nc" id="L2219">		response = this.&lt;SynchronizeFederatedObjectRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2220">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2221">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getStubs(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * communication.grpc.messages.common.CommonMessages.Langs, java.util.List)
	 */
	@Override
	public Map&lt;String, byte[]&gt; getStubs(final AccountID applicantAccountID,
			final PasswordCredential applicantCredential, final Langs language, final List&lt;ContractID&gt; contractsIDs) {
<span class="nc" id="L2233">		final GetStubsRequest.Builder builder = GetStubsRequest.newBuilder();</span>
<span class="nc" id="L2234">		builder.setApplicantAccountID(Utils.getMsgID(applicantAccountID));</span>
<span class="nc" id="L2235">		builder.setCredentials(Utils.getCredential(applicantCredential));</span>
<span class="nc" id="L2236">		builder.setLanguage(language);</span>
<span class="nc bnc" id="L2237" title="All 2 branches missed.">		for (final ContractID cID : contractsIDs) {</span>
<span class="nc" id="L2238">			builder.addContractIDs(Utils.getMsgID(cID));</span>
<span class="nc" id="L2239">		}</span>
<span class="nc" id="L2240">		final GetStubsRequest request = builder.build();</span>
		final GetStubsResponse response;
<span class="nc" id="L2242">		final Function&lt;GetStubsRequest, GetStubsResponse&gt; f = req -&gt; getBlockingStub().getStubs(req);</span>
<span class="nc" id="L2243">		response = this.&lt;GetStubsRequest, GetStubsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2244">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2245">		final Map&lt;String, byte[]&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L2246" title="All 2 branches missed.">		for (final Entry&lt;String, ByteString&gt; entry : response.getStubsMap().entrySet()) {</span>
<span class="nc" id="L2247">			final byte[] objBytes = entry.getValue().toByteArray();</span>
<span class="nc" id="L2248">			result.put(entry.getKey(), objBytes);</span>
<span class="nc" id="L2249">		}</span>
<span class="nc" id="L2250">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getBabelStubs(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.util.List)
	 */
	@Override
	public byte[] getBabelStubs(final AccountID applicantAccountID, final PasswordCredential applicantCredential,
			final List&lt;ContractID&gt; contractsIDs) {
<span class="nc" id="L2262">		final GetBabelStubsRequest.Builder builder = GetBabelStubsRequest.newBuilder();</span>
<span class="nc" id="L2263">		builder.setAccountID(Utils.getMsgID(applicantAccountID));</span>
<span class="nc" id="L2264">		builder.setCredentials(Utils.getCredential(applicantCredential));</span>
<span class="nc bnc" id="L2265" title="All 2 branches missed.">		for (final ContractID cID : contractsIDs) {</span>
<span class="nc" id="L2266">			builder.addContractIDs(Utils.getMsgID(cID));</span>
<span class="nc" id="L2267">		}</span>
<span class="nc" id="L2268">		final GetBabelStubsRequest request = builder.build();</span>
		final GetBabelStubsResponse response;
<span class="nc" id="L2270">		final Function&lt;GetBabelStubsRequest, GetBabelStubsResponse&gt; f = req -&gt; getBlockingStub().getBabelStubs(req);</span>
<span class="nc" id="L2271">		response = this.&lt;GetBabelStubsRequest, GetBabelStubsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2272">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2273">		return response.getYamlStub().toByteArray();</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getClassNameForDS(dataClay.util.ids.MetaClassID)
	 */
	@Override
	public String getClassNameForDS(final MetaClassID classID) {
<span class="nc" id="L2284">		final GetClassNameForDSRequest request = GetClassNameForDSRequest.newBuilder()</span>
<span class="nc" id="L2285">				.setClassID(Utils.getMsgID(classID)).build();</span>
		final GetClassNameForDSResponse response;
<span class="nc" id="L2287">		final Function&lt;GetClassNameForDSRequest, GetClassNameForDSResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2288">				.getClassNameForDS(req);</span>
<span class="nc" id="L2289">		response = this.&lt;GetClassNameForDSRequest, GetClassNameForDSResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2290">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2291">		return response.getClassName();</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getClassNameAndNamespaceForDS(dataClay.util.ids.
	 * MetaClassID)
	 */
	@Override
	public Tuple&lt;String, String&gt; getClassNameAndNamespaceForDS(final MetaClassID classID) {
<span class="nc" id="L2303">		final GetClassNameAndNamespaceForDSRequest request = GetClassNameAndNamespaceForDSRequest.newBuilder()</span>
<span class="nc" id="L2304">				.setClassID(Utils.getMsgID(classID)).build();</span>
		final GetClassNameAndNamespaceForDSResponse response;
<span class="nc" id="L2306">		final Function&lt;GetClassNameAndNamespaceForDSRequest, GetClassNameAndNamespaceForDSResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2307">				.getClassNameAndNamespaceForDS(req);</span>
<span class="nc" id="L2308">		response = this.&lt;GetClassNameAndNamespaceForDSRequest, GetClassNameAndNamespaceForDSResponse&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2310">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2311">		return new Tuple&lt;&gt;(response.getClassName(), response.getNamespace());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#registerEventListenerImplementation(dataClay.util.
	 * ids.AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.events.listeners.ECA)
	 */
	@Override
	public void registerEventListenerImplementation(final AccountID accountID, final PasswordCredential credential,
			final ECA newEventListener) {
<span class="nc" id="L2325">		final RegisterECARequest request = RegisterECARequest.newBuilder()</span>
<span class="nc" id="L2326">				.setApplicantAccountID(Utils.getMsgID(accountID)).setCredentials(Utils.getCredential(credential))</span>
<span class="nc" id="L2327">				.setEca(CommonYAML.getYamlObject().dump(newEventListener)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2329">		final Function&lt;RegisterECARequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().registerECA(req);</span>
<span class="nc" id="L2330">		response = this.&lt;RegisterECARequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2331">		Utils.checkIsExc(response);</span>

<span class="nc" id="L2333">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#adviseEvent(util.events.message.EventMessage)
	 */
	@Override
	public void adviseEvent(final EventMessage newEvent) {
<span class="nc" id="L2342">		final AdviseEventRequest request = AdviseEventRequest.newBuilder()</span>
<span class="nc" id="L2343">				.setEventYaml(CommonYAML.getYamlObject().dump(newEvent)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2345">		final Function&lt;AdviseEventRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().adviseEvent(req);</span>
<span class="nc" id="L2346">		response = this.&lt;AdviseEventRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2347">		Utils.checkIsExc(response);</span>

<span class="nc" id="L2349">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#activateTracing()
	 */
	@Override
	public void activateTracing(final int currentAvailableTaskID) {
		final ExceptionInfo response;
<span class="nc" id="L2359">		final ActivateTracingRequest request = ActivateTracingRequest.newBuilder().setTaskid(currentAvailableTaskID)</span>
<span class="nc" id="L2360">				.build();</span>
<span class="nc" id="L2361">		final Function&lt;ActivateTracingRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().activateTracing(req);</span>
<span class="nc" id="L2362">		response = this.&lt;ActivateTracingRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2363">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2364">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#deactivateTracing()
	 */
	@Override
	public void deactivateTracing() {
		final ExceptionInfo response;
<span class="nc" id="L2374">		final Function&lt;EmptyMessage, ExceptionInfo&gt; f = req -&gt; getBlockingStub().deactivateTracing(req);</span>
<span class="nc" id="L2375">		response = this.&lt;EmptyMessage, ExceptionInfo&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2376">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2377">	}</span>
	
	@Override
	public Map&lt;String, byte[]&gt; getTraces() { 
		final GetTracesResponse response;
<span class="nc" id="L2382">		final Function&lt;EmptyMessage, GetTracesResponse&gt; f = req -&gt; getBlockingStub().getTraces(req);</span>
<span class="nc" id="L2383">		response = this.&lt;EmptyMessage, GetTracesResponse&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2384">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2385">		final Map&lt;String, byte[]&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L2386" title="All 2 branches missed.">		for (final Entry&lt;String, ByteString&gt; entry : response.getTracesMap().entrySet()) {</span>
<span class="nc" id="L2387">			final byte[] objBytes = entry.getValue().toByteArray();</span>
<span class="nc" id="L2388">			result.put(entry.getKey(), objBytes);</span>
<span class="nc" id="L2389">		}</span>
<span class="nc" id="L2390">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#cleanMetaDataCaches()
	 */
	@Override
	public void cleanMetaDataCaches() {
		final ExceptionInfo response;
<span class="nc" id="L2401">		final Function&lt;EmptyMessage, ExceptionInfo&gt; f = req -&gt; getBlockingStub().cleanMetaDataCaches(req);</span>
<span class="nc" id="L2402">		response = this.&lt;EmptyMessage, ExceptionInfo&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2403">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2404">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#closeManagerDb()
	 */
	@Override
	public void closeManagerDb() {
		final ExceptionInfo response;
<span class="nc" id="L2414">		final Function&lt;EmptyMessage, ExceptionInfo&gt; f = req -&gt; getBlockingStub().closeManagerDb(req);</span>
<span class="nc" id="L2415">		response = this.&lt;EmptyMessage, ExceptionInfo&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2416">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2417">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#closeDb()
	 */
	@Override
	public void closeDb() {
		final ExceptionInfo response;
<span class="nc" id="L2427">		final Function&lt;EmptyMessage, ExceptionInfo&gt; f = req -&gt; getBlockingStub().closeDb(req);</span>
<span class="nc" id="L2428">		response = this.&lt;EmptyMessage, ExceptionInfo&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2429">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2430">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getContractIDOfDataClayProvider(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public ContractID getContractIDOfDataClayProvider(final AccountID accountID, final PasswordCredential credential) {
<span class="nc" id="L2441">		final GetContractIDOfDataClayProviderRequest request = GetContractIDOfDataClayProviderRequest.newBuilder()</span>
<span class="nc" id="L2442">				.setApplicantAccountID(Utils.getMsgID(accountID)).setCredentials(Utils.getCredential(credential))</span>
<span class="nc" id="L2443">				.build();</span>
		final GetContractIDOfDataClayProviderResponse response;
<span class="nc" id="L2445">		final Function&lt;GetContractIDOfDataClayProviderRequest, GetContractIDOfDataClayProviderResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2446">				.getContractIDOfDataClayProvider(req);</span>
<span class="nc" id="L2447">		response = this</span>
<span class="nc" id="L2448">				.&lt;GetContractIDOfDataClayProviderRequest, GetContractIDOfDataClayProviderResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L2450">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2451">		return Utils.getID(response.getContractID());</span>
	}

	/**
	 * Wait all async. requests
	 */
	public void waitAndProcessAllAsyncRequests() {
<span class="nc bnc" id="L2458" title="All 2 branches missed.">		while (asyncReqSend.get() != asyncReqReceived.get()) {</span>
			try {
<span class="nc" id="L2460">				Thread.sleep(ASYNC_WAIT_MILLIS);</span>
<span class="nc" id="L2461">			} catch (final InterruptedException ex) {</span>
<span class="nc" id="L2462">				logger.debug(&quot;waitAndProcessAllAsyncRequests was interrupted while sleeping&quot;, ex);</span>
<span class="nc" id="L2463">			}</span>
		}
<span class="nc" id="L2465">	}</span>

	@Override
	public void unregisterObjects(final Set&lt;ObjectID&gt; objectsToUnregister) {
<span class="nc" id="L2469">		final UnregisterObjectsRequest.Builder requestBuilder = UnregisterObjectsRequest.newBuilder();</span>
<span class="nc bnc" id="L2470" title="All 2 branches missed.">		for (final ObjectID oid : objectsToUnregister) {</span>
<span class="nc" id="L2471">			requestBuilder.addObjectsToUnregister(Utils.getMsgID(oid));</span>
<span class="nc" id="L2472">		}</span>
<span class="nc" id="L2473">		final UnregisterObjectsRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2475">		final Function&lt;UnregisterObjectsRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().unregisterObjects(req);</span>
<span class="nc" id="L2476">		response = this.&lt;UnregisterObjectsRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2477">		Utils.checkIsExc(response);</span>

<span class="nc" id="L2479">	}</span>

	@Override
	public void publishAddress(final String hostname, final int port) {
<span class="nc" id="L2483">		final PublishAddressRequest.Builder requestBuilder = PublishAddressRequest.newBuilder();</span>
<span class="nc" id="L2484">		requestBuilder.setHostname(hostname);</span>
<span class="nc" id="L2485">		requestBuilder.setPort(port);</span>
<span class="nc" id="L2486">		final PublishAddressRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2488">		final Function&lt;PublishAddressRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().publishAddress(req);</span>
<span class="nc" id="L2489">		response = this.&lt;PublishAddressRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2490">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2491">	}</span>

	@Override
	public Tuple&lt;Namespace, Set&lt;MetaClass&gt;&gt; getClassesInNamespace(final String namespaceName) {
<span class="nc" id="L2495">		final GetClassesInNamespaceRequest.Builder requestBuilder = GetClassesInNamespaceRequest.newBuilder();</span>
<span class="nc" id="L2496">		requestBuilder.setNamespaceName(namespaceName);</span>
<span class="nc" id="L2497">		final GetClassesInNamespaceRequest request = requestBuilder.build();</span>
		final GetClassesInNamespaceResponse response;
<span class="nc" id="L2499">		final Function&lt;GetClassesInNamespaceRequest, GetClassesInNamespaceResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2500">				.getClassesInNamespace(req);</span>
<span class="nc" id="L2501">		response = this.&lt;GetClassesInNamespaceRequest, GetClassesInNamespaceResponse&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2503">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2504">		final Namespace namespace = (Namespace) CommonYAML.getYamlObject().load(response.getNamespaceYaml());</span>
<span class="nc" id="L2505">		final Set&lt;MetaClass&gt; metaClasses = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L2506" title="All 2 branches missed.">		for (final String metaClassYaml : response.getMetaClassYamlList()) {</span>
<span class="nc" id="L2507">			metaClasses.add((MetaClass) CommonYAML.getYamlObject().load(metaClassYaml));</span>
<span class="nc" id="L2508">		}</span>
<span class="nc" id="L2509">		return new Tuple&lt;&gt;(namespace, metaClasses);</span>
	}

	@Override
	public void importModelsFromExternalDataClay(final String extNamespaceName, final DataClayInstanceID extDataClayID) {
<span class="nc" id="L2514">		final ImportModelsFromExternalDataClayRequest.Builder requestBuilder = ImportModelsFromExternalDataClayRequest.newBuilder();</span>
<span class="nc" id="L2515">		requestBuilder.setNamespaceName(extNamespaceName);</span>
<span class="nc" id="L2516">		requestBuilder.setDataClayID(Utils.getMsgID(extDataClayID));</span>
<span class="nc" id="L2517">		final ImportModelsFromExternalDataClayRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2519">		final Function&lt;ImportModelsFromExternalDataClayRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2520">				.importModelsFromExternalDataClay(req);</span>
<span class="nc" id="L2521">		response = this.&lt;ImportModelsFromExternalDataClayRequest, ExceptionInfo&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2523">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2524">	}</span>

	@Override
	public StorageLocationID getStorageLocationID(final String slName) {
<span class="nc" id="L2528">		final GetStorageLocationIDRequest.Builder requestBuilder = GetStorageLocationIDRequest.newBuilder();</span>
<span class="nc" id="L2529">		requestBuilder.setSlName(slName);</span>
<span class="nc" id="L2530">		final GetStorageLocationIDRequest request = requestBuilder.build();</span>
		final GetStorageLocationIDResponse response;
<span class="nc" id="L2532">		final Function&lt;GetStorageLocationIDRequest, GetStorageLocationIDResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2533">				.getStorageLocationID(req);</span>
<span class="nc" id="L2534">		response = this.&lt;GetStorageLocationIDRequest, GetStorageLocationIDResponse&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2536">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2537">		return Utils.getID(response.getStorageLocationID());</span>
	}

	@Override
	public void notifyExecutionEnvironmentShutdown(final ExecutionEnvironmentID execEnvID) {
<span class="nc" id="L2542">		final NotifyExecutionEnvironmentShutdownRequest.Builder requestBuilder = NotifyExecutionEnvironmentShutdownRequest.newBuilder();</span>
<span class="nc" id="L2543">		requestBuilder.setExecutionEnvironmentID(Utils.getMsgID(execEnvID));</span>
<span class="nc" id="L2544">		final NotifyExecutionEnvironmentShutdownRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2546">		final Function&lt;NotifyExecutionEnvironmentShutdownRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2547">				.notifyExecutionEnvironmentShutdown(req);</span>
<span class="nc" id="L2548">		response = this.&lt;NotifyExecutionEnvironmentShutdownRequest, ExceptionInfo&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2550">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2551">	}</span>

	@Override
	public void notifyStorageLocationShutdown(final StorageLocationID stLocID) {
<span class="nc" id="L2555">		final NotifyStorageLocationShutdownRequest.Builder requestBuilder = NotifyStorageLocationShutdownRequest.newBuilder();</span>
<span class="nc" id="L2556">		requestBuilder.setStorageLocationID(Utils.getMsgID(stLocID));</span>
<span class="nc" id="L2557">		final NotifyStorageLocationShutdownRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2559">		final Function&lt;NotifyStorageLocationShutdownRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2560">				.notifyStorageLocationShutdown(req);</span>
<span class="nc" id="L2561">		response = this.&lt;NotifyStorageLocationShutdownRequest, ExceptionInfo&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2563">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2564">	}</span>

	@Override
	public boolean existsActiveEnvironmentsForSL(final StorageLocationID stLocID) {
<span class="nc" id="L2568">		final ExistsActiveEnvironmentsForSLRequest.Builder requestBuilder = ExistsActiveEnvironmentsForSLRequest.newBuilder();</span>
<span class="nc" id="L2569">		requestBuilder.setStorageLocationID(Utils.getMsgID(stLocID));</span>
<span class="nc" id="L2570">		final ExistsActiveEnvironmentsForSLRequest request = requestBuilder.build();</span>
		final ExistsActiveEnvironmentsForSLResponse response;
<span class="nc" id="L2572">		final Function&lt;ExistsActiveEnvironmentsForSLRequest, ExistsActiveEnvironmentsForSLResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2573">				.existsActiveEnvironmentsForSL(req);</span>
<span class="nc" id="L2574">		response = this.&lt;ExistsActiveEnvironmentsForSLRequest, ExistsActiveEnvironmentsForSLResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2575">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2576">		return response.getExists();</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>