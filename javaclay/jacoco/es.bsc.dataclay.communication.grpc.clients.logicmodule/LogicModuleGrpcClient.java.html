<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LogicModuleGrpcClient.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">dataclay</a> &gt; <a href="index.source.html" class="el_package">es.bsc.dataclay.communication.grpc.clients.logicmodule</a> &gt; <span class="el_source">LogicModuleGrpcClient.java</span></div><h1>LogicModuleGrpcClient.java</h1><pre class="source lang-java linenums">
/**
 * 
 */
package es.bsc.dataclay.communication.grpc.clients.logicmodule;

import java.io.File;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;
import java.util.concurrent.ForkJoinPool;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.function.BiConsumer;
import java.util.function.Function;

import es.bsc.dataclay.util.management.metadataservice.*;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

import com.google.protobuf.ByteString;

import es.bsc.dataclay.commonruntime.DataServiceRuntime;
import es.bsc.dataclay.communication.grpc.Utils;
import es.bsc.dataclay.communication.grpc.clients.CommonGrpcClient;
import es.bsc.dataclay.communication.grpc.generated.logicmodule.LogicModuleGrpc;
import es.bsc.dataclay.communication.grpc.generated.logicmodule.LogicModuleGrpc.LogicModuleBlockingStub;
import es.bsc.dataclay.communication.grpc.generated.logicmodule.LogicModuleGrpc.LogicModuleStub;
import es.bsc.dataclay.communication.grpc.messages.common.CommonMessages;
import es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.EmptyMessage;
import es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.ExceptionInfo;
import es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.GetTracesResponse;
import es.bsc.dataclay.communication.grpc.messages.common.CommonMessages.Langs;
import es.bsc.dataclay.communication.grpc.messages.logicmodule.LogicmoduleMessages.*;
import es.bsc.dataclay.logic.api.LogicModuleAPI;
import es.bsc.dataclay.serialization.lib.SerializedParametersOrReturn;
import es.bsc.dataclay.util.Configuration;
import es.bsc.dataclay.util.events.listeners.ECA;
import es.bsc.dataclay.util.events.message.EventMessage;
import es.bsc.dataclay.util.ids.AccountID;
import es.bsc.dataclay.util.ids.ContractID;
import es.bsc.dataclay.util.ids.DataClayInstanceID;
import es.bsc.dataclay.util.ids.DataContractID;
import es.bsc.dataclay.util.ids.DataSetID;
import es.bsc.dataclay.util.ids.ExecutionEnvironmentID;
import es.bsc.dataclay.util.ids.ImplementationID;
import es.bsc.dataclay.util.ids.InterfaceID;
import es.bsc.dataclay.util.ids.MetaClassID;
import es.bsc.dataclay.util.ids.NamespaceID;
import es.bsc.dataclay.util.ids.ObjectID;
import es.bsc.dataclay.util.ids.OperationID;
import es.bsc.dataclay.util.ids.PropertyID;
import es.bsc.dataclay.util.ids.SessionID;
import es.bsc.dataclay.util.ids.StorageLocationID;
import es.bsc.dataclay.util.info.VersionInfo;
import es.bsc.dataclay.util.management.accountmgr.Account;
import es.bsc.dataclay.util.management.accountmgr.PasswordCredential;
import es.bsc.dataclay.util.management.classmgr.MetaClass;
import es.bsc.dataclay.util.management.contractmgr.Contract;
import es.bsc.dataclay.util.management.datacontractmgr.DataContract;
import es.bsc.dataclay.util.management.datasetmgr.DataSet;
import es.bsc.dataclay.util.management.interfacemgr.Interface;
import es.bsc.dataclay.util.management.namespacemgr.Namespace;
import es.bsc.dataclay.util.management.sessionmgr.SessionInfo;
import es.bsc.dataclay.util.structs.Triple;
import es.bsc.dataclay.util.structs.Tuple;
import es.bsc.dataclay.util.yaml.CommonYAML;
import io.grpc.ManagedChannel;
import io.grpc.Metadata;
import io.grpc.StatusRuntimeException;
import io.grpc.netty.shaded.io.grpc.netty.GrpcSslContexts;
import io.grpc.netty.shaded.io.grpc.netty.NettyChannelBuilder;
import io.grpc.netty.shaded.io.netty.handler.ssl.SslContext;
import io.grpc.netty.shaded.io.netty.handler.ssl.SslContextBuilder;
import io.grpc.stub.MetadataUtils;
import io.grpc.stub.StreamObserver;

/**
 * Client code that makes gRPC calls to the server.
 */
public final class LogicModuleGrpcClient implements LogicModuleAPI {

	/** Logger. */
	private final Logger logger;

	/** Indicates if debug is enabled. */
<span class="nc" id="L92">	protected static final boolean DEBUG_ENABLED = Configuration.isDebugEnabled();</span>

	/** Number of max seconds to shutdown. */
	private static final int SECONDS_SHUTDOWN = 60;

	/** Sleeping time while there is asynchronous request to wait for. */
	private static final int ASYNC_WAIT_MILLIS = 1000;

	/** Channel. */
	private ManagedChannel channel;

	/** Logic Module blocking stub. */
	private LogicModuleBlockingStub blockingStub;

	/** Logic Module stub. */
	private LogicModuleStub asyncStub;

	/** Number of asynchronous requests send. */
<span class="nc" id="L110">	private final AtomicInteger asyncReqSend = new AtomicInteger(0);</span>

	/** Number of asynchronous requests received. */
<span class="nc" id="L113">	private final AtomicInteger asyncReqReceived = new AtomicInteger(0);</span>

	/**
	 * Construct client for accessing LogicModule server at {@code host:port}.
	 * 
	 * @param host
	 *            Host
	 * @param port
	 *            Port
	 */
<span class="nc" id="L123">	public LogicModuleGrpcClient(final String host, final int port) {</span>
		// Logger.getLogger(&quot;io.grpc&quot;).setLevel(Level.OFF);
<span class="nc" id="L125">		logger = LogManager.getLogger(&quot;grpc.client.logicmodule&quot;);</span>
<span class="nc" id="L126">		createStubs(host, port);</span>
<span class="nc" id="L127">	}</span>

	/**
	 * Create stubs to specified host and port. This function is also used in case
	 * we replace the connection.
	 * 
	 * @param host
	 *            Host name
	 * @param port
	 *            Port
	 */
	private void createStubs(final String host, final int port) {

		/*
		 * Tuple&lt;String, Integer&gt; actualAddress = translateDockerAddressIfNeeded(host,
		 * port); String actualHost = actualAddress.getFirst(); int actualPort =
		 * actualAddress.getSecond();
		 */
<span class="nc" id="L145">		NettyChannelBuilder chBuilder = null;</span>
<span class="nc" id="L146">		String serviceAlias = null;</span>
		// Check if paths to certificates are defined 
<span class="nc bnc" id="L148" title="All 2 branches missed.">		if (Configuration.Flags.SSL_CLIENT_TRUSTED_CERTIFICATES.getStringValue() != null</span>
<span class="nc bnc" id="L149" title="All 2 branches missed.">				|| Configuration.Flags.SSL_CLIENT_CERTIFICATE.getStringValue() != null</span>
<span class="nc bnc" id="L150" title="All 2 branches missed.">				|| Configuration.Flags.SSL_CLIENT_KEY.getStringValue() != null) {</span>
			try {

<span class="nc bnc" id="L153" title="All 2 branches missed.">				if (port != 443) {</span>
<span class="nc" id="L154">					serviceAlias = String.valueOf(port);</span>
<span class="nc" id="L155">					logger.info(&quot;SSL configured: Changing &quot; + host + &quot;:&quot; + port + &quot; to &quot; + Configuration.Flags.SSL_TARGET_AUTHORITY.getStringValue() + &quot;:443&quot;);</span>
<span class="nc" id="L156">					chBuilder = NettyChannelBuilder.forAddress(host,</span>
							443);
				} else {
<span class="nc" id="L159">					serviceAlias = Configuration.Flags.SSL_TARGET_LM_ALIAS.getStringValue();</span>
<span class="nc" id="L160">					chBuilder = NettyChannelBuilder.forAddress(host, port);</span>
				}

<span class="nc" id="L163">				chBuilder.useTransportSecurity();</span>
<span class="nc" id="L164">				final SslContextBuilder sslContextBuilder = GrpcSslContexts.forClient(); </span>
<span class="nc bnc" id="L165" title="All 2 branches missed.">				if (Configuration.Flags.SSL_CLIENT_TRUSTED_CERTIFICATES.getStringValue() != null) {</span>
<span class="nc" id="L166">					sslContextBuilder.trustManager(new File(Configuration.Flags.SSL_CLIENT_TRUSTED_CERTIFICATES.getStringValue()));</span>
				} 
<span class="nc bnc" id="L168" title="All 2 branches missed.">				if (Configuration.Flags.SSL_CLIENT_CERTIFICATE.getStringValue() != null </span>
<span class="nc bnc" id="L169" title="All 2 branches missed.">						&amp;&amp; Configuration.Flags.SSL_CLIENT_KEY.getStringValue() != null) {</span>
<span class="nc" id="L170">					sslContextBuilder.keyManager(new File(Configuration.Flags.SSL_CLIENT_CERTIFICATE.getStringValue()),</span>
<span class="nc" id="L171">			            		new File(Configuration.Flags.SSL_CLIENT_KEY.getStringValue()));</span>
				}
<span class="nc" id="L173">				final SslContext sslContext = sslContextBuilder.build();</span>
<span class="nc" id="L174">				chBuilder.overrideAuthority(Configuration.Flags.SSL_TARGET_AUTHORITY.getStringValue());</span>
<span class="nc" id="L175">				chBuilder.sslContext(sslContext);</span>
<span class="nc" id="L176">			} catch (final Exception e) {</span>
<span class="nc" id="L177">				e.printStackTrace();</span>
<span class="nc" id="L178">			}</span>
<span class="nc" id="L179">			logger.info(&quot;SSL configured: using SSL_CLIENT_TRUSTED_CERTIFICATES located at &quot; + Configuration.Flags.SSL_CLIENT_TRUSTED_CERTIFICATES.getStringValue());</span>
<span class="nc" id="L180">			logger.info(&quot;SSL configured: using SSL_CLIENT_CERTIFICATE located at &quot; + Configuration.Flags.SSL_CLIENT_CERTIFICATE.getStringValue());</span>
<span class="nc" id="L181">			logger.info(&quot;SSL configured: using SSL_CLIENT_KEY located at &quot; + Configuration.Flags.SSL_CLIENT_KEY.getStringValue());</span>

		} else {
<span class="nc" id="L184">			chBuilder = NettyChannelBuilder.forAddress(host, port);</span>
<span class="nc" id="L185">			chBuilder.usePlaintext();</span>
			//chBuilder.negotiationType(NegotiationType.PLAINTEXT); 
<span class="nc" id="L187">			logger.info(&quot;Not using SSL&quot;);</span>

		}


<span class="nc bnc" id="L192" title="All 2 branches missed.">		if (Configuration.Flags.GRPC_USE_FORK_JOIN_POOL.getBooleanValue()) {</span>
<span class="nc" id="L193">			chBuilder.executor(new ForkJoinPool());</span>
		}
<span class="nc" id="L195">		chBuilder.maxInboundMetadataSize(Integer.MAX_VALUE);</span>
<span class="nc" id="L196">		chBuilder.maxHeaderListSize(Integer.MAX_VALUE);</span>
<span class="nc" id="L197">		chBuilder.maxInboundMessageSize(Integer.MAX_VALUE);</span>
<span class="nc" id="L198">		channel = chBuilder.build();</span>
		// Capture the metadata exchange
<span class="nc bnc" id="L200" title="All 2 branches missed.">		if (Configuration.Flags.SSL_CLIENT_TRUSTED_CERTIFICATES.getStringValue() != null</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">				|| Configuration.Flags.SSL_CLIENT_CERTIFICATE.getStringValue() != null</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">				|| Configuration.Flags.SSL_CLIENT_KEY.getStringValue() != null) {</span>
<span class="nc" id="L203">			final Metadata fixedHeaders = new Metadata();</span>
<span class="nc" id="L204">			logger.info(&quot;SSL configured: added rule: &quot; + CommonGrpcClient.SERVICE_ALIAS_HEADER_KEY + &quot; = &quot; + serviceAlias);</span>
<span class="nc" id="L205">			fixedHeaders.put(CommonGrpcClient.SERVICE_ALIAS_HEADER_KEY, serviceAlias);</span>
<span class="nc" id="L206">			blockingStub = MetadataUtils.attachHeaders(LogicModuleGrpc.newBlockingStub(channel), fixedHeaders);</span>
<span class="nc" id="L207">		} else {</span>
<span class="nc" id="L208">			blockingStub = LogicModuleGrpc.newBlockingStub(channel);</span>
		}
		//asyncStub = MetadataUtils.attachHeaders(LogicModuleGrpc.newStub(channel), fixedHeaders);
		
		//blockingStub.getCallOptions().withMaxOutboundMessageSize(Integer.MAX_VALUE);
		//asyncStub.getCallOptions().withMaxOutboundMessageSize(Integer.MAX_VALUE);

		
<span class="nc" id="L216">	}</span>

	/**
	 * Get blocking stub. Getter used in lambda functions to ensure it is executed
	 * and in case of replacing the stub, have control here.
	 * 
	 * @return Blocking stub.
	 */
	private LogicModuleBlockingStub getBlockingStub() {
<span class="nc" id="L225">		return blockingStub;</span>
	}

	/**
	 * Get async stub. Getter used in lambda functions to ensure it is executed and
	 * in case of replacing the stub, have control here.
	 * 
	 * @return Blocking stub.
	 */
	private LogicModuleStub getAsyncStub() {
<span class="nc" id="L235">		return asyncStub;</span>
	}

	/**
	 * Shutdown client
	 * 
	 * @throws InterruptedException
	 *             if some exception occurs
	 */
	public void shutdown() throws InterruptedException {
<span class="nc" id="L245">		channel.shutdownNow();</span>
<span class="nc bnc" id="L246" title="All 2 branches missed.">		while (!channel.awaitTermination(SECONDS_SHUTDOWN, TimeUnit.SECONDS)) { </span>
<span class="nc" id="L247">			System.out.println(&quot;[grpc] Waiting for channel to close...&quot;);</span>
		}
<span class="nc" id="L249">		channel = null;</span>
<span class="nc" id="L250">	}</span>

	/**
	 * Call logic module using lambda function provided.
	 * 
	 * @param &lt;T&gt;
	 *            Request type depending on function
	 * @param &lt;R&gt;
	 *            Response type depending on function
	 * @param request
	 *            Request to send
	 * @param fn
	 *            Function to call
	 * @return Response
	 */
	private &lt;T, R&gt; R callLogicModule(final T request, final Function&lt;T, R&gt; fn) {
<span class="nc" id="L266">		R response = null;</span>
<span class="nc" id="L267">		short retryCommunicationIteration = 0;</span>
<span class="nc bnc" id="L268" title="All 2 branches missed.">		while (retryCommunicationIteration &lt; Configuration.Flags.MAX_RETRIES_LOGICMODULE.getShortValue()) {</span>
			try {
<span class="nc" id="L270">				response = fn.apply(request);</span>
<span class="nc" id="L271">				break;</span>
<span class="nc" id="L272">			} catch (final StatusRuntimeException e) {</span>
<span class="nc" id="L273">				logger.warn(&quot;Error calling LogicModule. Retrying.&quot;, e);</span>
<span class="nc" id="L274">				retryCommunicationIteration++;</span>
<span class="nc bnc" id="L275" title="All 2 branches missed.">				if (retryCommunicationIteration &gt;= Configuration.Flags.MAX_RETRIES_LOGICMODULE.getShortValue()) {</span>
<span class="nc" id="L276">					throw new RuntimeException(e.getStatus().getDescription());</span>
					
				} else { 
					try {
<span class="nc" id="L280">						Thread.sleep(Configuration.Flags.SLEEP_RETRIES_LOGICMODULE.getShortValue());</span>
<span class="nc" id="L281">					} catch (final InterruptedException e1) {</span>
<span class="nc" id="L282">						e1.printStackTrace();</span>
<span class="nc" id="L283">					}</span>
				}
<span class="nc" id="L285">			}</span>
		}
<span class="nc" id="L287">		return response;</span>
	}

	/**
	 * Do an asynchronous call to LogicModule
	 * 
	 * @param &lt;T&gt;
	 *            Request type depending on function
	 * @param &lt;R&gt;
	 *            Response type depending on function
	 * @param request
	 *            Request to send
	 * @param fn
	 *            Function to call
	 * @param resultObserver
	 *            For asynchronous call, response observer in which response will be
	 *            added.
	 */
	private &lt;T, R&gt; void callLogicModuleAsync(final T request, final StreamObserver&lt;R&gt; resultObserver,
			final BiConsumer&lt;T, StreamObserver&lt;R&gt;&gt; fn) {
<span class="nc" id="L307">		short retryCommunicationIteration = 0;</span>
<span class="nc" id="L308">		asyncReqSend.incrementAndGet();</span>
<span class="nc bnc" id="L309" title="All 2 branches missed.">		while (retryCommunicationIteration &lt; Configuration.Flags.MAX_RETRIES_LOGICMODULE.getShortValue()) {</span>
			try {
<span class="nc" id="L311">				fn.accept(request, resultObserver);</span>
<span class="nc" id="L312">				break;</span>
<span class="nc" id="L313">			} catch (final StatusRuntimeException e) {</span>
<span class="nc" id="L314">				retryCommunicationIteration++;</span>
<span class="nc bnc" id="L315" title="All 2 branches missed.">				if (retryCommunicationIteration &gt;= Configuration.Flags.MAX_RETRIES_LOGICMODULE.getShortValue()) {</span>
					
<span class="nc" id="L317">					throw new RuntimeException(e.getStatus().getDescription());</span>
					
				}
<span class="nc" id="L320">			}</span>
		}
<span class="nc" id="L322">	}</span>

	@Override
	public void checkAlive() {
<span class="nc" id="L326">		final EmptyMessage request = EmptyMessage.getDefaultInstance();</span>
		final ExceptionInfo response;
<span class="nc" id="L328">		final Function&lt;EmptyMessage, ExceptionInfo&gt; f = req -&gt; getBlockingStub().checkAlive(req);</span>
<span class="nc" id="L329">		response = this.&lt;EmptyMessage, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L330">		Utils.checkIsExc(response);</span>
<span class="nc" id="L331">	}</span>

	@Override
	public void autoregisterSL(final StorageLocationID id, final String dsName,
			final String dsHostname, final Integer dsTCPPort) {

<span class="nc" id="L337">		final AutoRegisterSLRequest request = AutoRegisterSLRequest.newBuilder()</span>
<span class="nc" id="L338">				.setDsName(dsName).setStorageLocationID(Utils.getMsgID(id))</span>
<span class="nc" id="L339">				.setDsHostname(dsHostname).setDsPort(dsTCPPort).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L341">		final Function&lt;AutoRegisterSLRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L342">				.autoregisterSL(req);</span>
<span class="nc" id="L343">		response = this.&lt;AutoRegisterSLRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L344">		Utils.checkIsExc(response);</span>
<span class="nc" id="L345">	}</span>
	
	@Override
	public StorageLocationID autoregisterEE(final ExecutionEnvironmentID id, final String eeName,
			final String eeHostname, final Integer eePort, final Langs language) {

<span class="nc" id="L351">		final AutoRegisterEERequest request = AutoRegisterEERequest.newBuilder()</span>
<span class="nc" id="L352">				.setEeName(eeName).setEeHostname(eeHostname).setEePort(eePort)</span>
<span class="nc" id="L353">				.setLang(language).setExecutionEnvironmentID(Utils.getMsgID(id)).build();</span>
		final AutoRegisterEEResponse response;
<span class="nc" id="L355">		final Function&lt;AutoRegisterEERequest, AutoRegisterEEResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L356">				.autoregisterEE(req);</span>
<span class="nc" id="L357">		response = this.&lt;AutoRegisterEERequest, AutoRegisterEEResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L358">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L359">		return Utils.getStorageLocationID(response.getStorageLocationID());</span>
	}

	@Override
	public void unregisterStorageLocation(final StorageLocationID stLocID) {
<span class="nc" id="L364">		final UnregisterStorageLocationRequest request = UnregisterStorageLocationRequest.newBuilder()</span>
<span class="nc" id="L365">				.setStorageLocationID(Utils.getMsgID(stLocID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L367">		final Function&lt;UnregisterStorageLocationRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L368">				.unregisterStorageLocation(req);</span>
<span class="nc" id="L369">		response = this.&lt;UnregisterStorageLocationRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L370">		Utils.checkIsExc(response);</span>
<span class="nc" id="L371">	}</span>

	@Override
	public void unregisterExecutionEnvironment(final ExecutionEnvironmentID execEnvID) {
<span class="nc" id="L375">		final UnregisterExecutionEnvironmentRequest request = UnregisterExecutionEnvironmentRequest.newBuilder()</span>
<span class="nc" id="L376">				.setExecutionEnvironmentID(Utils.getMsgID(execEnvID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L378">		final Function&lt;UnregisterExecutionEnvironmentRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L379">				.unregisterExecutionEnvironment(req);</span>
<span class="nc" id="L380">		response = this.&lt;UnregisterExecutionEnvironmentRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L381">		Utils.checkIsExc(response);</span>
<span class="nc" id="L382">	}</span>

	@Override
	public byte[] performSetOfNewAccounts(final AccountID adminID, final PasswordCredential adminCredential,
			final byte[] yamlFile) {
<span class="nc" id="L387">		final PerformSetAccountsRequest request = PerformSetAccountsRequest.newBuilder()</span>
<span class="nc" id="L388">				.setAccountID(Utils.getMsgID(adminID)).setCredential(Utils.getCredential(adminCredential))</span>
<span class="nc" id="L389">				.setYamlBytes(ByteString.copyFrom(yamlFile)).build();</span>
		final PerformSetAccountsResponse response;
<span class="nc" id="L391">		final Function&lt;PerformSetAccountsRequest, PerformSetAccountsResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L392">				.performSetOfNewAccounts(req);</span>
<span class="nc" id="L393">		response = this.&lt;PerformSetAccountsRequest, PerformSetAccountsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L394">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L395">		final byte[] result = response.getResultYamlBytes().toByteArray();</span>
<span class="nc" id="L396">		return result;</span>
	}

	@Override
	public byte[] performSetOfOperations(final AccountID performerID, final PasswordCredential performerCredential,
			final byte[] yamlFile) {
<span class="nc" id="L402">		final PerformSetOperationsRequest request = PerformSetOperationsRequest.newBuilder()</span>
<span class="nc" id="L403">				.setAccountID(Utils.getMsgID(performerID)).setCredential(Utils.getCredential(performerCredential))</span>
<span class="nc" id="L404">				.setYamlBytes(ByteString.copyFrom(yamlFile)).build();</span>

		final PerformSetOperationsResponse response;
<span class="nc" id="L407">		final Function&lt;PerformSetOperationsRequest, PerformSetOperationsResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L408">				.performSetOfOperations(req);</span>
<span class="nc" id="L409">		response = this.&lt;PerformSetOperationsRequest, PerformSetOperationsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L410">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L411">		final byte[] result = response.getResultYamlBytes().toByteArray();</span>
<span class="nc" id="L412">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newAccount(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.accountmgr.Account)
	 */
	@Override
	public AccountID newAccountNoAdmin(final Account newAccount) {
<span class="nc" id="L424">		final String accYaml = CommonYAML.getYamlObject().dump(newAccount);</span>
<span class="nc" id="L425">		final NewAccountNoAdminRequest request = NewAccountNoAdminRequest.newBuilder().setYamlNewAccount(accYaml)</span>
<span class="nc" id="L426">				.build();</span>

		final NewAccountResponse response;
<span class="nc" id="L429">		final Function&lt;NewAccountNoAdminRequest, NewAccountResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L430">				.newAccountNoAdmin(req);</span>

<span class="nc" id="L432">		response = this.&lt;NewAccountNoAdminRequest, NewAccountResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L433">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L434">		return Utils.getAccountID(response.getNewAccountID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newAccount(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.accountmgr.Account)
	 */
	@Override
	public AccountID newAccount(final AccountID adminAccountID, final PasswordCredential adminCredential,
			final Account newAccount) {
<span class="nc" id="L447">		final String accYaml = CommonYAML.getYamlObject().dump(newAccount);</span>
<span class="nc" id="L448">		final NewAccountRequest request = NewAccountRequest.newBuilder().setAdminID(Utils.getMsgID(adminAccountID))</span>
<span class="nc" id="L449">				.setAdmincredential(Utils.getCredential(adminCredential)).setYamlNewAccount(accYaml).build();</span>

		final NewAccountResponse response;
<span class="nc" id="L452">		final Function&lt;NewAccountRequest, NewAccountResponse&gt; f = req -&gt; getBlockingStub().newAccount(req);</span>

<span class="nc" id="L454">		response = this.&lt;NewAccountRequest, NewAccountResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L455">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L456">		return Utils.getAccountID(response.getNewAccountID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getAccountID(java.lang.String)
	 */
	@Override
	public AccountID getAccountID(final String accountName) {

<span class="nc" id="L467">		final GetAccountIDRequest request = GetAccountIDRequest.newBuilder().setAccountName(accountName).build();</span>

		final GetAccountIDResponse response;
<span class="nc" id="L470">		final Function&lt;GetAccountIDRequest, GetAccountIDResponse&gt; f = req -&gt; getBlockingStub().getAccountID(req);</span>
<span class="nc" id="L471">		response = this.&lt;GetAccountIDRequest, GetAccountIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L472">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L473">		return Utils.getAccountID(response.getNewAccountID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getAccountList(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Set&lt;AccountID&gt; getAccountList(final AccountID adminAccountID, final PasswordCredential adminCredential) {
<span class="nc" id="L484">		final GetAccountListRequest request = GetAccountListRequest.newBuilder()</span>
<span class="nc" id="L485">				.setAdminID(Utils.getMsgID(adminAccountID)).setAdmincredential(Utils.getCredential(adminCredential))</span>
<span class="nc" id="L486">				.build();</span>

		final GetAccountListResponse response;
<span class="nc" id="L489">		final Function&lt;GetAccountListRequest, GetAccountListResponse&gt; f = req -&gt; getBlockingStub().getAccountList(req);</span>
<span class="nc" id="L490">		response = this.&lt;GetAccountListRequest, GetAccountListResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L491">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L493">		final Set&lt;AccountID&gt; result = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L494" title="All 2 branches missed.">		for (final String id : response.getAccountIDsList()) {</span>
<span class="nc" id="L495">			result.add(Utils.getAccountID(id));</span>
<span class="nc" id="L496">		}</span>

<span class="nc" id="L498">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newSession(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.util.Set, java.util.Set,
	 * java.lang.String, communication.grpc.messages.common.CommonMessages.Langs)
	 */
	@Override
	public SessionInfo newSession(final AccountID accountID, final PasswordCredential credential,
			final Set&lt;ContractID&gt; contracts, final Set&lt;DataSetID&gt; dataSetIDs, final DataSetID dataSetForStore,
			final Langs newsessionLang) {

<span class="nc" id="L513">		final NewSessionRequest.Builder requestBuilder = NewSessionRequest.newBuilder();</span>
<span class="nc bnc" id="L514" title="All 2 branches missed.">		for (final ContractID conID : contracts) {</span>
<span class="nc" id="L515">			requestBuilder.addContractIDs(Utils.getMsgID(conID));</span>
<span class="nc" id="L516">		}</span>
<span class="nc bnc" id="L517" title="All 2 branches missed.">		for (final DataSetID dataSetID : dataSetIDs) {</span>
<span class="nc" id="L518">			requestBuilder.addDataSetIDs(Utils.getMsgID(dataSetID));</span>
<span class="nc" id="L519">		}</span>
<span class="nc" id="L520">		final NewSessionRequest request = requestBuilder.setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L521">				.setCredential(Utils.getCredential(credential)).setStoreDataSet(Utils.getMsgID(dataSetForStore))</span>
<span class="nc" id="L522">				.setSessionLang(newsessionLang).build();</span>

		final NewSessionResponse response;
<span class="nc" id="L525">		final Function&lt;NewSessionRequest, NewSessionResponse&gt; f = req -&gt; getBlockingStub().newSession(req);</span>
<span class="nc" id="L526">		response = this.&lt;NewSessionRequest, NewSessionResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L527">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L529">		return (SessionInfo) CommonYAML.getYamlObject().load(response.getSessionInfo());</span>
	}

	@Override
	public void closeSession(final SessionID sessionID) {
<span class="nc" id="L534">		final CloseSessionRequest.Builder requestBuilder = CloseSessionRequest.newBuilder();</span>
<span class="nc" id="L535">		requestBuilder.setSessionID(Utils.getMsgID(sessionID));</span>
<span class="nc" id="L536">		final CloseSessionRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L538">		final Function&lt;CloseSessionRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().closeSession(req);</span>
<span class="nc" id="L539">		response = this.&lt;CloseSessionRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L540">		Utils.checkIsExc(response);</span>

<span class="nc" id="L542">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getInfoOfSessionForDS(dataClay.util.ids.SessionID)
	 */
	@Override
	public Tuple&lt;Tuple&lt;DataSetID, Set&lt;DataSetID&gt;&gt;, Calendar&gt; getInfoOfSessionForDS(final SessionID sessionID) {
<span class="nc" id="L552">		final GetInfoOfSessionForDSRequest request = GetInfoOfSessionForDSRequest.newBuilder()</span>
<span class="nc" id="L553">				.setSessionID(Utils.getMsgID(sessionID)).build();</span>

		final GetInfoOfSessionForDSResponse response;
<span class="nc" id="L556">		final Function&lt;GetInfoOfSessionForDSRequest, GetInfoOfSessionForDSResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L557">				.getInfoOfSessionForDS(req);</span>
<span class="nc" id="L558">		response = this.&lt;GetInfoOfSessionForDSRequest, GetInfoOfSessionForDSResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L559">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L561">		final DataSetID dsId = Utils.getDataSetID(response.getDataSetID());</span>
<span class="nc" id="L562">		final Calendar calendar = Calendar.getInstance();</span>
<span class="nc" id="L563">		calendar.setTimeInMillis(response.getDate());</span>
<span class="nc" id="L564">		final Set&lt;DataSetID&gt; datasets = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L565" title="All 2 branches missed.">		for (final String id : response</span>
<span class="nc" id="L566">				.getDataSetIDsList()) {</span>
<span class="nc" id="L567">			datasets.add(Utils.getDataSetID(id));</span>
<span class="nc" id="L568">		}</span>

<span class="nc" id="L570">		return new Tuple&lt;&gt;(new Tuple&lt;&gt;(dsId, datasets), calendar);</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newNamespace(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.namespacemgr.Namespace)
	 */
	@Override
	public NamespaceID newNamespace(final AccountID accountID, final PasswordCredential credential,
			final Namespace newNamespace) {
<span class="nc" id="L583">		final String yaml = CommonYAML.getYamlObject().dump(newNamespace);</span>
<span class="nc" id="L584">		final NewNamespaceRequest request = NewNamespaceRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L585">				.setCredential(Utils.getCredential(credential)).setNewNamespaceYaml(yaml).build();</span>

		final NewNamespaceResponse response;
<span class="nc" id="L588">		final Function&lt;NewNamespaceRequest, NewNamespaceResponse&gt; f = req -&gt; getBlockingStub().newNamespace(req);</span>
<span class="nc" id="L589">		response = this.&lt;NewNamespaceRequest, NewNamespaceResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L590">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L591">		return Utils.getNamespaceID(response.getNamespaceID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#removeNamespace(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String)
	 */
	@Override
	public void removeNamespace(final AccountID accountID, final PasswordCredential credential,
			final String namespaceName) {
<span class="nc" id="L603">		final RemoveNamespaceRequest request = RemoveNamespaceRequest.newBuilder()</span>
<span class="nc" id="L604">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L605">				.setNamespaceName(namespaceName).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L607">		final Function&lt;RemoveNamespaceRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().removeNamespace(req);</span>
<span class="nc" id="L608">		response = this.&lt;RemoveNamespaceRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L609">		Utils.checkIsExc(response);</span>
<span class="nc" id="L610">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getNamespaces(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Set&lt;String&gt; getNamespaces(final AccountID accountID, final PasswordCredential credential) {
<span class="nc" id="L620">		final GetNamespacesRequest request = GetNamespacesRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L621">				.setCredential(Utils.getCredential(credential)).build();</span>
		final GetNamespacesResponse response;
<span class="nc" id="L623">		final Function&lt;GetNamespacesRequest, GetNamespacesResponse&gt; f = req -&gt; getBlockingStub().getNamespaces(req);</span>
<span class="nc" id="L624">		response = this.&lt;GetNamespacesRequest, GetNamespacesResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L625">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L626">		final Set&lt;String&gt; result = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L627" title="All 2 branches missed.">		for (final String namespace : response.getNamespacesList()) {</span>
<span class="nc" id="L628">			result.add(namespace);</span>
<span class="nc" id="L629">		}</span>
<span class="nc" id="L630">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getNamespaceID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String)
	 */
	@Override
	public NamespaceID getNamespaceID(final AccountID accountID, final PasswordCredential credential,
			final String namespaceName) {
<span class="nc" id="L642">		final GetNamespaceIDRequest request = GetNamespaceIDRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L643">				.setCredential(Utils.getCredential(credential)).setNamespaceName(namespaceName).build();</span>
		final GetNamespaceIDResponse response;
<span class="nc" id="L645">		final Function&lt;GetNamespaceIDRequest, GetNamespaceIDResponse&gt; f = req -&gt; getBlockingStub().getNamespaceID(req);</span>
<span class="nc" id="L646">		response = this.&lt;GetNamespaceIDRequest, GetNamespaceIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L647">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L649">		return Utils.getNamespaceID(response.getNamespaceID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getNamespaceID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String)
	 */
	@Override
	public Langs getNamespaceLang(final AccountID accountID, final PasswordCredential credential,
			final String namespaceName) {
<span class="nc" id="L661">		final GetNamespaceLangRequest request = GetNamespaceLangRequest.newBuilder()</span>
<span class="nc" id="L662">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L663">				.setNamespaceName(namespaceName).build();</span>
		final GetNamespaceLangResponse response;
<span class="nc" id="L665">		final Function&lt;GetNamespaceLangRequest, GetNamespaceLangResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L666">				.getNamespaceLang(req);</span>
<span class="nc" id="L667">		response = this.&lt;GetNamespaceLangRequest, GetNamespaceLangResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L668">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L669">		return response.getLanguage();</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getObjectDataSetID(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID)
	 */
	@Override
	public DataSetID getObjectDataSetID(final SessionID sessionID, final ObjectID oid) {
<span class="nc" id="L680">		final GetObjectDataSetIDRequest request = GetObjectDataSetIDRequest.newBuilder()</span>
<span class="nc" id="L681">				.setSessionID(Utils.getMsgID(sessionID)).setObjectID(Utils.getMsgID(oid)).build();</span>
		final GetObjectDataSetIDResponse response;
<span class="nc" id="L683">		final Function&lt;GetObjectDataSetIDRequest, GetObjectDataSetIDResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L684">				.getObjectDataSetID(req);</span>
<span class="nc" id="L685">		response = this.&lt;GetObjectDataSetIDRequest, GetObjectDataSetIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L686">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L687">		return Utils.getDataSetID(response.getDataSetID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#importInterface(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * util.ids.ContractID, util.ids.InterfaceID)
	 */
	@Override
	public void importInterface(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final ContractID contractID, final InterfaceID interfaceID) {
<span class="nc" id="L700">		final ImportInterfaceRequest request = ImportInterfaceRequest.newBuilder()</span>
<span class="nc" id="L701">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L702">				.setNamespaceID(Utils.getMsgID(namespaceID)).setContractID(Utils.getMsgID(contractID))</span>
<span class="nc" id="L703">				.setInterfaceID(Utils.getMsgID(interfaceID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L705">		final Function&lt;ImportInterfaceRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().importInterface(req);</span>
<span class="nc" id="L706">		response = this.&lt;ImportInterfaceRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L707">		Utils.checkIsExc(response);</span>
<span class="nc" id="L708">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#importContract(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * util.ids.ContractID)
	 */
	@Override
	public void importContract(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final ContractID contractID) {
<span class="nc" id="L720">		final ImportContractRequest request = ImportContractRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L721">				.setCredential(Utils.getCredential(credential)).setNamespaceID(Utils.getMsgID(namespaceID))</span>
<span class="nc" id="L722">				.setContractID(Utils.getMsgID(contractID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L724">		final Function&lt;ImportContractRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().importContract(req);</span>
<span class="nc" id="L725">		response = this.&lt;ImportContractRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L726">		Utils.checkIsExc(response);</span>

<span class="nc" id="L728">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newDataSet(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.datasetmgr.DataSet)
	 */
	@Override
	public DataSetID newDataSet(final AccountID accountID, final PasswordCredential credential, final DataSet dataset) {
<span class="nc" id="L739">		final String yaml = CommonYAML.getYamlObject().dump(dataset);</span>
<span class="nc" id="L740">		final NewDataSetRequest request = NewDataSetRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L741">				.setCredential(Utils.getCredential(credential)).setDataSetYaml(yaml).build();</span>

		final NewDataSetResponse response;
<span class="nc" id="L744">		final Function&lt;NewDataSetRequest, NewDataSetResponse&gt; f = req -&gt; getBlockingStub().newDataSet(req);</span>
<span class="nc" id="L745">		response = this.&lt;NewDataSetRequest, NewDataSetResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L746">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L747">		return Utils.getDataSetID(response.getDataSetID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#removeDataSet(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String)
	 */
	@Override
	public void removeDataSet(final AccountID accountID, final PasswordCredential credential,
			final String datasetName) {
<span class="nc" id="L759">		final RemoveDataSetRequest request = RemoveDataSetRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L760">				.setCredential(Utils.getCredential(credential)).setDataSetName(datasetName).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L762">		final Function&lt;RemoveDataSetRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().removeDataSet(req);</span>
<span class="nc" id="L763">		response = this.&lt;RemoveDataSetRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L764">		Utils.checkIsExc(response);</span>

<span class="nc" id="L766">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getDataSetID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.lang.String)
	 */
	@Override
	public DataSetID getDataSetID(final AccountID accountID, final PasswordCredential credential,
			final String datasetName) {
<span class="nc" id="L777">		final GetDataSetIDRequest request = GetDataSetIDRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L778">				.setCredential(Utils.getCredential(credential)).setDataSetName(datasetName).build();</span>
		final GetDataSetIDResponse response;
<span class="nc" id="L780">		final Function&lt;GetDataSetIDRequest, GetDataSetIDResponse&gt; f = req -&gt; getBlockingStub().getDataSetID(req);</span>
<span class="nc" id="L781">		response = this.&lt;GetDataSetIDRequest, GetDataSetIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L782">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L783">		return Utils.getDataSetID(response.getDataSetID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#checkDataSetIsPublic(dataClay.util.ids.DataSetID)
	 */
	@Override
	public boolean checkDataSetIsPublic(final es.bsc.dataclay.util.ids.DataSetID dataSetID) {
<span class="nc" id="L794">		final CheckDataSetIsPublicRequest request = CheckDataSetIsPublicRequest.newBuilder()</span>
<span class="nc" id="L795">				.setDataSetID(Utils.getMsgID(dataSetID)).build();</span>
		final CheckDataSetIsPublicResponse response;
<span class="nc" id="L797">		final Function&lt;CheckDataSetIsPublicRequest, CheckDataSetIsPublicResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L798">				.checkDataSetIsPublic(req);</span>
<span class="nc" id="L799">		response = this.&lt;CheckDataSetIsPublicRequest, CheckDataSetIsPublicResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L800">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L801">		return response.getIsPublic();</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getPublicDataSets(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Set&lt;String&gt; getPublicDataSets(final AccountID accountID, final PasswordCredential credential) {
<span class="nc" id="L812">		final GetPublicDataSetsRequest request = GetPublicDataSetsRequest.newBuilder()</span>
<span class="nc" id="L813">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential)).build();</span>
		final GetPublicDataSetsResponse response;
<span class="nc" id="L815">		final Function&lt;GetPublicDataSetsRequest, GetPublicDataSetsResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L816">				.getPublicDataSets(req);</span>
<span class="nc" id="L817">		response = this.&lt;GetPublicDataSetsRequest, GetPublicDataSetsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L818">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L819">		final Set&lt;String&gt; result = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L820" title="All 2 branches missed.">		for (final String dataSetName : response.getDataSetsList()) {</span>
<span class="nc" id="L821">			result.add(dataSetName);</span>
<span class="nc" id="L822">		}</span>
<span class="nc" id="L823">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getPublicDataSets(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Set&lt;String&gt; getAccountDataSets(final AccountID accountID, final PasswordCredential credential) {
<span class="nc" id="L834">		final GetAccountDataSetsRequest request = GetAccountDataSetsRequest.newBuilder()</span>
<span class="nc" id="L835">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential)).build();</span>
		final GetAccountDataSetsResponse response;
<span class="nc" id="L837">		final Function&lt;GetAccountDataSetsRequest, GetAccountDataSetsResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L838">				.getAccountDataSets(req);</span>
<span class="nc" id="L839">		response = this.&lt;GetAccountDataSetsRequest, GetAccountDataSetsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L840">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L841">		final Set&lt;String&gt; result = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L842" title="All 2 branches missed.">		for (final String dataSetName : response.getDataSetsList()) {</span>
<span class="nc" id="L843">			result.add(dataSetName);</span>
<span class="nc" id="L844">		}</span>
<span class="nc" id="L845">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newClass(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * communication.grpc.messages.common.CommonMessages.Langs, java.util.Map)
	 */
	@Override
	public Map&lt;String, MetaClass&gt; newClass(final AccountID accountID, final PasswordCredential credential,
			final Langs language, final Map&lt;String, MetaClass&gt; newClasses) {

<span class="nc" id="L859">		final NewClassRequest.Builder builder = NewClassRequest.newBuilder();</span>
<span class="nc" id="L860">		builder.setAccountID(Utils.getMsgID(accountID));</span>
<span class="nc" id="L861">		builder.setCredential(Utils.getCredential(credential));</span>
<span class="nc" id="L862">		builder.setLanguage(language);</span>
<span class="nc bnc" id="L863" title="All 2 branches missed.">		for (final Entry&lt;String, MetaClass&gt; entry : newClasses.entrySet()) {</span>
<span class="nc" id="L864">			final String yaml = CommonYAML.getYamlObject().dump(entry.getValue());</span>
<span class="nc" id="L865">			builder.putNewClasses(entry.getKey(), yaml);</span>
<span class="nc" id="L866">		}</span>
<span class="nc" id="L867">		final NewClassRequest request = builder.build();</span>
		final NewClassResponse response;
<span class="nc" id="L869">		final Function&lt;NewClassRequest, NewClassResponse&gt; f = req -&gt; getBlockingStub().newClass(req);</span>
<span class="nc" id="L870">		response = this.&lt;NewClassRequest, NewClassResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L871">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L872">		final Map&lt;String, MetaClass&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L873" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getNewClassesMap().entrySet()) {</span>
<span class="nc" id="L874">			final MetaClass clazz = (MetaClass) CommonYAML.getYamlObject().load(entry.getValue());</span>
<span class="nc" id="L875">			result.put(entry.getKey(), clazz);</span>
<span class="nc" id="L876">		}</span>
<span class="nc" id="L877">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#removeClass(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String)
	 */
	@Override
	public void removeClass(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className) {
<span class="nc" id="L890">		final RemoveClassRequest request = RemoveClassRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L891">				.setCredential(Utils.getCredential(credential)).setClassName(className).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L893">		final Function&lt;RemoveClassRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().removeClass(req);</span>
<span class="nc" id="L894">		response = this.&lt;RemoveClassRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L895">		Utils.checkIsExc(response);</span>

<span class="nc" id="L897">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#removeOperation(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String, java.lang.String)
	 */
	@Override
	public void removeOperation(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className, final String operationSignature) {
<span class="nc" id="L909">		final RemoveOperationRequest request = RemoveOperationRequest.newBuilder()</span>
<span class="nc" id="L910">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L911">				.setNamespaceID(Utils.getMsgID(namespaceID)).setClassName(className)</span>
<span class="nc" id="L912">				.setOperationNameAndSignature(operationSignature).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L914">		final Function&lt;RemoveOperationRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().removeOperation(req);</span>
<span class="nc" id="L915">		response = this.&lt;RemoveOperationRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L916">		Utils.checkIsExc(response);</span>
<span class="nc" id="L917">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#removeImplementation(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * util.ids.ImplementationID)
	 */
	@Override
	public void removeImplementation(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final ImplementationID implementationID) {
<span class="nc" id="L930">		final RemoveImplementationRequest request = RemoveImplementationRequest.newBuilder()</span>
<span class="nc" id="L931">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L932">				.setNamespaceID(Utils.getMsgID(namespaceID)).setImplementationID(Utils.getMsgID(implementationID))</span>
<span class="nc" id="L933">				.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L935">		final Function&lt;RemoveImplementationRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L936">				.removeImplementation(req);</span>
<span class="nc" id="L937">		response = this.&lt;RemoveImplementationRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L938">		Utils.checkIsExc(response);</span>

<span class="nc" id="L940">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getOperationID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String, java.lang.String)
	 */
	@Override
	public OperationID getOperationID(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className, final String operationSignature) {
<span class="nc" id="L952">		final GetOperationIDRequest request = GetOperationIDRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L953">				.setCredential(Utils.getCredential(credential)).setClassName(className)</span>
<span class="nc" id="L954">				.setOperationNameAndSignature(operationSignature).build();</span>
		final GetOperationIDResponse response;
<span class="nc" id="L956">		final Function&lt;GetOperationIDRequest, GetOperationIDResponse&gt; f = req -&gt; getBlockingStub().getOperationID(req);</span>
<span class="nc" id="L957">		response = this.&lt;GetOperationIDRequest, GetOperationIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L958">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L959">		return Utils.getOperationID(response.getOperationID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getPropertyID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String, java.lang.String)
	 */
	@Override
	public PropertyID getPropertyID(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className, final String propertyName) {
<span class="nc" id="L972">		final GetPropertyIDRequest request = GetPropertyIDRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L973">				.setCredential(Utils.getCredential(credential)).setNamespaceID(Utils.getMsgID(namespaceID))</span>
<span class="nc" id="L974">				.setClassName(className).setPropertyName(propertyName).build();</span>
		final GetPropertyIDResponse response;
<span class="nc" id="L976">		final Function&lt;GetPropertyIDRequest, GetPropertyIDResponse&gt; f = req -&gt; getBlockingStub().getPropertyID(req);</span>
<span class="nc" id="L977">		response = this.&lt;GetPropertyIDRequest, GetPropertyIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L978">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L979">		return Utils.getPropertyID(response.getPropertyID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getClassID(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String)
	 */
	@Override
	public MetaClassID getClassID(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className) {
<span class="nc" id="L992">		final GetClassIDRequest request = GetClassIDRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L993">				.setCredential(Utils.getCredential(credential)).setNamespaceID(Utils.getMsgID(namespaceID))</span>
<span class="nc" id="L994">				.setClassName(className).build();</span>
		final GetClassIDResponse response;
<span class="nc" id="L996">		final Function&lt;GetClassIDRequest, GetClassIDResponse&gt; f = req -&gt; getBlockingStub().getClassID(req);</span>
<span class="nc" id="L997">		response = this.&lt;GetClassIDRequest, GetClassIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L998">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L999">		return Utils.getMetaClassID(response.getClassID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getClassInfo(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * java.lang.String)
	 */
	@Override
	public MetaClass getClassInfo(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final String className) {
<span class="nc" id="L1012">		final GetClassInfoRequest request = GetClassInfoRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L1013">				.setCredential(Utils.getCredential(credential)).setNamespaceID(Utils.getMsgID(namespaceID))</span>
<span class="nc" id="L1014">				.setClassName(className).build();</span>
		final GetClassInfoResponse response;
<span class="nc" id="L1016">		final Function&lt;GetClassInfoRequest, GetClassInfoResponse&gt; f = req -&gt; getBlockingStub().getClassInfo(req);</span>
<span class="nc" id="L1017">		response = this.&lt;GetClassInfoRequest, GetClassInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1018">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1019">		final MetaClass result = (MetaClass) CommonYAML.getYamlObject().load(response.getMetaClassYaml());</span>
<span class="nc" id="L1020">		return result;</span>

	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getInfoOfClassesInNamespace(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.NamespaceID)
	 */
	@Override
	public Map&lt;MetaClassID, MetaClass&gt; getInfoOfClassesInNamespace(final AccountID accountID,
			final PasswordCredential credential, final NamespaceID namespaceID) {
<span class="nc" id="L1034">		final GetInfoOfClassesInNamespaceRequest request = GetInfoOfClassesInNamespaceRequest.newBuilder()</span>
<span class="nc" id="L1035">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1036">				.setNamespaceID(Utils.getMsgID(namespaceID)).build();</span>
<span class="nc" id="L1037">		GetInfoOfClassesInNamespaceResponse response = null;</span>
<span class="nc" id="L1038">		final Function&lt;GetInfoOfClassesInNamespaceRequest, GetInfoOfClassesInNamespaceResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1039">				.getInfoOfClassesInNamespace(req);</span>
<span class="nc" id="L1040">		response = this</span>
<span class="nc" id="L1041">				.&lt;GetInfoOfClassesInNamespaceRequest, GetInfoOfClassesInNamespaceResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1042">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1043">		final Map&lt;MetaClassID, MetaClass&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1044" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getClassesInfoMap().entrySet()) {</span>
<span class="nc" id="L1045">			final MetaClass clazz = (MetaClass) CommonYAML.getYamlObject().load(entry.getValue());</span>
<span class="nc" id="L1046">			result.put(Utils.getMetaClassID(entry.getKey()), clazz);</span>
<span class="nc" id="L1047">		}</span>
<span class="nc" id="L1048">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newContract(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.contractmgr.Contract)
	 */
	@Override
	public ContractID newContract(final AccountID accountID, final PasswordCredential credential,
			final Contract newContract) {
<span class="nc" id="L1061">		final String yaml = CommonYAML.getYamlObject().dump(newContract);</span>
<span class="nc" id="L1062">		final NewContractRequest request = NewContractRequest.newBuilder().setAccountID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L1063">				.setCredential(Utils.getCredential(credential)).setNewContractYaml(yaml).build();</span>

		final NewContractResponse response;
<span class="nc" id="L1066">		final Function&lt;NewContractRequest, NewContractResponse&gt; f = req -&gt; getBlockingStub().newContract(req);</span>
<span class="nc" id="L1067">		response = this.&lt;NewContractRequest, NewContractResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1068">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1069">		return Utils.getContractID(response.getContractID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#registerToPublicContract(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.ContractID)
	 */
	@Override
	public void registerToPublicContract(final AccountID accountID, final PasswordCredential credential,
			final ContractID contractID) {
<span class="nc" id="L1082">		final RegisterToPublicContractRequest request = RegisterToPublicContractRequest.newBuilder()</span>
<span class="nc" id="L1083">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1084">				.setContractID(Utils.getMsgID(contractID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1086">		final Function&lt;RegisterToPublicContractRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1087">				.registerToPublicContract(req);</span>
<span class="nc" id="L1088">		response = this.&lt;RegisterToPublicContractRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1089">		Utils.checkIsExc(response);</span>

<span class="nc" id="L1091">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#registerToPublicContractOfNamespace(dataClay.util.
	 * ids.AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.NamespaceID)
	 */
	@Override
	public ContractID registerToPublicContractOfNamespace(final AccountID accountID,
			final PasswordCredential credential, final NamespaceID namespaceID) {
		final RegisterToPublicContractOfNamespaceResponse response;
		final RegisterToPublicContractOfNamespaceRequest request = RegisterToPublicContractOfNamespaceRequest
<span class="nc" id="L1106">				.newBuilder().setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1107">				.setNamespaceID(Utils.getMsgID(namespaceID)).build();</span>
<span class="nc" id="L1108">		final Function&lt;RegisterToPublicContractOfNamespaceRequest, RegisterToPublicContractOfNamespaceResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1109">				.registerToPublicContractOfNamespace(req);</span>
<span class="nc" id="L1110">		response = this</span>
<span class="nc" id="L1111">				.&lt;RegisterToPublicContractOfNamespaceRequest, RegisterToPublicContractOfNamespaceResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1113">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1114">		return Utils.getContractID(response.getContractID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getContractIDsOfApplicant(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Map&lt;ContractID, Contract&gt; getContractIDsOfApplicant(final AccountID applicantAccountID,
			final PasswordCredential credential) {
<span class="nc" id="L1126">		final GetContractIDsOfApplicantRequest request = GetContractIDsOfApplicantRequest.newBuilder()</span>
<span class="nc" id="L1127">				.setApplicantID(Utils.getMsgID(applicantAccountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1128">				.build();</span>
		final GetContractIDsOfApplicantResponse response;
<span class="nc" id="L1130">		final Function&lt;GetContractIDsOfApplicantRequest, GetContractIDsOfApplicantResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1131">				.getContractIDsOfApplicant(req);</span>
<span class="nc" id="L1132">		response = this.&lt;GetContractIDsOfApplicantRequest, GetContractIDsOfApplicantResponse&gt;callLogicModule(request,</span>
				f);
<span class="nc" id="L1134">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1136">		final Map&lt;ContractID, Contract&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1137" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getContractsMap().entrySet()) {</span>
<span class="nc" id="L1138">			result.put(Utils.getContractID(entry.getKey()),</span>
<span class="nc" id="L1139">					(Contract) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1140">		}</span>
<span class="nc" id="L1141">		return result;</span>

	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getContractIDsOfProvider(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.NamespaceID)
	 */
	@Override
	public Map&lt;ContractID, Contract&gt; getContractIDsOfProvider(final AccountID accountID,
			final PasswordCredential credential, final NamespaceID namespaceIDofProvider) {
<span class="nc" id="L1155">		final GetContractIDsOfProviderRequest request = GetContractIDsOfProviderRequest.newBuilder()</span>
<span class="nc" id="L1156">				.setProviderID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1157">				.setNamespaceIDOfProvider(Utils.getMsgID(namespaceIDofProvider)).build();</span>
		final GetContractIDsOfProviderResponse response;
<span class="nc" id="L1159">		final Function&lt;GetContractIDsOfProviderRequest, GetContractIDsOfProviderResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1160">				.getContractIDsOfProvider(req);</span>
<span class="nc" id="L1161">		response = this.&lt;GetContractIDsOfProviderRequest, GetContractIDsOfProviderResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1162">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1164">		final Map&lt;ContractID, Contract&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1165" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getContractsMap().entrySet()) {</span>
<span class="nc" id="L1166">			result.put(Utils.getContractID(entry.getKey()),</span>
<span class="nc" id="L1167">					(Contract) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1168">		}</span>
<span class="nc" id="L1169">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getContractIDsOfApplicantWithProvider(dataClay.util.
	 * ids.AccountID, util.management.accountmgr.Credential, util.ids.NamespaceID)
	 */
	@Override
	public Map&lt;ContractID, Contract&gt; getContractIDsOfApplicantWithProvider(final AccountID applicantAccountID,
			final PasswordCredential credential, final NamespaceID namespaceIDofProvider) {
<span class="nc" id="L1182">		final GetContractsOfApplicantWithProvRequest request = GetContractsOfApplicantWithProvRequest.newBuilder()</span>
<span class="nc" id="L1183">				.setApplicantID(Utils.getMsgID(applicantAccountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1184">				.setNamespaceIDOfProvider(Utils.getMsgID(namespaceIDofProvider)).build();</span>
		final GetContractsOfApplicantWithProvResponse response;
<span class="nc" id="L1186">		final Function&lt;GetContractsOfApplicantWithProvRequest, GetContractsOfApplicantWithProvResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1187">				.getContractIDsOfApplicantWithProvider(req);</span>
<span class="nc" id="L1188">		response = this</span>
<span class="nc" id="L1189">				.&lt;GetContractsOfApplicantWithProvRequest, GetContractsOfApplicantWithProvResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1191">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1193">		final Map&lt;ContractID, Contract&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1194" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getContractsMap().entrySet()) {</span>
<span class="nc" id="L1195">			result.put(Utils.getContractID(entry.getKey()),</span>
<span class="nc" id="L1196">					(Contract) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1197">		}</span>
<span class="nc" id="L1198">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newDataContract(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.datacontractmgr.DataContract)
	 */
	@Override
	public DataContractID newDataContract(final AccountID accountID, final PasswordCredential credential,
			final DataContract newDataContract) {
<span class="nc" id="L1211">		final String yaml = CommonYAML.getYamlObject().dump(newDataContract);</span>
<span class="nc" id="L1212">		final NewDataContractRequest request = NewDataContractRequest.newBuilder()</span>
<span class="nc" id="L1213">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1214">				.setDataContractYaml(yaml).build();</span>

		final NewDataContractResponse response;
<span class="nc" id="L1217">		final Function&lt;NewDataContractRequest, NewDataContractResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1218">				.newDataContract(req);</span>
<span class="nc" id="L1219">		response = this.&lt;NewDataContractRequest, NewDataContractResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1220">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1221">		return Utils.getDataContractID(response.getDataContractID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#registerToPublicDataContract(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.DataContractID)
	 */
	@Override
	public void registerToPublicDataContract(final AccountID accountID, final PasswordCredential credential,
			final DataContractID datacontractID) {
<span class="nc" id="L1234">		final RegisterToPublicDataContractRequest request = RegisterToPublicDataContractRequest.newBuilder()</span>
<span class="nc" id="L1235">				.setAccountID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1236">				.setDataContractID(Utils.getMsgID(datacontractID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1238">		final Function&lt;RegisterToPublicDataContractRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1239">				.registerToPublicDataContract(req);</span>
<span class="nc" id="L1240">		response = this.&lt;RegisterToPublicDataContractRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1241">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1242">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getDataContractIDsOfProvider(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.ids.DataSetID)
	 */
	@Override
	public Map&lt;DataContractID, DataContract&gt; getDataContractIDsOfProvider(final AccountID accountID,
			final PasswordCredential credential, final DataSetID datasetIDofProvider) {
<span class="nc" id="L1254">		final GetDataContractIDsOfProviderRequest request = GetDataContractIDsOfProviderRequest.newBuilder()</span>
<span class="nc" id="L1255">				.setProviderID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1256">				.setDataSetIDOfProvider(Utils.getMsgID(datasetIDofProvider)).build();</span>
		final GetDataContractIDsOfProviderResponse response;
<span class="nc" id="L1258">		final Function&lt;GetDataContractIDsOfProviderRequest, GetDataContractIDsOfProviderResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1259">				.getDataContractIDsOfProvider(req);</span>
<span class="nc" id="L1260">		response = this</span>
<span class="nc" id="L1261">				.&lt;GetDataContractIDsOfProviderRequest, GetDataContractIDsOfProviderResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1262">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1264">		final Map&lt;DataContractID, DataContract&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1265" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getDatacontractsMap().entrySet()) {</span>
<span class="nc" id="L1266">			result.put(Utils.getDataContractID(entry.getKey()),</span>
<span class="nc" id="L1267">					(DataContract) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1268">		}</span>
<span class="nc" id="L1269">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getDataContractIDsOfApplicant(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Map&lt;DataContractID, DataContract&gt; getDataContractIDsOfApplicant(final AccountID applicantAccountID,
			final PasswordCredential credential) {
<span class="nc" id="L1282">		final GetDataContractIDsOfApplicantRequest request = GetDataContractIDsOfApplicantRequest.newBuilder()</span>
<span class="nc" id="L1283">				.setApplicantID(Utils.getMsgID(applicantAccountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1284">				.build();</span>
		final GetDataContractIDsOfApplicantResponse response;
<span class="nc" id="L1286">		final Function&lt;GetDataContractIDsOfApplicantRequest, GetDataContractIDsOfApplicantResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1287">				.getDataContractIDsOfApplicant(req);</span>
<span class="nc" id="L1288">		response = this.&lt;GetDataContractIDsOfApplicantRequest, GetDataContractIDsOfApplicantResponse&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L1290">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1292">		final Map&lt;DataContractID, DataContract&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1293" title="All 2 branches missed.">		for (final Entry&lt;String, String&gt; entry : response.getDatacontractsMap().entrySet()) {</span>
<span class="nc" id="L1294">			result.put(Utils.getDataContractID(entry.getKey()),</span>
<span class="nc" id="L1295">					(DataContract) CommonYAML.getYamlObject().load(entry.getValue()));</span>
<span class="nc" id="L1296">		}</span>
<span class="nc" id="L1297">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getDataContractInfoOfApplicantWithProvider(dataClay.
	 * util.ids.AccountID, util.management.accountmgr.Credential,
	 * util.ids.DataSetID)
	 */
	@Override
	public DataContract getDataContractInfoOfApplicantWithProvider(final AccountID applicantAccountID,
			final PasswordCredential credential, final DataSetID datasetIDofProvider) {
		final GetDataContractInfoOfApplicantWithProvRequest request = GetDataContractInfoOfApplicantWithProvRequest
<span class="nc" id="L1312">				.newBuilder().setApplicantID(Utils.getMsgID(applicantAccountID))</span>
<span class="nc" id="L1313">				.setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1314">				.setDataSetIDOfProvider(Utils.getMsgID(datasetIDofProvider)).build();</span>
		final GetDataContractInfoOfApplicantWithProvResponse response;
<span class="nc" id="L1316">		final Function&lt;GetDataContractInfoOfApplicantWithProvRequest, GetDataContractInfoOfApplicantWithProvResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1317">				.getDataContractInfoOfApplicantWithProvider(req);</span>
<span class="nc" id="L1318">		response = this</span>
<span class="nc" id="L1319">				.&lt;GetDataContractInfoOfApplicantWithProvRequest, GetDataContractInfoOfApplicantWithProvResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1321">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1323">		return (DataContract) CommonYAML.getYamlObject().load(response.getDataContractInfo());</span>

	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#newInterface(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * util.management.interfacemgr.Interface)
	 */
	@Override
	public InterfaceID newInterface(final AccountID accountID, final PasswordCredential credential,
			final Interface newInterface) {
<span class="nc" id="L1337">		final String yaml = CommonYAML.getYamlObject().dump(newInterface);</span>
<span class="nc" id="L1338">		final NewInterfaceRequest request = NewInterfaceRequest.newBuilder().setApplicantID(Utils.getMsgID(accountID))</span>
<span class="nc" id="L1339">				.setCredential(Utils.getCredential(credential)).setInterfaceYaml(yaml).build();</span>

		final NewInterfaceResponse response;
<span class="nc" id="L1342">		final Function&lt;NewInterfaceRequest, NewInterfaceResponse&gt; f = req -&gt; getBlockingStub().newInterface(req);</span>
<span class="nc" id="L1343">		response = this.&lt;NewInterfaceRequest, NewInterfaceResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1344">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1345">		return Utils.getInterfaceID(response.getInterfaceID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getInterfaceInfo(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.InterfaceID)
	 */
	@Override
	public Interface getInterfaceInfo(final AccountID accountID, final PasswordCredential credential,
			final InterfaceID interfaceID) {
<span class="nc" id="L1357">		final GetInterfaceInfoRequest request = GetInterfaceInfoRequest.newBuilder()</span>
<span class="nc" id="L1358">				.setApplicantID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1359">				.setInterfaceID(Utils.getMsgID(interfaceID)).build();</span>

		final GetInterfaceInfoResponse response;
<span class="nc" id="L1362">		final Function&lt;GetInterfaceInfoRequest, GetInterfaceInfoResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1363">				.getInterfaceInfo(req);</span>
<span class="nc" id="L1364">		response = this.&lt;GetInterfaceInfoRequest, GetInterfaceInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1365">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1366">		return (Interface) CommonYAML.getYamlObject().load(response.getInterfaceYaml());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#removeInterface(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, util.ids.NamespaceID,
	 * util.ids.InterfaceID)
	 */
	@Override
	public void removeInterface(final AccountID accountID, final PasswordCredential credential,
			final NamespaceID namespaceID, final InterfaceID interfaceID) {
<span class="nc" id="L1379">		final RemoveInterfaceRequest request = RemoveInterfaceRequest.newBuilder()</span>
<span class="nc" id="L1380">				.setApplicantID(Utils.getMsgID(accountID)).setCredential(Utils.getCredential(credential))</span>
<span class="nc" id="L1381">				.setNamespaceID(Utils.getMsgID(namespaceID)).setInterfaceID(Utils.getMsgID(interfaceID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1383">		final Function&lt;RemoveInterfaceRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().removeInterface(req);</span>
<span class="nc" id="L1384">		response = this.&lt;RemoveInterfaceRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1385">		Utils.checkIsExc(response);</span>

<span class="nc" id="L1387">	}</span>



	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getStorageLocationForDS(dataClay.util.ids.
	 * StorageLocationID)
	 */
	@Override
	public StorageLocation getStorageLocationInfo(final StorageLocationID backendID, final boolean fromBackend) {
<span class="nc" id="L1399">		final GetStorageLocationInfoRequest request = GetStorageLocationInfoRequest.newBuilder()</span>
<span class="nc" id="L1400">				.setStorageLocationID(Utils.getMsgID(backendID)).setFromBackend(fromBackend).build();</span>
		final GetStorageLocationInfoResponse response;
<span class="nc" id="L1402">		final Function&lt;GetStorageLocationInfoRequest, GetStorageLocationInfoResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1403">				.getStorageLocationInfo(req);</span>
<span class="nc" id="L1404">		response = this.&lt;GetStorageLocationInfoRequest, GetStorageLocationInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1405">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1406">		return Utils.getStorageLocation(response.getStorageLocationInfo());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getExecutionEnvironmentForDS(dataClay.util.ids.
	 * ExecutionEnvironmentID)
	 */
	@Override
	public ExecutionEnvironment getExecutionEnvironmentInfo(final ExecutionEnvironmentID backendID,
															final boolean fromBackend) {
<span class="nc" id="L1418">		final GetExecutionEnvironmentInfoRequest request = GetExecutionEnvironmentInfoRequest.newBuilder()</span>
<span class="nc" id="L1419">				.setExecEnvID(Utils.getMsgID(backendID)).setFromBackend(fromBackend).build();</span>
		final GetExecutionEnvironmentInfoResponse response;
<span class="nc" id="L1421">		final Function&lt;GetExecutionEnvironmentInfoRequest, GetExecutionEnvironmentInfoResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1422">				.getExecutionEnvironmentInfo(req);</span>
<span class="nc" id="L1423">		response = this</span>
<span class="nc" id="L1424">				.&lt;GetExecutionEnvironmentInfoRequest, GetExecutionEnvironmentInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1425">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1426">		return Utils.getExecutionEnvironment(response.getExecutionEnvironmentInfo());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getDataClayID()
	 */
	@Override
	public DataClayInstanceID getDataClayID() {
		final GetDataClayIDResponse response;
<span class="nc" id="L1437">		final Function&lt;EmptyMessage, GetDataClayIDResponse&gt; f = req -&gt; getBlockingStub().getDataClayID(req);</span>
<span class="nc" id="L1438">		response = this.&lt;EmptyMessage, GetDataClayIDResponse&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L1439">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1440">		return Utils.getDataClayInstanceID(response.getDataClayID());</span>
	}




	/*
	 * (non-Javadoc)
	 *
	 * @see logic.api.LogicModuleAPI#getExternalDataClayInfo(dataClay.util.ids.
	 * DataClayInstanceID)
	 */
	@Override
	public DataClayInstance getExternalDataClayInfo(final DataClayInstanceID extDataClayID) {
<span class="nc" id="L1454">		final GetExtDataClayInfoRequest request = GetExtDataClayInfoRequest.newBuilder()</span>
<span class="nc" id="L1455">				.setExtDataClayID(Utils.getMsgID(extDataClayID)).build();</span>
		final GetExtDataClayInfoResponse response;
<span class="nc" id="L1457">		final Function&lt;GetExtDataClayInfoRequest, GetExtDataClayInfoResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1458">				.getExternalDataClayInfo(req);</span>
<span class="nc" id="L1459">		response = this.&lt;GetExtDataClayInfoRequest, GetExtDataClayInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1460">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1461">		return Utils.getDataClayInstance(response.getExtDataClayInfo());</span>
	}


	@Override
	public DataClayInstanceID getExternalDataClayID(final String dcHost, final int dcPort) {
<span class="nc" id="L1467">		final GetExternalDataclayIDRequest request = GetExternalDataclayIDRequest.newBuilder().setHost(dcHost)</span>
<span class="nc" id="L1468">				.setPort(dcPort).build();</span>
		final GetExternalDataclayIDResponse response;
<span class="nc" id="L1470">		final Function&lt;GetExternalDataclayIDRequest, GetExternalDataclayIDResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1471">				.getExternalDataclayId(req);</span>
<span class="nc" id="L1472">		response = this.&lt;GetExternalDataclayIDRequest, GetExternalDataclayIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1473">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1474">		return Utils.getDataClayInstanceID(response.getExtDataClayID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#registerExternalDataClay(dataClay.util.ids.
	 * DataClayInstanceID String, String, int)
	 */
	@Override
	public DataClayInstanceID registerExternalDataClay(final String hostname, final int port) {
<span class="nc" id="L1485">		final RegisterExternalDataClayRequest request = RegisterExternalDataClayRequest.newBuilder()</span>
<span class="nc" id="L1486">				.setHostname(hostname).setPort(port).build();</span>
		final RegisterExternalDataClayResponse response;
<span class="nc" id="L1488">		final Function&lt;RegisterExternalDataClayRequest, RegisterExternalDataClayResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1489">				.registerExternalDataClay(req);</span>
<span class="nc" id="L1490">		response = this.&lt;RegisterExternalDataClayRequest, RegisterExternalDataClayResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1491">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1492">		return Utils.getDataClayInstanceID(response.getExtDataClayID());</span>
	}

	@Override
	public DataClayInstanceID registerExternalDataClayOverrideAuthority(final AccountID adminAccountID, final PasswordCredential adminCredential,
			final String hostname, final int port, final String authority) {
<span class="nc" id="L1498">		final RegisterExternalDataClayOverrideAuthorityRequest request = RegisterExternalDataClayOverrideAuthorityRequest.newBuilder()</span>
<span class="nc" id="L1499">				.setAdminAccountID(Utils.getMsgID(adminAccountID)).setAdminCredential(Utils.getCredential(adminCredential))</span>
<span class="nc" id="L1500">				.setHostname(hostname).setPort(port).setAuthority(authority).build();</span>
		final RegisterExternalDataClayResponse response;
<span class="nc" id="L1502">		final Function&lt;RegisterExternalDataClayOverrideAuthorityRequest, RegisterExternalDataClayResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1503">				.registerExternalDataClayOverrideAuthority(req);</span>
<span class="nc" id="L1504">		response = this.&lt;RegisterExternalDataClayOverrideAuthorityRequest, RegisterExternalDataClayResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1505">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1506">		return Utils.getDataClayInstanceID(response.getExtDataClayID());</span>
	}
	
	@Override
	public DataClayInstanceID notifyRegistrationOfExternalDataClay(final DataClayInstanceID dataClayInstanceID,
			final String hostname, final int port) {
		final NotifyRegistrationOfExternalDataClayRequest request = NotifyRegistrationOfExternalDataClayRequest
<span class="nc" id="L1513">				.newBuilder().setExtDataClayID(Utils.getMsgID(dataClayInstanceID)).setHostname(hostname).setPort(port)</span>
<span class="nc" id="L1514">				.build();</span>
		final NotifyRegistrationOfExternalDataClayResponse response;
<span class="nc" id="L1516">		final Function&lt;NotifyRegistrationOfExternalDataClayRequest, NotifyRegistrationOfExternalDataClayResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1517">				.notifyRegistrationOfExternalDataClay(req);</span>
<span class="nc" id="L1518">		response = this</span>
<span class="nc" id="L1519">				.&lt;NotifyRegistrationOfExternalDataClayRequest, NotifyRegistrationOfExternalDataClayResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1521">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1522">		return Utils.getDataClayInstanceID(response.getExtDataClayID());</span>
	}


	@Override
	public void registerObjectFromGC(final RegistrationInfo regInfo, final ExecutionEnvironmentID backendID,
			final DataServiceRuntime clientLib) {

<span class="nc" id="L1530">		final RegisterObjectForGCRequest.Builder builder = RegisterObjectForGCRequest.newBuilder();</span>

<span class="nc" id="L1532">		final CommonMessages.RegistrationInfo.Builder regInfoBuilder = CommonMessages.RegistrationInfo.newBuilder();</span>
<span class="nc" id="L1533">		regInfoBuilder.setObjectID(Utils.getMsgID(regInfo.getObjectID()));</span>
<span class="nc" id="L1534">		regInfoBuilder.setClassID(Utils.getMsgID(regInfo.getClassID()));</span>
<span class="nc" id="L1535">		regInfoBuilder.setSessionID(Utils.getMsgID(regInfo.getStoreSessionID()));</span>
<span class="nc" id="L1536">		regInfoBuilder.setDataSetID(Utils.getMsgID(regInfo.getDataSetID()));</span>

<span class="nc" id="L1538">		builder.setBackendID(Utils.getMsgID(backendID));</span>
<span class="nc" id="L1539">		builder.setRegInfo(regInfoBuilder.build());</span>
<span class="nc" id="L1540">		final RegisterObjectForGCRequest request = builder.build();</span>
<span class="nc" id="L1541">		final StreamObserver&lt;ExceptionInfo&gt; responseObserver = new StreamObserver&lt;ExceptionInfo&gt;() {</span>
			@Override
			public void onNext(final ExceptionInfo summary) {
				// do nothing
<span class="nc" id="L1545">				asyncReqReceived.incrementAndGet();</span>
<span class="nc" id="L1546">			}</span>

			@Override
			public void onError(final Throwable t) {
<span class="nc" id="L1550">				logger.debug(&quot;responseObserver for registerObjectsFromDSGarbageCollector got an error&quot;, t);</span>
<span class="nc" id="L1551">				asyncReqReceived.incrementAndGet();</span>
<span class="nc" id="L1552">			}</span>

			@Override
			public void onCompleted() {
<span class="nc" id="L1556">				logger.debug(&quot;[==Communication==] Asynchronous register object finished for object: {}&quot;,</span>
<span class="nc" id="L1557">							regInfo.getObjectID());</span>

<span class="nc" id="L1559">				asyncReqReceived.incrementAndGet();</span>
<span class="nc" id="L1560">			}</span>
		};
<span class="nc" id="L1562">		logger.debug(&quot;[==Communication==] Asynchronous call to register object &quot;</span>
<span class="nc" id="L1563">					+ &quot;Object: &quot; + regInfo.getObjectID());</span>

<span class="nc" id="L1565">		final BiConsumer&lt;RegisterObjectForGCRequest, StreamObserver&lt;ExceptionInfo&gt;&gt; f = (req, obs) -&gt; getAsyncStub()</span>
<span class="nc" id="L1566">				.registerObjectFromGC(req, obs);</span>
<span class="nc" id="L1567">		this.&lt;RegisterObjectForGCRequest, ExceptionInfo&gt;callLogicModuleAsync(request, responseObserver, f);</span>
<span class="nc" id="L1568">	}</span>

	@Override
	public List&lt;ObjectID&gt; registerObjects(final List&lt;RegistrationInfo&gt; regInfos, final ExecutionEnvironmentID backendID,
			final Langs lang) {

<span class="nc" id="L1574">		final RegisterObjectsRequest.Builder builder = RegisterObjectsRequest.newBuilder();</span>

<span class="nc bnc" id="L1576" title="All 2 branches missed.">		for (RegistrationInfo regInfo : regInfos) {</span>
<span class="nc" id="L1577">			final CommonMessages.RegistrationInfo.Builder regInfoBuilder = CommonMessages.RegistrationInfo.newBuilder();</span>
<span class="nc" id="L1578">			regInfoBuilder.setObjectID(Utils.getMsgID(regInfo.getObjectID()));</span>
<span class="nc" id="L1579">			regInfoBuilder.setClassID(Utils.getMsgID(regInfo.getClassID()));</span>
<span class="nc" id="L1580">			regInfoBuilder.setSessionID(Utils.getMsgID(regInfo.getStoreSessionID()));</span>
<span class="nc" id="L1581">			regInfoBuilder.setDataSetID(Utils.getMsgID(regInfo.getDataSetID()));</span>
<span class="nc bnc" id="L1582" title="All 2 branches missed.">			if (regInfo.getAlias() != null) {</span>
<span class="nc" id="L1583">				regInfoBuilder.setAlias(regInfo.getAlias());</span>
			}
<span class="nc" id="L1585">			builder.addRegInfos(regInfoBuilder.build());</span>
<span class="nc" id="L1586">		}</span>


<span class="nc" id="L1589">		builder.setBackendID(Utils.getMsgID(backendID));</span>
<span class="nc" id="L1590">		builder.setLang(lang);</span>

<span class="nc" id="L1592">		final RegisterObjectsRequest request = builder.build();</span>
		final RegisterObjectsResponse response;
<span class="nc" id="L1594">		final Function&lt;RegisterObjectsRequest, RegisterObjectsResponse &gt; f = req -&gt; getBlockingStub().registerObjects(req);</span>
<span class="nc" id="L1595">		response = this.&lt;RegisterObjectsRequest, RegisterObjectsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1596">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1598">		List&lt;ObjectID&gt; result = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L1599" title="All 2 branches missed.">		for (String oid : response.getObjectIDsList()) {</span>
<span class="nc" id="L1600">			result.add(Utils.getObjectID(oid));</span>
<span class="nc" id="L1601">		}</span>

<span class="nc" id="L1603">		return result;</span>
	}

	@Override
	public void setDataSetIDFromGarbageCollector(final ObjectID objectID, final DataSetID dataSetID) {
<span class="nc" id="L1608">		final SetDataSetIDFromGarbageCollectorRequest request = SetDataSetIDFromGarbageCollectorRequest.newBuilder()</span>
<span class="nc" id="L1609">				.setObjectID(Utils.getMsgID(objectID)).setDatasetID(Utils.getMsgID(dataSetID)).build();</span>
<span class="nc" id="L1610">		final StreamObserver&lt;ExceptionInfo&gt; responseObserver = new StreamObserver&lt;ExceptionInfo&gt;() {</span>
			@Override
			public void onNext(final ExceptionInfo summary) {
				// do nothing
<span class="nc" id="L1614">			}</span>

			@Override
			public void onError(final Throwable t) {
<span class="nc" id="L1618">				logger.debug(&quot;responseObserver for setDataSetIDFromGarbageCollector got an error&quot;, t);</span>
<span class="nc" id="L1619">				asyncReqReceived.incrementAndGet();</span>
<span class="nc" id="L1620">			}</span>

			@Override
			public void onCompleted() {
<span class="nc" id="L1624">				asyncReqReceived.incrementAndGet();</span>
<span class="nc" id="L1625">			}</span>
		};

<span class="nc" id="L1628">		final BiConsumer&lt;SetDataSetIDFromGarbageCollectorRequest, StreamObserver&lt;ExceptionInfo&gt;&gt; f = (req,</span>
<span class="nc" id="L1629">				obs) -&gt; getAsyncStub().setDataSetIDFromGarbageCollector(req, obs);</span>
<span class="nc" id="L1630">		this.&lt;SetDataSetIDFromGarbageCollectorRequest, ExceptionInfo&gt;callLogicModuleAsync(request, responseObserver, f);</span>
<span class="nc" id="L1631">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getExecutionEnvironmentsInfo(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public Map&lt;ExecutionEnvironmentID, ExecutionEnvironment&gt; getAllExecutionEnvironmentsInfo(
			final Langs execEnvLang, final boolean getExternal, final boolean fromBackend) {
<span class="nc" id="L1642">		final GetAllExecutionEnvironmentsInfoRequest request = GetAllExecutionEnvironmentsInfoRequest.newBuilder()</span>
<span class="nc" id="L1643">				.setExecEnvLang(execEnvLang).setGetExternal(getExternal).setFromBackend(fromBackend).build();</span>
		final GetAllExecutionEnvironmentsInfoResponse response;
<span class="nc" id="L1645">		final Function&lt;GetAllExecutionEnvironmentsInfoRequest, GetAllExecutionEnvironmentsInfoResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1646">				.getAllExecutionEnvironmentsInfo(req);</span>
<span class="nc" id="L1647">		response = this</span>
<span class="nc" id="L1648">				.&lt;GetAllExecutionEnvironmentsInfoRequest, GetAllExecutionEnvironmentsInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1649">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1651">		final Map&lt;ExecutionEnvironmentID, ExecutionEnvironment&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1652" title="All 2 branches missed.">		for (final Entry&lt;String, CommonMessages.ExecutionEnvironmentInfo&gt; entry : response.getExecEnvsMap().entrySet()) {</span>
<span class="nc" id="L1653">			result.put(Utils.getExecutionEnvironmentID(entry.getKey()),</span>
<span class="nc" id="L1654">					Utils.getExecutionEnvironment(entry.getValue()));</span>
<span class="nc" id="L1655">		}</span>
<span class="nc" id="L1656">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getStorageLocationsPerExecutionEnvironments(dataClay
	 * .util.ids.sessionID, dataClay.util.ids.ObjectID, dataClay.util.ids.DataSetID)
	 */
	@Override
	public void setDataSetID(final SessionID sessionID, final ObjectID objectID, final DataSetID dataSetID) {
<span class="nc" id="L1668">		final SetDataSetIDRequest request = SetDataSetIDRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1669">				.setObjectID(Utils.getMsgID(objectID)).setDatasetID(Utils.getMsgID(dataSetID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1671">		final Function&lt;SetDataSetIDRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().setDataSetID(req);</span>
<span class="nc" id="L1672">		response = this.&lt;SetDataSetIDRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1673">		Utils.checkIsExc(response);</span>

<span class="nc" id="L1675">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getObjectInfo(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID)
	 */
	@Override
	public Tuple&lt;String, String&gt; getObjectInfo(final SessionID sessionID, final ObjectID objectID) {
<span class="nc" id="L1685">		final GetObjectInfoRequest request = GetObjectInfoRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1686">				.setObjectID(Utils.getMsgID(objectID)).build();</span>
		final GetObjectInfoResponse response;
<span class="nc" id="L1688">		final Function&lt;GetObjectInfoRequest, GetObjectInfoResponse&gt; f = req -&gt; getBlockingStub().getObjectInfo(req);</span>
<span class="nc" id="L1689">		response = this.&lt;GetObjectInfoRequest, GetObjectInfoResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1690">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1691">		return new Tuple&lt;&gt;(response.getClassname(), response.getNamespace());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getObjectIDfromAlias(dataClay.util.ids.SessionID,
	 * java.lang.String)
	 */
	@Override
	public Triple&lt;ObjectID, MetaClassID, ExecutionEnvironmentID&gt; getObjectFromAlias(final SessionID sessionID,
			final String alias) {
<span class="nc" id="L1704">		final GetObjectFromAliasRequest request = GetObjectFromAliasRequest.newBuilder()</span>
<span class="nc" id="L1705">				.setSessionID(Utils.getMsgID(sessionID)).setAlias(alias).build();</span>
		final GetObjectFromAliasResponse response;
<span class="nc" id="L1707">		final Function&lt;GetObjectFromAliasRequest, GetObjectFromAliasResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1708">				.getObjectFromAlias(req);</span>
<span class="nc" id="L1709">		response = this.&lt;GetObjectFromAliasRequest, GetObjectFromAliasResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1710">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1711">		return new Triple&lt;&gt;(Utils.getObjectID(response.getObjectID()), Utils.getMetaClassID(response.getClassID()),</span>
<span class="nc" id="L1712">				Utils.getExecutionEnvironmentID(response.getHint()));</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#deleteAlias(dataClay.util.ids.SessionID,
	 * util.ids.MetaClassID, java.lang.String)
	 */
	@Override
	public ObjectID deleteAlias(final SessionID sessionID, final String alias) {
<span class="nc" id="L1723">		final DeleteAliasRequest request = DeleteAliasRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1724">				.setAlias(alias).build();</span>
		final DeleteAliasResponse response;
<span class="nc" id="L1726">		final Function&lt;DeleteAliasRequest, DeleteAliasResponse&gt; f = req -&gt; getBlockingStub().deleteAlias(req);</span>
<span class="nc" id="L1727">		response = this.&lt;DeleteAliasRequest, DeleteAliasResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1728">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1729">		return Utils.getObjectID(response.getObjectID());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getObjectsMetaDataInfoOfClassForNM(dataClay.util.ids
	 * .MetaClassID)
	 */
	@Override
	public HashMap&lt;ObjectID, MetaDataInfo&gt; getObjectsMetaDataInfoOfClassForNM(final MetaClassID classID) {
<span class="nc" id="L1741">		final GetObjectsMetaDataInfoOfClassForNMRequest request = GetObjectsMetaDataInfoOfClassForNMRequest.newBuilder()</span>
<span class="nc" id="L1742">				.setClassID(Utils.getMsgID(classID)).build();</span>

		final GetObjectsMetaDataInfoOfClassForNMResponse response;
<span class="nc" id="L1745">		final Function&lt;GetObjectsMetaDataInfoOfClassForNMRequest, GetObjectsMetaDataInfoOfClassForNMResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1746">				.getObjectsMetaDataInfoOfClassForNM(req);</span>
<span class="nc" id="L1747">		response = this</span>
<span class="nc" id="L1748">				.&lt;GetObjectsMetaDataInfoOfClassForNMRequest, GetObjectsMetaDataInfoOfClassForNMResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L1750">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1751">		final HashMap&lt;ObjectID, MetaDataInfo&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1752" title="All 2 branches missed.">		for (final Entry&lt;String, CommonMessages.MetaDataInfo&gt; entry : response.getMdataInfoMap().entrySet()) {</span>
<span class="nc" id="L1753">			result.put(Utils.getObjectID(entry.getKey()),</span>
<span class="nc" id="L1754">					Utils.getMetaDataInfo(entry.getValue()));</span>
<span class="nc" id="L1755">		}</span>
<span class="nc" id="L1756">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#moveObject(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID, util.ids.StorageLocationID, util.ids.StorageLocationID,
	 * boolean)
	 */
	@Override
	public List&lt;ObjectID&gt; moveObject(final SessionID sessionID, final ObjectID objectID,
			final ExecutionEnvironmentID srcBackendID, final ExecutionEnvironmentID destBackendID,
			final boolean recursive) {
<span class="nc" id="L1770">		final MoveObjectRequest request = MoveObjectRequest.newBuilder().setSessionID(Utils.getMsgID(sessionID))</span>
<span class="nc" id="L1771">				.setObjectID(Utils.getMsgID(objectID)).setSrcBackendID(Utils.getMsgID(srcBackendID))</span>
<span class="nc" id="L1772">				.setDestBackendID(Utils.getMsgID(destBackendID)).setRecursive(recursive).build();</span>
<span class="nc" id="L1773">		MoveObjectResponse response = null;</span>
<span class="nc" id="L1774">		final Function&lt;MoveObjectRequest, MoveObjectResponse&gt; f = req -&gt; getBlockingStub().moveObject(req);</span>
<span class="nc" id="L1775">		response = this.&lt;MoveObjectRequest, MoveObjectResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1776">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1778">		final List&lt;ObjectID&gt; result = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L1779" title="All 2 branches missed.">		for (final String curObjID : response</span>
<span class="nc" id="L1780">				.getObjectIDsList()) {</span>
<span class="nc" id="L1781">			result.add(Utils.getObjectID(curObjID));</span>
<span class="nc" id="L1782">		}</span>
<span class="nc" id="L1783">		return result;</span>

	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#setObjectReadOnly(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID)
	 */
	@Override
	public void setObjectReadOnly(final SessionID sessionID, final ObjectID objectID) {
<span class="nc" id="L1795">		final SetObjectReadOnlyRequest request = SetObjectReadOnlyRequest.newBuilder()</span>
<span class="nc" id="L1796">				.setSessionID(Utils.getMsgID(sessionID)).setObjectID(Utils.getMsgID(objectID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1798">		final Function&lt;SetObjectReadOnlyRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().setObjectReadOnly(req);</span>
<span class="nc" id="L1799">		response = this.&lt;SetObjectReadOnlyRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1800">		Utils.checkIsExc(response);</span>

<span class="nc" id="L1802">	}</span>

	@Override
	public boolean isPrefetchingEnabled() {
		final IsPrefetchingEnabledResponse response;
<span class="nc" id="L1807">		final Function&lt;EmptyMessage, IsPrefetchingEnabledResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1808">				.isPrefetchingEnabled(req);</span>
<span class="nc" id="L1809">		response = this.&lt;EmptyMessage, IsPrefetchingEnabledResponse&gt;callLogicModule(EmptyMessage.newBuilder().build(),</span>
				f);
<span class="nc" id="L1811">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1812">		return response.getEnabled();</span>
	}

	@Override
	public boolean objectExistsInDataClay(final ObjectID objectID) {
<span class="nc" id="L1817">		final ObjectExistsInDataClayRequest request = ObjectExistsInDataClayRequest.newBuilder()</span>
<span class="nc" id="L1818">				.setObjectID(Utils.getMsgID(objectID)).build();</span>
		final ObjectExistsInDataClayResponse response;
<span class="nc" id="L1820">		final Function&lt;ObjectExistsInDataClayRequest, ObjectExistsInDataClayResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1821">				.objectExistsInDataClay(req);</span>
<span class="nc" id="L1822">		response = this.&lt;ObjectExistsInDataClayRequest, ObjectExistsInDataClayResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1823">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1824">		return response.getExists();</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#setObjectReadWrite(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID)
	 */
	@Override
	public void setObjectReadWrite(final SessionID sessionID, final ObjectID objectID) {
<span class="nc" id="L1835">		final SetObjectReadWriteRequest request = SetObjectReadWriteRequest.newBuilder()</span>
<span class="nc" id="L1836">				.setSessionID(Utils.getMsgID(sessionID)).setObjectID(Utils.getMsgID(objectID)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L1838">		final Function&lt;SetObjectReadWriteRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().setObjectReadWrite(req);</span>
<span class="nc" id="L1839">		response = this.&lt;SetObjectReadWriteRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1840">		Utils.checkIsExc(response);</span>
<span class="nc" id="L1841">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getMetadataByOID(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID)
	 */
	@Override
	public MetaDataInfo getMetadataByOID(final SessionID sessionID, final ObjectID objectID) {
<span class="nc" id="L1851">		final GetMetadataByOIDRequest request = GetMetadataByOIDRequest.newBuilder()</span>
<span class="nc" id="L1852">				.setSessionID(Utils.getMsgID(sessionID)).setObjectID(Utils.getMsgID(objectID)).build();</span>
		final GetMetadataByOIDResponse response;
<span class="nc" id="L1854">		final Function&lt;GetMetadataByOIDRequest, GetMetadataByOIDResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1855">				.getMetadataByOID(req);</span>
<span class="nc" id="L1856">		response = this.&lt;GetMetadataByOIDRequest, GetMetadataByOIDResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1857">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1858">		MetaDataInfo objMdata = null;</span>
<span class="nc bnc" id="L1859" title="All 2 branches missed.">		if (response.getMdInfo() != null) {</span>
<span class="nc" id="L1860">			objMdata = Utils.getMetaDataInfo(response.getMdInfo());</span>
		}
<span class="nc" id="L1862">		return objMdata;</span>
	}

	@Override
	public MetaDataInfo getMetadataByOIDForDS(final ObjectID objectID) {
<span class="nc" id="L1867">		final GetMetadataByOIDForDSRequest request = GetMetadataByOIDForDSRequest.newBuilder()</span>
<span class="nc" id="L1868">				.setObjectID(Utils.getMsgID(objectID)).build();</span>
		final GetMetadataByOIDForDSResponse response;
<span class="nc" id="L1870">		final Function&lt;GetMetadataByOIDForDSRequest, GetMetadataByOIDForDSResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1871">				.getMetadataByOIDForDS(req);</span>
<span class="nc" id="L1872">		response = this.&lt;GetMetadataByOIDForDSRequest, GetMetadataByOIDForDSResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1873">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc" id="L1875">		final MetaDataInfo objMdata = Utils.getMetaDataInfo(response.getMdInfo());</span>
<span class="nc" id="L1876">		return objMdata;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#executeImplementation(dataClay.util.ids.SessionID,
	 * util.ids.OperationID, util.structs.Triple, util.ids.ObjectID, java.util.Map)
	 */
	@Override
	public SerializedParametersOrReturn executeImplementation(final SessionID sessionID, final OperationID operationID,
			final Triple&lt;ImplementationID, ContractID, InterfaceID&gt; remoteImplementation, final ObjectID objectID,
			final SerializedParametersOrReturn params) {
<span class="nc" id="L1890">		final ExecuteImplementationRequest.Builder builder = ExecuteImplementationRequest.newBuilder();</span>
<span class="nc" id="L1891">		builder.setSessionID(Utils.getMsgID(sessionID));</span>
<span class="nc" id="L1892">		builder.setOperationID(Utils.getMsgID(operationID));</span>
<span class="nc" id="L1893">		builder.setImplementationID(Utils.getMsgID(remoteImplementation.getFirst()));</span>
<span class="nc" id="L1894">		builder.setContractID(Utils.getMsgID(remoteImplementation.getSecond()));</span>
<span class="nc" id="L1895">		builder.setInterfaceID(Utils.getMsgID(remoteImplementation.getThird()));</span>
<span class="nc" id="L1896">		builder.setObjectID(Utils.getMsgID(objectID));</span>

<span class="nc bnc" id="L1898" title="All 2 branches missed.">		if (params != null) {</span>
<span class="nc" id="L1899">			builder.setParams(Utils.getParamsOrReturn(params));</span>
		}
<span class="nc" id="L1901">		final ExecuteImplementationRequest request = builder.build();</span>
		final ExecuteImplementationResponse response;
<span class="nc" id="L1903">		final Function&lt;ExecuteImplementationRequest, ExecuteImplementationResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1904">				.executeImplementation(req);</span>
<span class="nc" id="L1905">		response = this.&lt;ExecuteImplementationRequest, ExecuteImplementationResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1906">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc bnc" id="L1908" title="All 2 branches missed.">		if (response.hasRet()) {</span>
<span class="nc" id="L1909">			return Utils.getParamsOrReturn(response.getRet());</span>
		} else {
<span class="nc" id="L1911">			return null;</span>
		}
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#executeMethodOnTarget(dataClay.util.ids.SessionID,
	 * util.ids.ObjectID, java.lang.String, java.util.Map,
	 * util.ids.StorageLocationID)
	 */
	@Override
	public SerializedParametersOrReturn executeMethodOnTarget(final SessionID sessionID, final ObjectID objectID,
			final String operationSignature, final SerializedParametersOrReturn params,
			final ExecutionEnvironmentID backendID) {
<span class="nc" id="L1927">		final ExecuteMethodOnTargetRequest.Builder builder = ExecuteMethodOnTargetRequest.newBuilder();</span>
<span class="nc" id="L1928">		builder.setSessionID(Utils.getMsgID(sessionID));</span>
<span class="nc" id="L1929">		builder.setOperationNameAndSignature(operationSignature);</span>
<span class="nc" id="L1930">		builder.setObjectID(Utils.getMsgID(objectID));</span>
<span class="nc" id="L1931">		builder.setTargetBackendID(Utils.getMsgID(backendID));</span>

<span class="nc bnc" id="L1933" title="All 2 branches missed.">		if (params != null) {</span>
<span class="nc" id="L1934">			builder.setParams(Utils.getParamsOrReturn(params));</span>
		}
<span class="nc" id="L1936">		final ExecuteMethodOnTargetRequest request = builder.build();</span>
		final ExecuteMethodOnTargetResponse response;
<span class="nc" id="L1938">		final Function&lt;ExecuteMethodOnTargetRequest, ExecuteMethodOnTargetResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L1939">				.executeMethodOnTarget(req);</span>
<span class="nc" id="L1940">		response = this.&lt;ExecuteMethodOnTargetRequest, ExecuteMethodOnTargetResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1941">		Utils.checkIsExc(response.getExcInfo());</span>

<span class="nc bnc" id="L1943" title="All 2 branches missed.">		if (response.hasRet()) {</span>
<span class="nc" id="L1944">			return Utils.getParamsOrReturn(response.getRet());</span>
		} else {
<span class="nc" id="L1946">			return null;</span>
		}
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getStubs(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential,
	 * communication.grpc.messages.common.CommonMessages.Langs, java.util.List)
	 */
	@Override
	public Map&lt;String, byte[]&gt; getStubs(final AccountID applicantAccountID,
			final PasswordCredential applicantCredential, final Langs language, final List&lt;ContractID&gt; contractsIDs) {
<span class="nc" id="L1960">		final GetStubsRequest.Builder builder = GetStubsRequest.newBuilder();</span>
<span class="nc" id="L1961">		builder.setApplicantAccountID(Utils.getMsgID(applicantAccountID));</span>
<span class="nc" id="L1962">		builder.setCredentials(Utils.getCredential(applicantCredential));</span>
<span class="nc" id="L1963">		builder.setLanguage(language);</span>
<span class="nc bnc" id="L1964" title="All 2 branches missed.">		for (final ContractID cID : contractsIDs) {</span>
<span class="nc" id="L1965">			builder.addContractIDs(Utils.getMsgID(cID));</span>
<span class="nc" id="L1966">		}</span>
<span class="nc" id="L1967">		final GetStubsRequest request = builder.build();</span>
		final GetStubsResponse response;
<span class="nc" id="L1969">		final Function&lt;GetStubsRequest, GetStubsResponse&gt; f = req -&gt; getBlockingStub().getStubs(req);</span>
<span class="nc" id="L1970">		response = this.&lt;GetStubsRequest, GetStubsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1971">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L1972">		final Map&lt;String, byte[]&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L1973" title="All 2 branches missed.">		for (final Entry&lt;String, ByteString&gt; entry : response.getStubsMap().entrySet()) {</span>
<span class="nc" id="L1974">			final byte[] objBytes = entry.getValue().toByteArray();</span>
<span class="nc" id="L1975">			result.put(entry.getKey(), objBytes);</span>
<span class="nc" id="L1976">		}</span>
<span class="nc" id="L1977">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#getBabelStubs(dataClay.util.ids.AccountID,
	 * dataClay.util.management.accountmgr.Credential, java.util.List)
	 */
	@Override
	public byte[] getBabelStubs(final AccountID applicantAccountID, final PasswordCredential applicantCredential,
			final List&lt;ContractID&gt; contractsIDs) {
<span class="nc" id="L1989">		final GetBabelStubsRequest.Builder builder = GetBabelStubsRequest.newBuilder();</span>
<span class="nc" id="L1990">		builder.setAccountID(Utils.getMsgID(applicantAccountID));</span>
<span class="nc" id="L1991">		builder.setCredentials(Utils.getCredential(applicantCredential));</span>
<span class="nc bnc" id="L1992" title="All 2 branches missed.">		for (final ContractID cID : contractsIDs) {</span>
<span class="nc" id="L1993">			builder.addContractIDs(Utils.getMsgID(cID));</span>
<span class="nc" id="L1994">		}</span>
<span class="nc" id="L1995">		final GetBabelStubsRequest request = builder.build();</span>
		final GetBabelStubsResponse response;
<span class="nc" id="L1997">		final Function&lt;GetBabelStubsRequest, GetBabelStubsResponse&gt; f = req -&gt; getBlockingStub().getBabelStubs(req);</span>
<span class="nc" id="L1998">		response = this.&lt;GetBabelStubsRequest, GetBabelStubsResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L1999">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2000">		return response.getYamlStub().toByteArray();</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getClassNameForDS(dataClay.util.ids.MetaClassID)
	 */
	@Override
	public String getClassNameForDS(final MetaClassID classID) {
<span class="nc" id="L2011">		final GetClassNameForDSRequest request = GetClassNameForDSRequest.newBuilder()</span>
<span class="nc" id="L2012">				.setClassID(Utils.getMsgID(classID)).build();</span>
		final GetClassNameForDSResponse response;
<span class="nc" id="L2014">		final Function&lt;GetClassNameForDSRequest, GetClassNameForDSResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2015">				.getClassNameForDS(req);</span>
<span class="nc" id="L2016">		response = this.&lt;GetClassNameForDSRequest, GetClassNameForDSResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2017">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2018">		return response.getClassName();</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getClassNameAndNamespaceForDS(dataClay.util.ids.
	 * MetaClassID)
	 */
	@Override
	public Tuple&lt;String, String&gt; getClassNameAndNamespaceForDS(final MetaClassID classID) {
<span class="nc" id="L2030">		final GetClassNameAndNamespaceForDSRequest request = GetClassNameAndNamespaceForDSRequest.newBuilder()</span>
<span class="nc" id="L2031">				.setClassID(Utils.getMsgID(classID)).build();</span>
		final GetClassNameAndNamespaceForDSResponse response;
<span class="nc" id="L2033">		final Function&lt;GetClassNameAndNamespaceForDSRequest, GetClassNameAndNamespaceForDSResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2034">				.getClassNameAndNamespaceForDS(req);</span>
<span class="nc" id="L2035">		response = this.&lt;GetClassNameAndNamespaceForDSRequest, GetClassNameAndNamespaceForDSResponse&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2037">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2038">		return new Tuple&lt;&gt;(response.getClassName(), response.getNamespace());</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#registerEventListenerImplementation(dataClay.util.
	 * ids.AccountID, dataClay.util.management.accountmgr.Credential,
	 * util.events.listeners.ECA)
	 */
	@Override
	public void registerEventListenerImplementation(final AccountID accountID, final PasswordCredential credential,
			final ECA newEventListener) {
<span class="nc" id="L2052">		final RegisterECARequest request = RegisterECARequest.newBuilder()</span>
<span class="nc" id="L2053">				.setApplicantAccountID(Utils.getMsgID(accountID)).setCredentials(Utils.getCredential(credential))</span>
<span class="nc" id="L2054">				.setEca(CommonYAML.getYamlObject().dump(newEventListener)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2056">		final Function&lt;RegisterECARequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().registerECA(req);</span>
<span class="nc" id="L2057">		response = this.&lt;RegisterECARequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2058">		Utils.checkIsExc(response);</span>

<span class="nc" id="L2060">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#adviseEvent(util.events.message.EventMessage)
	 */
	@Override
	public void adviseEvent(final EventMessage newEvent) {
<span class="nc" id="L2069">		final AdviseEventRequest request = AdviseEventRequest.newBuilder()</span>
<span class="nc" id="L2070">				.setEventYaml(CommonYAML.getYamlObject().dump(newEvent)).build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2072">		final Function&lt;AdviseEventRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().adviseEvent(req);</span>
<span class="nc" id="L2073">		response = this.&lt;AdviseEventRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2074">		Utils.checkIsExc(response);</span>

<span class="nc" id="L2076">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#activateTracing()
	 */
	@Override
	public void activateTracing(final int currentAvailableTaskID) {
		final ExceptionInfo response;
<span class="nc" id="L2086">		final ActivateTracingRequest request = ActivateTracingRequest.newBuilder().setTaskid(currentAvailableTaskID)</span>
<span class="nc" id="L2087">				.build();</span>
<span class="nc" id="L2088">		final Function&lt;ActivateTracingRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().activateTracing(req);</span>
<span class="nc" id="L2089">		response = this.&lt;ActivateTracingRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2090">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2091">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#deactivateTracing()
	 */
	@Override
	public void deactivateTracing() {
		final ExceptionInfo response;
<span class="nc" id="L2101">		final Function&lt;EmptyMessage, ExceptionInfo&gt; f = req -&gt; getBlockingStub().deactivateTracing(req);</span>
<span class="nc" id="L2102">		response = this.&lt;EmptyMessage, ExceptionInfo&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2103">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2104">	}</span>
	
	@Override
	public Map&lt;String, byte[]&gt; getTraces() { 
		final GetTracesResponse response;
<span class="nc" id="L2109">		final Function&lt;EmptyMessage, GetTracesResponse&gt; f = req -&gt; getBlockingStub().getTraces(req);</span>
<span class="nc" id="L2110">		response = this.&lt;EmptyMessage, GetTracesResponse&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2111">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2112">		final Map&lt;String, byte[]&gt; result = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L2113" title="All 2 branches missed.">		for (final Entry&lt;String, ByteString&gt; entry : response.getTracesMap().entrySet()) {</span>
<span class="nc" id="L2114">			final byte[] objBytes = entry.getValue().toByteArray();</span>
<span class="nc" id="L2115">			result.put(entry.getKey(), objBytes);</span>
<span class="nc" id="L2116">		}</span>
<span class="nc" id="L2117">		return result;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#cleanMetaDataCaches()
	 */
	@Override
	public void cleanMetaDataCaches() {
		final ExceptionInfo response;
<span class="nc" id="L2128">		final Function&lt;EmptyMessage, ExceptionInfo&gt; f = req -&gt; getBlockingStub().cleanMetaDataCaches(req);</span>
<span class="nc" id="L2129">		response = this.&lt;EmptyMessage, ExceptionInfo&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2130">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2131">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#closeManagerDb()
	 */
	@Override
	public void closeManagerDb() {
		final ExceptionInfo response;
<span class="nc" id="L2141">		final Function&lt;EmptyMessage, ExceptionInfo&gt; f = req -&gt; getBlockingStub().closeManagerDb(req);</span>
<span class="nc" id="L2142">		response = this.&lt;EmptyMessage, ExceptionInfo&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2143">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2144">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see logic.api.LogicModuleAPI#closeDb()
	 */
	@Override
	public void closeDb() {
		final ExceptionInfo response;
<span class="nc" id="L2154">		final Function&lt;EmptyMessage, ExceptionInfo&gt; f = req -&gt; getBlockingStub().closeDb(req);</span>
<span class="nc" id="L2155">		response = this.&lt;EmptyMessage, ExceptionInfo&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2156">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2157">	}</span>

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * logic.api.LogicModuleAPI#getContractIDOfDataClayProvider(dataClay.util.ids.
	 * AccountID, dataClay.util.management.accountmgr.Credential)
	 */
	@Override
	public ContractID getContractIDOfDataClayProvider(final AccountID accountID, final PasswordCredential credential) {
<span class="nc" id="L2168">		final GetContractIDOfDataClayProviderRequest request = GetContractIDOfDataClayProviderRequest.newBuilder()</span>
<span class="nc" id="L2169">				.setApplicantAccountID(Utils.getMsgID(accountID)).setCredentials(Utils.getCredential(credential))</span>
<span class="nc" id="L2170">				.build();</span>
		final GetContractIDOfDataClayProviderResponse response;
<span class="nc" id="L2172">		final Function&lt;GetContractIDOfDataClayProviderRequest, GetContractIDOfDataClayProviderResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2173">				.getContractIDOfDataClayProvider(req);</span>
<span class="nc" id="L2174">		response = this</span>
<span class="nc" id="L2175">				.&lt;GetContractIDOfDataClayProviderRequest, GetContractIDOfDataClayProviderResponse&gt;callLogicModule(</span>
						request, f);
<span class="nc" id="L2177">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2178">		return Utils.getContractID(response.getContractID());</span>
	}

	/**
	 * Wait all async. requests
	 */
	public void waitAndProcessAllAsyncRequests() {
<span class="nc bnc" id="L2185" title="All 2 branches missed.">		while (asyncReqSend.get() != asyncReqReceived.get()) {</span>
			try {
<span class="nc" id="L2187">				Thread.sleep(ASYNC_WAIT_MILLIS);</span>
<span class="nc" id="L2188">			} catch (final InterruptedException ex) {</span>
<span class="nc" id="L2189">				logger.debug(&quot;waitAndProcessAllAsyncRequests was interrupted while sleeping&quot;, ex);</span>
<span class="nc" id="L2190">			}</span>
		}
<span class="nc" id="L2192">	}</span>

	@Override
	public void unregisterObjects(final Set&lt;ObjectID&gt; objectsToUnregister) {
<span class="nc" id="L2196">		final UnregisterObjectsRequest.Builder requestBuilder = UnregisterObjectsRequest.newBuilder();</span>
<span class="nc bnc" id="L2197" title="All 2 branches missed.">		for (final ObjectID oid : objectsToUnregister) {</span>
<span class="nc" id="L2198">			requestBuilder.addObjectsToUnregister(Utils.getMsgID(oid));</span>
<span class="nc" id="L2199">		}</span>
<span class="nc" id="L2200">		final UnregisterObjectsRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2202">		final Function&lt;UnregisterObjectsRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().unregisterObjects(req);</span>
<span class="nc" id="L2203">		response = this.&lt;UnregisterObjectsRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2204">		Utils.checkIsExc(response);</span>

<span class="nc" id="L2206">	}</span>

	@Override
	public void publishAddress(final String hostname, final int port) {
<span class="nc" id="L2210">		final PublishAddressRequest.Builder requestBuilder = PublishAddressRequest.newBuilder();</span>
<span class="nc" id="L2211">		requestBuilder.setHostname(hostname);</span>
<span class="nc" id="L2212">		requestBuilder.setPort(port);</span>
<span class="nc" id="L2213">		final PublishAddressRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2215">		final Function&lt;PublishAddressRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub().publishAddress(req);</span>
<span class="nc" id="L2216">		response = this.&lt;PublishAddressRequest, ExceptionInfo&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2217">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2218">	}</span>

	@Override
	public Tuple&lt;Namespace, Set&lt;MetaClass&gt;&gt; getClassesInNamespace(final String namespaceName) {
<span class="nc" id="L2222">		final GetClassesInNamespaceRequest.Builder requestBuilder = GetClassesInNamespaceRequest.newBuilder();</span>
<span class="nc" id="L2223">		requestBuilder.setNamespaceName(namespaceName);</span>
<span class="nc" id="L2224">		final GetClassesInNamespaceRequest request = requestBuilder.build();</span>
		final GetClassesInNamespaceResponse response;
<span class="nc" id="L2226">		final Function&lt;GetClassesInNamespaceRequest, GetClassesInNamespaceResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2227">				.getClassesInNamespace(req);</span>
<span class="nc" id="L2228">		response = this.&lt;GetClassesInNamespaceRequest, GetClassesInNamespaceResponse&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2230">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2231">		final Namespace namespace = (Namespace) CommonYAML.getYamlObject().load(response.getNamespaceYaml());</span>
<span class="nc" id="L2232">		final Set&lt;MetaClass&gt; metaClasses = new HashSet&lt;&gt;();</span>
<span class="nc bnc" id="L2233" title="All 2 branches missed.">		for (final String metaClassYaml : response.getMetaClassYamlList()) {</span>
<span class="nc" id="L2234">			metaClasses.add((MetaClass) CommonYAML.getYamlObject().load(metaClassYaml));</span>
<span class="nc" id="L2235">		}</span>
<span class="nc" id="L2236">		return new Tuple&lt;&gt;(namespace, metaClasses);</span>
	}

	@Override
	public void importModelsFromExternalDataClay(final String extNamespaceName, final DataClayInstanceID extDataClayID) {
<span class="nc" id="L2241">		final ImportModelsFromExternalDataClayRequest.Builder requestBuilder = ImportModelsFromExternalDataClayRequest.newBuilder();</span>
<span class="nc" id="L2242">		requestBuilder.setNamespaceName(extNamespaceName);</span>
<span class="nc" id="L2243">		requestBuilder.setDataClayID(Utils.getMsgID(extDataClayID));</span>
<span class="nc" id="L2244">		final ImportModelsFromExternalDataClayRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2246">		final Function&lt;ImportModelsFromExternalDataClayRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2247">				.importModelsFromExternalDataClay(req);</span>
<span class="nc" id="L2248">		response = this.&lt;ImportModelsFromExternalDataClayRequest, ExceptionInfo&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2250">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2251">	}</span>

	@Override
	public StorageLocationID getStorageLocationID(final String slName) {
<span class="nc" id="L2255">		final GetStorageLocationIDRequest.Builder requestBuilder = GetStorageLocationIDRequest.newBuilder();</span>
<span class="nc" id="L2256">		requestBuilder.setSlName(slName);</span>
<span class="nc" id="L2257">		final GetStorageLocationIDRequest request = requestBuilder.build();</span>
		final GetStorageLocationIDResponse response;
<span class="nc" id="L2259">		final Function&lt;GetStorageLocationIDRequest, GetStorageLocationIDResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2260">				.getStorageLocationID(req);</span>
<span class="nc" id="L2261">		response = this.&lt;GetStorageLocationIDRequest, GetStorageLocationIDResponse&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2263">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2264">		return Utils.getStorageLocationID(response.getStorageLocationID());</span>
	}

	@Override
	public void notifyExecutionEnvironmentShutdown(final ExecutionEnvironmentID execEnvID) {
<span class="nc" id="L2269">		final NotifyExecutionEnvironmentShutdownRequest.Builder requestBuilder = NotifyExecutionEnvironmentShutdownRequest.newBuilder();</span>
<span class="nc" id="L2270">		requestBuilder.setExecutionEnvironmentID(Utils.getMsgID(execEnvID));</span>
<span class="nc" id="L2271">		final NotifyExecutionEnvironmentShutdownRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2273">		final Function&lt;NotifyExecutionEnvironmentShutdownRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2274">				.notifyExecutionEnvironmentShutdown(req);</span>
<span class="nc" id="L2275">		response = this.&lt;NotifyExecutionEnvironmentShutdownRequest, ExceptionInfo&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2277">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2278">	}</span>

	@Override
	public void notifyStorageLocationShutdown(final StorageLocationID stLocID) {
<span class="nc" id="L2282">		final NotifyStorageLocationShutdownRequest.Builder requestBuilder = NotifyStorageLocationShutdownRequest.newBuilder();</span>
<span class="nc" id="L2283">		requestBuilder.setStorageLocationID(Utils.getMsgID(stLocID));</span>
<span class="nc" id="L2284">		final NotifyStorageLocationShutdownRequest request = requestBuilder.build();</span>
		final ExceptionInfo response;
<span class="nc" id="L2286">		final Function&lt;NotifyStorageLocationShutdownRequest, ExceptionInfo&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2287">				.notifyStorageLocationShutdown(req);</span>
<span class="nc" id="L2288">		response = this.&lt;NotifyStorageLocationShutdownRequest, ExceptionInfo&gt;callLogicModule(</span>
				request, f);
<span class="nc" id="L2290">		Utils.checkIsExc(response);</span>
<span class="nc" id="L2291">	}</span>

	@Override
	public boolean existsActiveEnvironmentsForSL(final StorageLocationID stLocID) {
<span class="nc" id="L2295">		final ExistsActiveEnvironmentsForSLRequest.Builder requestBuilder = ExistsActiveEnvironmentsForSLRequest.newBuilder();</span>
<span class="nc" id="L2296">		requestBuilder.setStorageLocationID(Utils.getMsgID(stLocID));</span>
<span class="nc" id="L2297">		final ExistsActiveEnvironmentsForSLRequest request = requestBuilder.build();</span>
		final ExistsActiveEnvironmentsForSLResponse response;
<span class="nc" id="L2299">		final Function&lt;ExistsActiveEnvironmentsForSLRequest, ExistsActiveEnvironmentsForSLResponse&gt; f = req -&gt; getBlockingStub()</span>
<span class="nc" id="L2300">				.existsActiveEnvironmentsForSL(req);</span>
<span class="nc" id="L2301">		response = this.&lt;ExistsActiveEnvironmentsForSLRequest, ExistsActiveEnvironmentsForSLResponse&gt;callLogicModule(request, f);</span>
<span class="nc" id="L2302">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2303">		return response.getExists();</span>
	}

	@Override
	public int getNumObjects() {
		CommonMessages.GetNumObjectsResponse response;
<span class="nc" id="L2309">		final Function&lt;EmptyMessage, CommonMessages.GetNumObjectsResponse&gt; f = req -&gt; getBlockingStub().getNumObjects(req);</span>
<span class="nc" id="L2310">		response = this.&lt;EmptyMessage, CommonMessages.GetNumObjectsResponse&gt;callLogicModule(EmptyMessage.newBuilder().build(), f);</span>
<span class="nc" id="L2311">		Utils.checkIsExc(response.getExcInfo());</span>
<span class="nc" id="L2312">		return response.getNumObjs();</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>